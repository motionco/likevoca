import { auth, db } from "../../js/firebase/firebase-init.js";
import {
  setDoc,
  doc,
  getDoc,
  updateDoc,
} from "https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js";

// í•œê¸€ ìëª¨ ë¶„ë¦¬ í•¨ìˆ˜
function decomposeHangul(hangul) {
  const charCode = hangul.charCodeAt(0);

  // í•œê¸€ ìœ ë‹ˆì½”ë“œ ë²”ìœ„ (AC00-D7A3) ì²´í¬
  if (charCode < 0xac00 || charCode > 0xd7a3) {
    return { initial: hangul, medial: "", final: "" };
  }

  const baseCode = 0xac00; // 'ê°€'ì˜ ì½”ë“œ
  const baseCount = charCode - baseCode;

  // ì´ˆì„± 19ê°œ, ì¤‘ì„± 21ê°œ, ì¢…ì„± 28ê°œ(ì—†ìŒ í¬í•¨)
  const initialCount = Math.floor(baseCount / (21 * 28));
  const medialCount = Math.floor((baseCount % (21 * 28)) / 28);
  const finalCount = baseCount % 28;

  // ì´ˆì„±, ì¤‘ì„±, ì¢…ì„± ëª©ë¡
  const initials = [
    "ã„±",
    "ã„²",
    "ã„´",
    "ã„·",
    "ã„¸",
    "ã„¹",
    "ã…",
    "ã…‚",
    "ã…ƒ",
    "ã……",
    "ã…†",
    "ã…‡",
    "ã…ˆ",
    "ã…‰",
    "ã…Š",
    "ã…‹",
    "ã…Œ",
    "ã…",
    "ã…",
  ];
  const medials = [
    "ã…",
    "ã…",
    "ã…‘",
    "ã…’",
    "ã…“",
    "ã…”",
    "ã…•",
    "ã…–",
    "ã…—",
    "ã…˜",
    "ã…™",
    "ã…š",
    "ã…›",
    "ã…œ",
    "ã…",
    "ã…",
    "ã…Ÿ",
    "ã… ",
    "ã…¡",
    "ã…¢",
    "ã…£",
  ];
  const finals = [
    "",
    "ã„±",
    "ã„²",
    "ã„³",
    "ã„´",
    "ã„µ",
    "ã„¶",
    "ã„·",
    "ã„¹",
    "ã„º",
    "ã„»",
    "ã„¼",
    "ã„½",
    "ã„¾",
    "ã„¿",
    "ã…€",
    "ã…",
    "ã…‚",
    "ã…„",
    "ã……",
    "ã…†",
    "ã…‡",
    "ã…ˆ",
    "ã…Š",
    "ã…‹",
    "ã…Œ",
    "ã…",
    "ã…",
  ];

  return {
    initial: initials[initialCount],
    medial: medials[medialCount],
    final: finals[finalCount],
  };
}

// í•œê¸€ ë°œìŒì„ ì˜ì–´ ë¡œë§ˆìë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
function getHangulPronunciation(char) {
  // ìëª¨ ë¶„ë¦¬
  const decomposed = decomposeHangul(char);

  // ì´ˆì„± ë°œìŒ ë§¤í•‘
  const initialMap = {
    ã„±: "g",
    ã„²: "kk",
    ã„´: "n",
    ã„·: "d",
    ã„¸: "tt",
    ã„¹: "r",
    ã…: "m",
    ã…‚: "b",
    ã…ƒ: "pp",
    ã……: "s",
    ã…†: "ss",
    ã…‡: "",
    ã…ˆ: "j",
    ã…‰: "jj",
    ã…Š: "ch",
    ã…‹: "k",
    ã…Œ: "t",
    ã…: "p",
    ã…: "h",
  };

  // ì¤‘ì„± ë°œìŒ ë§¤í•‘
  const medialMap = {
    ã…: "a",
    ã…: "ae",
    ã…‘: "ya",
    ã…’: "yae",
    ã…“: "eo",
    ã…”: "e",
    ã…•: "yeo",
    ã…–: "ye",
    ã…—: "o",
    ã…˜: "wa",
    ã…™: "wae",
    ã…š: "oe",
    ã…›: "yo",
    ã…œ: "u",
    ã…: "wo",
    ã…: "we",
    ã…Ÿ: "wi",
    ã… : "yu",
    ã…¡: "eu",
    ã…¢: "ui",
    ã…£: "i",
  };

  // ì¢…ì„± ë°œìŒ ë§¤í•‘ (ë°›ì¹¨)
  const finalMap = {
    "": "",
    ã„±: "k",
    ã„²: "k",
    ã„³: "k",
    ã„´: "n",
    ã„µ: "n",
    ã„¶: "n",
    ã„·: "t",
    ã„¹: "l",
    ã„º: "k",
    ã„»: "m",
    ã„¼: "l",
    ã„½: "l",
    ã„¾: "l",
    ã„¿: "p",
    ã…€: "l",
    ã…: "m",
    ã…‚: "p",
    ã…„: "p",
    ã……: "t",
    ã…†: "t",
    ã…‡: "ng",
    ã…ˆ: "t",
    ã…Š: "t",
    ã…‹: "k",
    ã…Œ: "t",
    ã…: "p",
    ã…: "t",
  };

  // ì™„ì„±í˜• í•œê¸€ì´ë©´ ìëª¨ë¥¼ ë¶„ë¦¬í•˜ì—¬ ë°œìŒ ìƒì„±
  if (decomposed.initial) {
    // ì´ˆì„±ì´ 'ã…‡'ì´ê³  ë‹¨ì–´ ì²« ìŒì ˆì´ë©´ ë°œìŒí•˜ì§€ ì•ŠìŒ
    const initialSound =
      decomposed.initial === "ã…‡" ? "" : initialMap[decomposed.initial] || "";
    const medialSound = medialMap[decomposed.medial] || "";
    const finalSound = finalMap[decomposed.final] || "";

    return initialSound + medialSound + finalSound;
  }

  // ë‹¨ì¼ ìëª¨ì´ê±°ë‚˜ ë§¤í•‘ë˜ì§€ ì•Šì€ ë¬¸ìëŠ” ê¸°ë³¸ ë§¤í•‘ í…Œì´ë¸” ì‚¬ìš©
  const basicMap = {
    // ììŒ
    ã„±: "g/k",
    ã„²: "kk",
    ã„´: "n",
    ã„·: "d/t",
    ã„¸: "tt",
    ã„¹: "r/l",
    ã…: "m",
    ã…‚: "b/p",
    ã…ƒ: "pp",
    ã……: "s",
    ã…†: "ss",
    ã…‡: "ng",
    ã…ˆ: "j",
    ã…‰: "jj",
    ã…Š: "ch",
    ã…‹: "k",
    ã…Œ: "t",
    ã…: "p",
    ã…: "h",
    // ëª¨ìŒ
    ã…: "a",
    ã…: "ae",
    ã…‘: "ya",
    ã…’: "yae",
    ã…“: "eo",
    ã…”: "e",
    ã…•: "yeo",
    ã…–: "ye",
    ã…—: "o",
    ã…˜: "wa",
    ã…™: "wae",
    ã…š: "oe",
    ã…›: "yo",
    ã…œ: "u",
    ã…: "wo",
    ã…: "we",
    ã…Ÿ: "wi",
    ã… : "yu",
    ã…¡: "eu",
    ã…¢: "ui",
    ã…£: "i",
    // ì¼ë°˜ì ì¸ ë‹¨ì¼ ìŒì ˆ
    ê°€: "ga",
    ë‚˜: "na",
    ë‹¤: "da",
    ë¼: "ra",
    ë§ˆ: "ma",
    ë°”: "ba",
    ì‚¬: "sa",
    ì•„: "a",
    ì: "ja",
    ì°¨: "cha",
    ì¹´: "ka",
    íƒ€: "ta",
    íŒŒ: "pa",
    í•˜: "ha",
    // ë°›ì¹¨ ìˆëŠ” ìŒì ˆ ëª‡ ê°€ì§€ ì˜ˆì‹œ
    ê°: "gak",
    ê°„: "gan",
    ê°‘: "gap",
    ê°‡: "gat",
    ê°•: "gang",
    ê°ˆ: "gal",
    ê°: "gam",
    ê°’: "gap",
    ê³°: "gom",
    ê³µ: "gong",
    êµ­: "guk",
    êµ´: "gul",
    êµ¿: "gut",
    ê¶: "gung",
    ê¸€: "geul",
    ê¸ˆ: "geum",
    ê¸‰: "geup",
    ê¸°: "gi",
  };

  return basicMap[char] || char;
}

// ì „ì²´ í•œê¸€ ë¬¸ìì—´ì˜ ì˜ì–´ ë°œìŒì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
function getFullPronunciation(text) {
  let result = "";

  // í•œê¸€ ë¬¸ì í•˜ë‚˜ì”© ì²˜ë¦¬
  for (let i = 0; i < text.length; i++) {
    const char = text.charAt(i);
    const pronunciation = getHangulPronunciation(char);

    // ì˜ì–´ ë°œìŒ ì¶”ê°€
    result += pronunciation;

    // ë§ˆì§€ë§‰ ê¸€ìê°€ ì•„ë‹ˆë©´ í•˜ì´í”ˆ ì¶”ê°€
    if (i < text.length - 1) {
      result += "-";
    }
  }

  return result;
}

// í•œê¸€ ì˜ë¯¸ì— ê¸°ë°˜í•œ ì´ëª¨ì§€ ë§¤í•‘
const meaningBasedEmojis = {
  ì‚¬ëŒ: ["ğŸ‘¤", "ğŸ‘¥", "ğŸ‘¨", "ğŸ‘©", "ğŸ§‘", "ğŸ§’", "ğŸ‘¶"],
  ê°€ì¡±: ["ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦", "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§", "ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦", "ğŸ‘ª", "ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦", "ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦"],
  ë™ë¬¼: ["ğŸ•", "ğŸˆ", "ğŸ…", "ğŸ†", "ğŸ¦", "ğŸ˜", "ğŸ¦’", "ğŸ„", "ğŸ–", "ğŸ‘"],
  ìƒˆ: ["ğŸ¦", "ğŸ¦†", "ğŸ¦…", "ğŸ¦‰", "ğŸ¦œ", "ğŸ“", "ğŸ•Šï¸"],
  ìì—°: ["ğŸŒ³", "ğŸŒ²", "ğŸŒ´", "ğŸŒµ", "ğŸŒ¿", "ğŸ€", "ğŸŒ±", "ğŸ’", "ğŸŒ·", "ğŸŒ¹"],
  ë‚ ì”¨: ["â˜€ï¸", "â›…", "â˜ï¸", "ğŸŒ¤ï¸", "ğŸŒ¥ï¸", "ğŸŒ¦ï¸", "ğŸŒ§ï¸", "ğŸŒ¨ï¸", "ğŸŒ©ï¸", "â„ï¸"],
  ìŒì‹: ["ğŸ", "ğŸ•", "ğŸ”", "ğŸœ", "ğŸš", "ğŸ™", "ğŸ£", "ğŸ–", "ğŸ—", "ğŸ¥©"],
  ê³¼ì¼: ["ğŸ", "ğŸŠ", "ğŸ‹", "ğŸŒ", "ğŸ‰", "ğŸ‡", "ğŸ“", "ğŸ‘", "ğŸ’", "ğŸ"],
  ì±„ì†Œ: ["ğŸ¥•", "ğŸ¥”", "ğŸ¥¦", "ğŸ¥¬", "ğŸ¥’", "ğŸŒ½", "ğŸ†", "ğŸ§…", "ğŸ§„", "ğŸ¥‘"],
  í•™êµ: ["ğŸ«", "ğŸ“š", "âœï¸", "ğŸ“", "ğŸ““", "ğŸ’", "ğŸ‘¨â€ğŸ«", "ğŸ‘©â€ğŸ«", "ğŸ§‘â€ğŸ“", "ğŸ‘¨â€ğŸ“"],
  ìŠ¤í¬ì¸ : ["âš½", "ğŸ€", "ğŸˆ", "âš¾", "ğŸ¾", "ğŸ", "ğŸ“", "ğŸ¸", "ğŸŠ", "ğŸš´"],
  ê°ì •: ["ğŸ˜€", "ğŸ˜", "ğŸ˜¢", "ğŸ˜¡", "ğŸ˜±", "ğŸ˜", "ğŸ¥°", "ğŸ˜‚", "ğŸ˜­", "ğŸ˜´"],
  êµí†µ: ["ğŸš—", "ğŸš•", "ğŸšŒ", "ğŸš‚", "âœˆï¸", "ğŸš¢", "ğŸ›©ï¸", "ğŸš²", "ğŸš", "ğŸ›µ"],
  ìŒì•…: ["ğŸµ", "ğŸ¶", "ğŸ¸", "ğŸ¹", "ğŸº", "ğŸ·", "ğŸ¥", "ğŸ»", "ğŸ¤", "ğŸ§"],
  ë¬¸í™”: ["ğŸ­", "ğŸ¬", "ğŸ¨", "ğŸ“½ï¸", "ğŸï¸", "ğŸ›ï¸", "ğŸª", "ğŸ", "ğŸŒ", "ğŸ®"],
  ì§ì—…: ["ğŸ‘¨â€âš•ï¸", "ğŸ‘©â€âš•ï¸", "ğŸ‘¨â€ğŸš’", "ğŸ‘©â€ğŸš’", "ğŸ‘®", "ğŸ‘¨â€ğŸ³", "ğŸ‘©â€ğŸ³", "ğŸ‘¨â€ğŸ”§", "ğŸ‘©â€ğŸ”§", "ğŸ‘·"],
  ê³¼í•™: ["ğŸ”¬", "ğŸ”­", "âš—ï¸", "ğŸ§ª", "ğŸ’»", "ğŸ”‹", "ğŸ§¬", "ğŸ§ ", "ğŸ¦ ", "ğŸ§«"],
  ì‹œê°„: ["â°", "âŒš", "â±ï¸", "â²ï¸", "ğŸ•°ï¸", "ğŸ“…", "ğŸ“†", "ğŸ—“ï¸"],
  ì¥ì†Œ: ["ğŸ ", "ğŸ¢", "ğŸ¨", "ğŸ¥", "ğŸ­", "ğŸ›ï¸", "â›ª", "ğŸ¯", "ğŸ°", "ğŸ—½"],
  ìƒ‰ìƒ: ["ğŸ”´", "ğŸŸ ", "ğŸŸ¡", "ğŸŸ¢", "ğŸ”µ", "ğŸŸ£", "âš«", "âšª", "ğŸŸ¤", "ğŸŒˆ"],
  ìì—°í™˜ê²½: ["ğŸï¸", "ğŸŒ‹", "ğŸœï¸", "ğŸï¸", "â›°ï¸", "ğŸ”ï¸", "ğŸŒ„", "ğŸŒ…", "ğŸŒŠ", "ğŸŒ²"],
  í•™ìŠµ: ["ğŸ“š", "ğŸ“", "âœï¸", "ğŸ“Š", "ğŸ§®", "ğŸ”", "ğŸ§ ", "ğŸ’­", "ğŸ“", "ğŸ‘¨â€ğŸ«"],
  í†µì‹ : ["ğŸ“±", "ğŸ“", "ğŸ“²", "ğŸ’»", "ğŸ“§", "ğŸ“¨", "âœ‰ï¸", "ğŸ“¡", "ğŸ›°ï¸", "ğŸ“º"],
  ê±´ê°•: ["â¤ï¸", "ğŸ¥", "ğŸ’Š", "ğŸ’‰", "ğŸ©º", "ğŸ§¬", "ğŸ¦·", "ğŸ‘¨â€âš•ï¸", "ğŸ", "ğŸƒ"],
};

const synonymMap = {
  // ê¸°ì¡´ ë™ì˜ì–´
  // ... existing code ...

  // í”¼ ê´€ë ¨ ë™ì˜ì–´
  í”¼: "í”¼", // ìê¸° ìì‹  ì°¸ì¡° (wordBasedEmojiMapì—ì„œ í”¼ ì´ëª¨ì§€ ì‚¬ìš©)

  // ê¸°íƒ€ ì¶”ê°€
  ë°œ: "ë°œ",
  ë‹¤ë¦¬: "ë‹¤ë¦¬",
  ê±´ë„ë‹¤ë¦¬: "ë‹¤ë¦¬_êµëŸ‰", // êµëŸ‰ ë‹¤ë¦¬
  êµëŸ‰: "ë‹¤ë¦¬_êµëŸ‰",
  ë‹¤ë¦¬_êµëŸ‰: "ë‹¤ë¦¬_êµëŸ‰",
  ì‚¬ë‹¤ë¦¬: "ì‚¬ë‹¤ë¦¬",

  // ì§ì—… ë° ì¥ì†Œ ì¶”ê°€
  ë³‘ì›: "ë³‘ì›",
  ì˜ì‚¬: "ì˜ì‚¬",
  ê°„í˜¸ì‚¬: "ê°„í˜¸ì‚¬",
  ê²½ì°°: "ê²½ì°°",
  ì†Œë°©ê´€: "ì†Œë°©ê´€",
  ì†Œë°©ì°¨: "ì†Œë°©ì°¨",
  ì„ ìƒë‹˜: "ì„ ìƒë‹˜",
  êµ°ì¸: "êµ°ì¸",
  ìš”ë¦¬ì‚¬: "ìš”ë¦¬ì‚¬",
  ì—”ì§€ë‹ˆì–´: "ì—”ì§€ë‹ˆì–´",
  ê³¼í•™ì: "ê³¼í•™ì",
  ë†ë¶€: "ë†ë¶€",
  ì–´ë¶€: "ì–´ë¶€",

  // ë™ë¬¼ ì¶”ê°€
  ë¼ì§€: "ë¼ì§€",
  ë±€: "ë±€",
  í† ë¼: "í† ë¼",
  ì‚¬ì: "ì‚¬ì",
  í˜¸ë‘ì´: "í˜¸ë‘ì´",
  ê¸°ë¦°: "ê¸°ë¦°",
  ì›ìˆ­ì´: "ì›ìˆ­ì´",
  ì½”ì•Œë¼: "ì½”ì•Œë¼",
  íŒ¬ë”: "íŒ¬ë”",
  ê³°: "ê³°",

  // ë¬´ê¸°/ë„êµ¬ ì¶”ê°€
  ê¶Œì´: "ê¶Œì´",
  ì´: "ê¶Œì´",
  ì¹¼: "ì¹¼",
  ê²€: "ì¹¼",
  ë„ë¼: "ë„ë¼",
  ë§ì¹˜: "ë§ì¹˜",

  // ê³¼ì¼ ì¶”ê°€
  ì‚¬ê³¼: "ì‚¬ê³¼",
  ë°”ë‚˜ë‚˜: "ë°”ë‚˜ë‚˜",
  ì˜¤ë Œì§€: "ì˜¤ë Œì§€",
  ë”¸ê¸°: "ë”¸ê¸°",
  í¬ë„: "í¬ë„",
  ìˆ˜ë°•: "ìˆ˜ë°•",
  íŒŒì¸ì• í”Œ: "íŒŒì¸ì• í”Œ",
  ë³µìˆ­ì•„: "ë³µìˆ­ì•„",
  ì²´ë¦¬: "ì²´ë¦¬",
  ë©œë¡ : "ë©œë¡ ",

  // ì±„ì†Œ ì¶”ê°€
  ë‹¹ê·¼: "ë‹¹ê·¼",
  ê°ì: "ê°ì",
  ì–‘íŒŒ: "ì–‘íŒŒ",
  ë¸Œë¡œì½œë¦¬: "ë¸Œë¡œì½œë¦¬",
  í† ë§ˆí† : "í† ë§ˆí† ",
  ì˜¤ì´: "ì˜¤ì´",
  ê°€ì§€: "ê°€ì§€",
  ë§ˆëŠ˜: "ë§ˆëŠ˜",
  ê³ êµ¬ë§ˆ: "ê³ êµ¬ë§ˆ",
  ìƒì¶”: "ìƒì¶”",

  // ë‚ ì”¨ ê´€ë ¨ í•­ëª© ì¶”ê°€
  íƒœì–‘: "íƒœì–‘",
  í•´: "íƒœì–‘",
  êµ¬ë¦„: "êµ¬ë¦„",
  ë¹„: "ë¹„",
  ëˆˆ: "ëˆˆ",
  ë²ˆê°œ: "ë²ˆê°œ",
  ì•ˆê°œ: "ì•ˆê°œ",
  ë°”ëŒ: "ë°”ëŒ",
  í­í’: "í­í’",
  ìš°ì‚°: "ìš°ì‚°",

  // ì‹ ë°œ/ì˜ë¥˜ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ìš´ë™í™”: "ìš´ë™í™”",
  ì‹ ë°œ: "ì‹ ë°œ",
  êµ¬ë‘: "êµ¬ë‘",
  ì–‘ë§: "ì–‘ë§",
  ì˜·: "ì˜·",
  ì…”ì¸ : "ì…”ì¸ ",
  ë°”ì§€: "ë°”ì§€",
  ì¹˜ë§ˆ: "ì¹˜ë§ˆ",
  ëª¨ì: "ëª¨ì",
  ì¥ê°‘: "ì¥ê°‘",

  // ê°ì • ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì›ƒìŒ: "ì›ƒìŒ",
  ìŠ¬í””: "ìŠ¬í””",
  ë¶„ë…¸: "ë¶„ë…¸",
  í–‰ë³µ: "í–‰ë³µ",
  ì‚¬ë‘: "ì‚¬ë‘",
  ë†€ëŒ: "ë†€ëŒ",
  ê³µí¬: "ê³µí¬",

  // ìŠ¬í”” ê´€ë ¨ ê°ì • í‘œí˜„ ì¶”ê°€
  ëˆˆë¬¼: "ëˆˆë¬¼",
  ìš¸ìŒ: "ëˆˆë¬¼",
  ìš¸ë‹¤: "ëˆˆë¬¼",
  ìš¸ê¸°: "ëˆˆë¬¼",
  ìš°ëŠ”: "ëˆˆë¬¼",
  í‘í‘: "ëˆˆë¬¼",
  ì„œëŸ½ë‹¤: "ëˆˆë¬¼",
  ì„œëŸ¬ì›€: "ëˆˆë¬¼",
  íëŠë¼ë‹¤: "ëˆˆë¬¼",
  íëŠë‚Œ: "ëˆˆë¬¼",
  ëˆˆë¬¼ì§“ë‹¤: "ëˆˆë¬¼",

  // êµí†µ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ìë™ì°¨: "ìë™ì°¨",
  ë²„ìŠ¤: "ë²„ìŠ¤",
  ê¸°ì°¨: "ê¸°ì°¨",
  ë¹„í–‰ê¸°: "ë¹„í–‰ê¸°",
  ë°°: "ë°°",
  ìì „ê±°: "ìì „ê±°",
  ì˜¤í† ë°”ì´: "ì˜¤í† ë°”ì´",
  íƒì‹œ: "íƒì‹œ",

  // ìŒì•… ê´€ë ¨ í•­ëª© ì¶”ê°€
  ë…¸ë˜: "ë…¸ë˜",
  ìŒí‘œ: "ìŒí‘œ",
  ê¸°íƒ€: "ê¸°íƒ€",
  í”¼ì•„ë…¸: "í”¼ì•„ë…¸",
  ë“œëŸ¼: "ë“œëŸ¼",
  ë°”ì´ì˜¬ë¦°: "ë°”ì´ì˜¬ë¦°",

  // ì‹œê°„ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì‹œê³„: "ì‹œê³„",
  ì•ŒëŒ: "ì•ŒëŒ",
  ë‹¬ë ¥: "ë‹¬ë ¥",

  // ì¥ì†Œ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì§‘: "ì§‘",
  ë¹Œë”©: "ë¹Œë”©",
  í˜¸í…”: "í˜¸í…”",
  ë³‘ì›: "ë³‘ì›",
  í•™êµ: "í•™êµ",
  ê³µì¥: "ê³µì¥",
  ì„±: "ì„±",

  // ìƒ‰ìƒ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ë¹¨ê°•: "ë¹¨ê°•",
  ì£¼í™©: "ì£¼í™©",
  ë…¸ë‘: "ë…¸ë‘",
  ì´ˆë¡: "ì´ˆë¡",
  íŒŒë‘: "íŒŒë‘",
  ë³´ë¼: "ë³´ë¼",
  ê²€ì •: "ê²€ì •",
  í•˜ì–‘: "í•˜ì–‘",
  ê°ˆìƒ‰: "ê°ˆìƒ‰",
  ë¬´ì§€ê°œ: "ë¬´ì§€ê°œ",

  // ìì—°í™˜ê²½ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì‚°: "ì‚°",
  ë°”ë‹¤: "ë°”ë‹¤",
  ê°•: "ê°•",
  í˜¸ìˆ˜: "í˜¸ìˆ˜",
  í­í¬: "í­í¬",
  í•´ë³€: "í•´ë³€",
  ìˆ²: "ìˆ²",
  ì„¬: "ì„¬",

  // í•™ìŠµ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì±…: "ì±…",
  ì—°í•„: "ì—°í•„",
  ê³µë¶€: "ê³µë¶€",
  ì‹œí—˜: "ì‹œí—˜",
  ìˆ™ì œ: "ìˆ™ì œ",
  ì¡¸ì—…: "ì¡¸ì—…",
  ìˆ˜ì—…: "ìˆ˜ì—…",

  // í†µì‹  ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì „í™”: "ì „í™”",
  íœ´ëŒ€í°: "íœ´ëŒ€í°",
  ì»´í“¨í„°: "ì»´í“¨í„°",
  ì´ë©”ì¼: "ì´ë©”ì¼",
  í¸ì§€: "í¸ì§€",
  í…”ë ˆë¹„ì „: "í…”ë ˆë¹„ì „",

  // ê±´ê°• ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì‹¬ì¥: "ì‹¬ì¥",
  ì•½: "ì•½",
  ì£¼ì‚¬: "ì£¼ì‚¬",
  ìš´ë™: "ìš´ë™",

  // ìš°ì£¼/ì²œì²´ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì§€êµ¬: "ì§€êµ¬",
  ë‹¬: "ë‹¬",
  íƒœì–‘ê³„: "íƒœì–‘ê³„",
  ìš°ì£¼: "ìš°ì£¼",
  ë³„: "ë³„",
  í–‰ì„±: "í–‰ì„±",
  ì€í•˜: "ì€í•˜",
  í˜œì„±: "í˜œì„±",

  // ë‹¤ì˜ì–´ ê´€ë ¨ ë§¤í•‘ ì¶”ê°€
  ë°°_ê³¼ì¼: "ë°°_ê³¼ì¼",
  ë°°_ì„ ë°•: "ë°°_ì„ ë°•",
  ë°°_ì‹ ì²´: "ë°°_ì‹ ì²´",
  ë°°: "ë°°",

  ë°¤_ì‹œê°„: "ë°¤_ì‹œê°„",
  ë°¤_ì‹í’ˆ: "ë°¤_ì‹í’ˆ",

  ì°¨_ìŒë£Œ: "ì°¨_ìŒë£Œ",
  ì°¨_êµí†µ: "ì°¨_êµí†µ",

  ë‹¤ë¦¬_ì‹ ì²´: "ë‹¤ë¦¬_ì‹ ì²´",
  ë‹¤ë¦¬_êµëŸ‰: "ë‹¤ë¦¬_êµëŸ‰",

  ëˆˆ_ê°ê°: "ëˆˆ_ê°ê°",
  ëˆˆ_ë‚ ì”¨: "ëˆˆ_ë‚ ì”¨",

  ë§_ë™ë¬¼: "ë§_ë™ë¬¼",
  ë§_ì–¸ì–´: "ë§_ì–¸ì–´",

  ì_ì‹ë¬¼: "ì_ì‹ë¬¼",
  ì…_ì‹ ì²´: "ì…_ì‹ ì²´",

  // ì‹ ì²´ ë¶€ìœ„ ì¶”ê°€
  ì–´ê¹¨: "ì–´ê¹¨",
  ì½”: "ì½”",
  ë¬´ë¦: "ë¬´ë¦",
  íŒ”: "íŒ”",
  ì†: "ì†",
  ê·€: "ê·€",
  ëª©: "ëª©",
  ë“±: "ë“±",
  ë¨¸ë¦¬: "ë¨¸ë¦¬",
  ì–¼êµ´: "ì–¼êµ´",
  ì´ë§ˆ: "ì´ë§ˆ",
  ëˆˆì¹: "ëˆˆì¹",
  ëº¨: "ëº¨",
  í„±: "í„±",
  ê°€ìŠ´: "ê°€ìŠ´",
  í—ˆë¦¬: "í—ˆë¦¬",
  ì—‰ë©ì´: "ì—‰ë©ì´",
  ì†ê°€ë½: "ì†ê°€ë½",
  ë°œê°€ë½: "ë°œê°€ë½",
  íŒ”ê¿ˆì¹˜: "íŒ”ê¿ˆì¹˜",
  ë°œëª©: "ë°œëª©",
  ê²¨ë“œë‘ì´: "ê²¨ë“œë‘ì´",
  ì¢…ì•„ë¦¬: "ì¢…ì•„ë¦¬",
  í—ˆë²…ì§€: "í—ˆë²…ì§€",

  // ë‚˜ë¼/êµ­ê°€ ì¶”ê°€
  í•œêµ­: "í•œêµ­",
  ëŒ€í•œë¯¼êµ­: "í•œêµ­",
  ì½”ë¦¬ì•„: "í•œêµ­",
  ë¯¸êµ­: "ë¯¸êµ­",
  ë¯¸í•©ì¤‘êµ­: "ë¯¸êµ­",
  ì•„ë©”ë¦¬ì¹´: "ë¯¸êµ­",
  ì¼ë³¸: "ì¼ë³¸",
  ì¤‘êµ­: "ì¤‘êµ­",
  ì˜êµ­: "ì˜êµ­",
  í”„ë‘ìŠ¤: "í”„ë‘ìŠ¤",
  ë…ì¼: "ë…ì¼",
  ì´íƒˆë¦¬ì•„: "ì´íƒˆë¦¬ì•„",
  ìŠ¤í˜ì¸: "ìŠ¤í˜ì¸",
  ëŸ¬ì‹œì•„: "ëŸ¬ì‹œì•„",
  ìºë‚˜ë‹¤: "ìºë‚˜ë‹¤",
  í˜¸ì£¼: "í˜¸ì£¼",
  ì¸ë„: "ì¸ë„",
  ë¸Œë¼ì§ˆ: "ë¸Œë¼ì§ˆ",
  ë©•ì‹œì½”: "ë©•ì‹œì½”",
  íƒœêµ­: "íƒœêµ­",
  ë² íŠ¸ë‚¨: "ë² íŠ¸ë‚¨",
  ì¸ë„ë„¤ì‹œì•„: "ì¸ë„ë„¤ì‹œì•„",
  ì‹±ê°€í¬ë¥´: "ì‹±ê°€í¬ë¥´",
  í•„ë¦¬í•€: "í•„ë¦¬í•€",
  ë§ë ˆì´ì‹œì•„: "ë§ë ˆì´ì‹œì•„",
};

const wordBasedEmojiMap = {
  // ê¸°ì¡´ ë‹¨ì–´
  // ... existing code ...

  // ì‹ ì²´ ë¶€ìœ„ ì¶”ê°€
  ë°œ: ["ğŸ‘£", "ğŸ‘", "ğŸ§¦", "ğŸƒ", "ğŸ‘Ÿ"],
  ë‹¤ë¦¬: ["ğŸ¦µ", "ğŸ‘–", "ğŸš¶", "ğŸƒ", "ğŸ’ƒ"],
  ë‹¤ë¦¬_ì‹ ì²´: ["ğŸ¦µ", "ğŸ‘–", "ğŸš¶", "ğŸƒ", "ğŸ’ƒ"],
  ì…_ì‹ ì²´: ["ğŸ‘„", "ğŸ‘…", "ğŸ¦·", "ğŸ’‹", "ğŸ—£ï¸"],
  ì–´ê¹¨: ["ğŸ’ª", "ğŸ‘”", "ğŸ‘•", "ğŸ‘¨", "ğŸ‘©"],
  ì½”: ["ğŸ‘ƒ", "ğŸ¤§", "ğŸ˜¤", "ğŸ§ ", "ğŸ‘¨â€âš•ï¸"],
  ë¬´ë¦: ["ğŸ¦µ", "ğŸ§", "ğŸ§â€â™€ï¸", "ğŸ§â€â™‚ï¸", "ğŸƒ"],
  íŒ”: ["ğŸ’ª", "ğŸ¦¾", "ğŸ‘”", "ğŸ‘•", "ğŸ¥Š"],
  ì†: ["ğŸ‘‹", "âœ‹", "ğŸ¤š", "ğŸ–ï¸", "ğŸ«´"],
  ê·€: ["ğŸ‘‚", "ğŸ¦»", "ğŸ§", "ğŸ”Š", "ğŸ‘¨â€ğŸ¦°"],
  ëª©: ["ğŸ‘”", "ğŸ‘•", "ğŸ‘¨", "ğŸ‘©", "ğŸ’‹"],
  ë“±: ["ğŸ‘”", "ğŸ‘•", "ğŸ‘¨", "ğŸ‘©", "ğŸ§"],
  ë¨¸ë¦¬: ["ğŸ‘¦", "ğŸ‘§", "ğŸ‘¨", "ğŸ‘©", "ğŸ§ "],
  ì–¼êµ´: ["ğŸ˜€", "ğŸ˜Š", "ğŸ˜", "ğŸ‘¨", "ğŸ‘©"],
  ì´ë§ˆ: ["ğŸ‘¨", "ğŸ‘©", "ğŸ§ ", "ğŸ¤’", "ğŸ‘¶"],
  ëˆˆì¹: ["ğŸ‘ï¸", "ğŸ‘€", "ğŸ‘¨", "ğŸ‘©", "ğŸ§”"],
  ëº¨: ["ğŸ˜Š", "ğŸ˜—", "ğŸ˜š", "ğŸ‘¨", "ğŸ‘©"],
  í„±: ["ğŸ§”", "ğŸ‘¨", "ğŸ‘©", "ğŸ—£ï¸", "ğŸ’¬"],
  ê°€ìŠ´: ["ğŸ‘•", "ğŸ‘š", "ğŸ‘¨", "ğŸ‘©", "â¤ï¸"],
  í—ˆë¦¬: ["ğŸ‘–", "ğŸ‘—", "ğŸ§", "ğŸ¤¸", "ğŸ’ƒ"],
  ì—‰ë©ì´: ["ğŸ‘", "ğŸ‘–", "ğŸ‘—", "ğŸ§", "ğŸ’ƒ"],
  ì†ê°€ë½: ["ğŸ‘†", "ğŸ‘‡", "ğŸ‘ˆ", "ğŸ‘‰", "ğŸ‘"],
  ë°œê°€ë½: ["ğŸ‘£", "ğŸ¦¶", "ğŸ‘", "ğŸ‘Ÿ", "ğŸ§¦"],
  íŒ”ê¿ˆì¹˜: ["ğŸ’ª", "ğŸ‘”", "ğŸ‘•", "ğŸ¤¸", "ğŸ§"],
  ë°œëª©: ["ğŸ‘£", "ğŸ¦¶", "ğŸ‘", "ğŸ‘Ÿ", "ğŸ§¦"],
  ê²¨ë“œë‘ì´: ["ğŸ‘•", "ğŸ‘š", "ğŸ§", "ğŸ§–", "ğŸ¤¸"],
  ì¢…ì•„ë¦¬: ["ğŸ¦µ", "ğŸ‘–", "ğŸƒ", "ğŸš¶", "ğŸ§"],
  í—ˆë²…ì§€: ["ğŸ¦µ", "ğŸ‘–", "ğŸ§", "ğŸƒ", "ğŸš¶"],

  // êµ¬ì¡°ë¬¼ ì¶”ê°€
  ë‹¤ë¦¬_êµëŸ‰: ["ğŸŒ‰", "ğŸŒ", "ğŸŒ‡", "ğŸï¸", "ğŸš—"],
  ì‚¬ë‹¤ë¦¬: ["ğŸªœ", "ğŸ§—", "ğŸš’", "ğŸ—ï¸", "ğŸ”§"],

  // ë™ë¬¼ ì¶”ê°€
  ì½”ë¼ë¦¬: ["ğŸ˜", "ğŸŒ´", "ğŸ¥œ", "ğŸŒ", "ğŸ¦£"],
  ë¼ì§€: ["ğŸ–", "ğŸ·", "ğŸ¥“", "ğŸ¥©", "ğŸ§ "],
  ë±€: ["ğŸ", "ğŸ‰", "ğŸ¦", "ğŸŒ¿", "ğŸ•ï¸"],
  í† ë¼: ["ğŸ°", "ğŸ‡", "ğŸ¥•", "ğŸŒ±", "ğŸŒ¿"],
  ì‚¬ì: ["ğŸ¦", "ğŸŒ", "ğŸ¦“", "ğŸ…", "ğŸŒ´"],
  í˜¸ë‘ì´: ["ğŸ…", "ğŸ¯", "ğŸŒ³", "ğŸŒ¿", "ğŸ†"],
  ê¸°ë¦°: ["ğŸ¦’", "ğŸŒ´", "ğŸŒ¿", "ğŸŒ±", "ğŸŒ"],
  ì›ìˆ­ì´: ["ğŸ’", "ğŸµ", "ğŸŒ", "ğŸŒ´", "ğŸ¦§"],
  ì½”ì•Œë¼: ["ğŸ¨", "ğŸŒ¿", "ğŸŒ±", "ğŸŒ³", "ğŸ‡¦ğŸ‡º"],
  íŒ¬ë”: ["ğŸ¼", "ğŸ‹", "ğŸŒ¿", "ğŸŒ±", "ğŸ"],
  ê³°: ["ğŸ»", "ğŸ»â€â„ï¸", "ğŸŒ²", "ğŸ¯", "ğŸŒ³"],

  // ë¬´ê¸°/ë„êµ¬ ì¶”ê°€
  ê¶Œì´: ["ğŸ”«", "ğŸ‘®", "ğŸ¯", "ğŸš“", "ğŸš¨"],
  ì¹¼: ["ğŸ”ª", "ğŸ´", "ğŸ”¨", "âš”ï¸", "ğŸ—¡ï¸"],
  ë„ë¼: ["ğŸª“", "ğŸŒ²", "ğŸªµ", "ğŸ•ï¸", "ğŸ”¨"],
  ë§ì¹˜: ["ğŸ”¨", "ğŸ› ï¸", "ğŸª›", "ğŸ”§", "âš’ï¸"],

  // ìŒì‹ ì¶”ê°€
  í”¼ì: ["ğŸ•", "ğŸ§€", "ğŸ…", "ğŸ", "ğŸ½ï¸"],

  // ê¸°íƒ€ ì¶”ê°€
  í”¼: ["ğŸ©¸", "ğŸ’‰", "ğŸ©¹", "ğŸ¥", "â¤ï¸"],

  // ì§ì—… ê´€ë ¨ ì¶”ê°€
  ì˜ì‚¬: ["ğŸ‘¨â€âš•ï¸", "ğŸ‘©â€âš•ï¸", "ğŸ’‰", "ğŸ©º", "ğŸ’Š"],
  ê°„í˜¸ì‚¬: ["ğŸ‘¨â€âš•ï¸", "ğŸ‘©â€âš•ï¸", "ğŸ’‰", "ğŸ¥", "ğŸŒ¡ï¸"],
  ê²½ì°°: ["ğŸ‘®", "ğŸ‘®â€â™€ï¸", "ğŸš“", "ğŸš¨", "ğŸ”«"],
  ì†Œë°©ê´€: ["ğŸ‘¨â€ğŸš’", "ğŸ‘©â€ğŸš’", "ğŸš’", "ğŸ§¯", "ğŸ”¥"],
  ì†Œë°©ì°¨: ["ğŸš’", "ğŸ§¯", "ğŸš¨", "ğŸ‘¨â€ğŸš’", "ğŸ”¥"],
  ì„ ìƒë‹˜: ["ğŸ‘¨â€ğŸ«", "ğŸ‘©â€ğŸ«", "ğŸ“š", "ğŸ«", "ğŸ“"],
  êµ°ì¸: ["ğŸ’‚", "ğŸª–", "ğŸ–ï¸", "ğŸª‚", "ğŸ›¡ï¸"],
  ìš”ë¦¬ì‚¬: ["ğŸ‘¨â€ğŸ³", "ğŸ‘©â€ğŸ³", "ğŸ²", "ğŸ”ª", "ğŸ´"],
  ì—”ì§€ë‹ˆì–´: ["ğŸ‘¨â€ğŸ’»", "ğŸ‘©â€ğŸ’»", "ğŸ”§", "âš™ï¸", "ğŸ› ï¸"],
  ê³¼í•™ì: ["ğŸ‘¨â€ğŸ”¬", "ğŸ‘©â€ğŸ”¬", "ğŸ”¬", "ğŸ§ª", "âš—ï¸"],
  ë†ë¶€: ["ğŸ‘¨â€ğŸŒ¾", "ğŸ‘©â€ğŸŒ¾", "ğŸŒ±", "ğŸšœ", "ğŸŒ¾"],
  ì–´ë¶€: ["ğŸ£", "ğŸŸ", "ğŸŒŠ", "ğŸ›¥ï¸", "ğŸ¦‘"],

  // ì¥ì†Œ ê´€ë ¨ ì¶”ê°€
  ë³‘ì›: ["ğŸ¥", "ğŸ‘¨â€âš•ï¸", "ğŸ’‰", "ğŸ©º", "ğŸ’Š"],
  í•™êµ: ["ğŸ«", "ğŸ‘¨â€ğŸ«", "ğŸ‘©â€ğŸ“", "ğŸ“š", "ğŸ’"],
  ê²½ì°°ì„œ: ["ğŸ¢", "ğŸ‘®", "ğŸš“", "ğŸš¨", "ğŸ”«"],
  ì†Œë°©ì„œ: ["ğŸ¢", "ğŸ‘¨â€ğŸš’", "ğŸš’", "ğŸ§¯", "ğŸ”¥"],
  ë„ì„œê´€: ["ğŸ“š", "ğŸ”", "ğŸ“–", "ğŸ§ ", "ğŸ›ï¸"],
  ë°•ë¬¼ê´€: ["ğŸ›ï¸", "ğŸ–¼ï¸", "ğŸ—¿", "ğŸº", "ğŸ¦–"],
  ìˆ˜ì˜ì¥: ["ğŸŠ", "ğŸŠâ€â™€ï¸", "ğŸŠâ€â™‚ï¸", "ğŸ’¦", "ğŸ©±"],
  ì²´ìœ¡ê´€: ["ğŸ‹ï¸", "ğŸ‹ï¸â€â™€ï¸", "ğŸ’ª", "ğŸƒ", "ğŸ¤¸"],
  ê³µì›: ["ğŸŒ³", "ğŸŒ²", "ğŸŒ¸", "ğŸï¸", "ğŸª‚"],
  ë†€ì´í„°: ["ğŸ¡", "ğŸ¢", "ğŸ ", "ğŸ›", "ğŸŒï¸"],
  ìŒì‹ì : ["ğŸ½ï¸", "ğŸ´", "ğŸ•", "ğŸ", "ğŸœ"],
  ì¹´í˜: ["â˜•", "ğŸ°", "ğŸ§", "ğŸ§", "ğŸ¥"],

  // ê³¼ì¼ ì¶”ê°€
  ì‚¬ê³¼: ["ğŸ", "ğŸ", "ğŸ“", "ğŸ¥§", "ğŸ§ƒ"],
  ë°”ë‚˜ë‚˜: ["ğŸŒ", "ğŸ’", "ğŸ¥­", "ğŸ¨", "ğŸ¥¤"],
  ì˜¤ë Œì§€: ["ğŸŠ", "ğŸ§ƒ", "ğŸ¥­", "ğŸ¹", "ğŸŸ "],
  ë”¸ê¸°: ["ğŸ“", "ğŸ°", "ğŸ¥›", "ğŸ§", "ğŸ§"],
  í¬ë„: ["ğŸ‡", "ğŸ·", "ğŸ§ƒ", "ğŸ¨", "ğŸ°"],
  ìˆ˜ë°•: ["ğŸ‰", "ğŸ¥¤", "ğŸ§", "ğŸ¨", "ğŸ–ï¸"],
  íŒŒì¸ì• í”Œ: ["ğŸ", "ğŸ¥­", "ğŸ¹", "ğŸï¸", "ğŸ¥¥"],
  ë³µìˆ­ì•„: ["ğŸ‘", "ğŸ¦", "ğŸ°", "ğŸ§", "ğŸ¥¤"],
  ì²´ë¦¬: ["ğŸ’", "ğŸ°", "ğŸ§", "ğŸ§", "ğŸ¨"],
  ë©œë¡ : ["ğŸˆ", "ğŸ¦", "ğŸ¥¤", "ğŸ§", "ğŸ¨"],

  // ì±„ì†Œ ì¶”ê°€
  ë‹¹ê·¼: ["ğŸ¥•", "ğŸ°", "ğŸ¥—", "ğŸ²", "ğŸ§†"],
  ê°ì: ["ğŸ¥”", "ğŸŸ", "ğŸ ", "ğŸ¥˜", "ğŸ²"],
  ì–‘íŒŒ: ["ğŸ§…", "ğŸ²", "ğŸ¥˜", "ğŸœ", "ğŸ§„"],
  ë¸Œë¡œì½œë¦¬: ["ğŸ¥¦", "ğŸ¥—", "ğŸ²", "ğŸ¥¬", "ğŸœ"],
  í† ë§ˆí† : ["ğŸ…", "ğŸ¥«", "ğŸ", "ğŸ•", "ğŸ¥—"],
  ì˜¤ì´: ["ğŸ¥’", "ğŸ¥—", "ğŸ¥™", "ğŸ¥ª", "ğŸ¹"],
  ê°€ì§€: ["ğŸ†", "ğŸ²", "ğŸ¥˜", "ğŸ¥—", "ğŸ"],
  ë§ˆëŠ˜: ["ğŸ§„", "ğŸ", "ğŸ¥˜", "ğŸ²", "ğŸ•"],
  ê³ êµ¬ë§ˆ: ["ğŸ ", "ğŸ²", "ğŸ¥˜", "ğŸœ", "ğŸ¥”"],
  ìƒì¶”: ["ğŸ¥¬", "ğŸ¥—", "ğŸ¥™", "ğŸŒ¿", "ğŸ¥ª"],

  // ë‚ ì”¨ ê´€ë ¨ í•­ëª© ì¶”ê°€
  íƒœì–‘: ["â˜€ï¸", "ğŸŒ", "ğŸŒ…", "ğŸŒ„", "ğŸ”†"],
  êµ¬ë¦„: ["â˜ï¸", "â›…", "ğŸŒ¥ï¸", "ğŸŒ¤ï¸", "ğŸŒ¦ï¸"],
  ë¹„: ["ğŸŒ§ï¸", "â˜”", "â›ˆï¸", "ğŸŒ‚", "ğŸ’§"],
  ëˆˆ: ["â„ï¸", "â˜ƒï¸", "â›„", "ğŸŒ¨ï¸", "ğŸ‚"],
  ë²ˆê°œ: ["âš¡", "ğŸŒ©ï¸", "â›ˆï¸", "ğŸ”Œ", "âš¡"],
  ì•ˆê°œ: ["ğŸŒ«ï¸", "ğŸ’¨", "ğŸŒ", "ğŸŒ«ï¸", "â˜ï¸"],
  ë°”ëŒ: ["ğŸ’¨", "ğŸŒªï¸", "ğŸŒ¬ï¸", "ğŸƒ", "ğŸï¸"],
  í­í’: ["ğŸŒªï¸", "â›ˆï¸", "ğŸŒŠ", "ğŸŒ©ï¸", "ğŸ’¥"],
  ìš°ì‚°: ["â˜‚ï¸", "â˜”", "ğŸŒ‚", "ğŸ–ï¸", "ğŸ’§"],

  // ì‹ ë°œ/ì˜ë¥˜ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ìš´ë™í™”: ["ğŸ‘Ÿ", "ğŸ‘", "ğŸ‘£", "ğŸƒ", "ğŸ‹ï¸"],
  ì‹ ë°œ: ["ğŸ‘", "ğŸ‘ ", "ğŸ‘¡", "ğŸ‘¢", "ğŸ‘£"],
  êµ¬ë‘: ["ğŸ‘", "ğŸ‘ ", "ï¿½ï¿½", "ğŸ•´ï¸", "ğŸ‘¨â€ğŸ’¼"],
  ì–‘ë§: ["ğŸ§¦", "ğŸ‘£", "ğŸ‘•", "ğŸ‘–", "ğŸ§¶"],
  ì˜·: ["ğŸ‘•", "ğŸ‘š", "ğŸ‘—", "ğŸ‘”", "ğŸ‘–"],
  ì…”ì¸ : ["ğŸ‘•", "ğŸ‘š", "ğŸ‘”", "ğŸ§µ", "ğŸ›ï¸"],
  ë°”ì§€: ["ğŸ‘–", "ğŸ‘•", "ğŸ‘”", "ğŸ§µ", "ğŸ§¶"],
  ì¹˜ë§ˆ: ["ğŸ‘—", "ğŸ‘š", "ğŸ‘¢", "ğŸ‘ ", "ğŸ’ƒ"],
  ëª¨ì: ["ğŸ§¢", "ğŸ‘’", "ğŸ©", "â›‘ï¸", "ğŸ‘‘"],
  ì¥ê°‘: ["ğŸ§¤", "ğŸ§£", "ğŸ§¦", "â„ï¸", "â›·ï¸"],

  // ê°ì • ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì›ƒìŒ: ["ğŸ˜€", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜", "ğŸ¤£"],
  ìŠ¬í””: ["ğŸ˜¢", "ğŸ˜­", "ğŸ˜", "ğŸ˜”", "ğŸ˜¥"],
  ë¶„ë…¸: ["ğŸ˜¡", "ğŸ¤¬", "ğŸ‘¿", "ğŸ˜ ", "ğŸ’¢"],
  í–‰ë³µ: ["ğŸ˜Š", "ğŸ¥°", "ğŸ˜", "ğŸ˜Œ", "ğŸ¤—"],
  ì‚¬ë‘: ["â¤ï¸", "ğŸ’•", "ğŸ’˜", "ğŸ¥°", "ğŸ˜"],
  ë†€ëŒ: ["ğŸ˜²", "ğŸ˜®", "ğŸ˜¯", "ğŸ˜±", "ğŸ˜³"],
  ê³µí¬: ["ğŸ˜±", "ğŸ˜¨", "ğŸ˜°", "ğŸ‘»", "ğŸ™€"],

  // ìŠ¬í”” ê´€ë ¨ ê°ì • í‘œí˜„ ì¶”ê°€
  ëˆˆë¬¼: ["ğŸ˜­", "ğŸ˜¢", "ğŸ¥²", "ğŸ˜ª", "ğŸ’§"],
  ìš¸ìŒ: ["ğŸ˜­", "ğŸ˜¢", "ğŸ¥²", "ğŸ˜ª", "ğŸ’§"],
  ìš¸ë‹¤: ["ğŸ˜­", "ğŸ˜¢", "ğŸ¥²", "ğŸ˜ª", "ğŸ’§"],
  ìš¸ê¸°: ["ğŸ˜­", "ğŸ˜¢", "ğŸ¥²", "ğŸ˜ª", "ğŸ’§"],
  ìš°ëŠ”: ["ğŸ˜­", "ğŸ˜¢", "ğŸ¥²", "ğŸ˜ª", "ğŸ’§"],
  í‘í‘: ["ğŸ˜­", "ğŸ˜¢", "ğŸ¥²", "ğŸ˜ª", "ğŸ’§"],
  ì„œëŸ½ë‹¤: ["ğŸ˜­", "ğŸ˜¢", "ğŸ¥²", "ğŸ˜ª", "ğŸ’§"],
  ì„œëŸ¬ì›€: ["ğŸ˜­", "ğŸ˜¢", "ğŸ¥²", "ğŸ˜ª", "ğŸ’§"],
  íëŠë¼ë‹¤: ["ğŸ˜­", "ğŸ˜¢", "ğŸ¥²", "ğŸ˜ª", "ğŸ’§"],
  íëŠë‚Œ: ["ğŸ˜­", "ğŸ˜¢", "ğŸ¥²", "ğŸ˜ª", "ğŸ’§"],
  ëˆˆë¬¼ì§“ë‹¤: ["ğŸ˜­", "ğŸ˜¢", "ğŸ¥²", "ğŸ˜ª", "ğŸ’§"],

  // êµí†µ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ìë™ì°¨: ["ğŸš—", "ğŸš™", "ğŸš˜", "ğŸï¸", "ğŸ›£ï¸"],
  ë²„ìŠ¤: ["ğŸšŒ", "ğŸš", "ğŸš", "ğŸš", "ğŸ—ºï¸"],
  ê¸°ì°¨: ["ğŸš‚", "ğŸš„", "ğŸš…", "ğŸš‰", "ğŸ›¤ï¸"],
  ë¹„í–‰ê¸°: ["âœˆï¸", "ğŸ›©ï¸", "ğŸ›«", "ğŸ›¬", "ğŸŒ¤ï¸"],
  ë°°: ["ğŸš¢", "â›´ï¸", "ğŸ›³ï¸", "âš“", "ğŸŒŠ"],
  ìì „ê±°: ["ğŸš²", "ğŸšµ", "ğŸš´", "ğŸ›µ", "ğŸï¸"],
  ì˜¤í† ë°”ì´: ["ğŸï¸", "ğŸ›µ", "ğŸš²", "ğŸ›£ï¸", "ğŸï¸"],
  íƒì‹œ: ["ğŸš•", "ğŸš–", "ğŸš—", "ğŸš‡", "ğŸš"],

  // ìŒì•… ê´€ë ¨ í•­ëª© ì¶”ê°€
  ë…¸ë˜: ["ğŸµ", "ğŸ¶", "ğŸ¤", "ğŸ™ï¸", "ğŸ¸"],
  ìŒí‘œ: ["ğŸµ", "ğŸ¶", "ğŸ¼", "ğŸ¹", "ğŸ·"],
  ê¸°íƒ€: ["ğŸ¸", "ğŸµ", "ğŸ¶", "ğŸ¤", "ğŸ¼"],
  í”¼ì•„ë…¸: ["ğŸ¹", "ğŸµ", "ğŸ¶", "ğŸ¼", "ğŸ»"],
  ë“œëŸ¼: ["ğŸ¥", "ğŸµ", "ğŸ¶", "ğŸ¸", "ğŸ¤"],
  ë°”ì´ì˜¬ë¦°: ["ğŸ»", "ğŸµ", "ğŸ¶", "ğŸ¼", "ğŸ¹"],

  // ì‹œê°„ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì‹œê³„: ["â°", "âŒš", "â±ï¸", "â²ï¸", "ğŸ•°ï¸"],
  ì•ŒëŒ: ["â°", "â±ï¸", "â²ï¸", "âŒš", "ğŸ””"],
  ë‹¬ë ¥: ["ğŸ“…", "ğŸ“†", "ğŸ—“ï¸", "ğŸ“‹", "ğŸ“…"],

  // ìƒ‰ìƒ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ë¹¨ê°•: ["ğŸ”´", "â¤ï¸", "ğŸ", "ğŸŒ¹", "ğŸ§§"],
  ì£¼í™©: ["ğŸŸ ", "ğŸŠ", "ğŸ”¶", "ğŸŸ§", "ğŸ¦Š"],
  ë…¸ë‘: ["ğŸŸ¡", "ğŸŒ•", "ğŸŒŸ", "ğŸ‹", "ğŸ’›"],
  ì´ˆë¡: ["ğŸŸ¢", "ğŸŒ¿", "ğŸ€", "ğŸ¥", "ğŸ¥¬"],
  íŒŒë‘: ["ğŸ”µ", "ğŸŒŠ", "ğŸ’™", "ğŸ¦‹", "ğŸ§¢"],
  ë³´ë¼: ["ğŸŸ£", "ğŸ’œ", "ğŸ‡", "ğŸ†", "ğŸª€"],
  ê²€ì •: ["âš«", "â¬›", "â—¼ï¸", "â–ªï¸", "ğŸ´"],
  í•˜ì–‘: ["âšª", "â¬œ", "â—»ï¸", "â–«ï¸", "ğŸ¤"],
  ê°ˆìƒ‰: ["ğŸŸ¤", "ğŸ‚", "ğŸ§¸", "ğŸŒ°", "ğŸ¦“"],
  ë¬´ì§€ê°œ: ["ğŸŒˆ", "ğŸ³ï¸â€ğŸŒˆ", "ğŸ”„", "ğŸ¨", "ğŸ¦„"],

  // ìì—°í™˜ê²½ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì‚°: ["â›°ï¸", "ğŸ”ï¸", "ğŸŒ„", "ğŸ§—", "ğŸï¸"],
  ë°”ë‹¤: ["ğŸŒŠ", "ğŸ–ï¸", "ğŸï¸", "ğŸ™", "ğŸ "],
  ê°•: ["ğŸï¸", "ğŸŒŠ", "ğŸš£", "ğŸ£", "â›µ"],
  í˜¸ìˆ˜: ["ğŸï¸", "ğŸ’¦", "ğŸš£", "â›µ", "ğŸ£"],
  í­í¬: ["ğŸ’¦", "ğŸï¸", "â›°ï¸", "ğŸ”ï¸", "ğŸ’§"],
  í•´ë³€: ["ğŸ–ï¸", "ğŸŒŠ", "ğŸï¸", "â˜€ï¸", "ğŸ„"],
  ìˆ²: ["ğŸŒ²", "ğŸŒ³", "ğŸ„", "ğŸ¦Œ", "ğŸï¸"],
  ì„¬: ["ğŸï¸", "ğŸŒ´", "ğŸŒŠ", "ğŸ–ï¸", "ğŸ—¿"],

  // í•™ìŠµ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì±…: ["ğŸ“š", "ğŸ“–", "ğŸ“•", "ğŸ“—", "ğŸ“˜"],
  ì—°í•„: ["âœï¸", "ğŸ–Šï¸", "ğŸ“", "ğŸ–Œï¸", "ğŸ”"],
  ê³µë¶€: ["ğŸ“š", "âœï¸", "ğŸ”", "ğŸ§ ", "ğŸ“"],
  ì‹œí—˜: ["ğŸ“", "âœï¸", "ğŸ“š", "ğŸ§ ", "ğŸ“"],
  ìˆ™ì œ: ["ğŸ“", "ğŸ“š", "âœï¸", "ğŸ ", "ğŸ““"],
  ì¡¸ì—…: ["ğŸ“", "ğŸ“œ", "ğŸ«", "ğŸ‘¨â€ğŸ“", "ğŸ‘©â€ğŸ“"],
  ìˆ˜ì—…: ["ğŸ‘¨â€ğŸ«", "ğŸ‘©â€ğŸ«", "ğŸ“š", "ğŸ«", "ğŸ“"],

  // í†µì‹  ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì „í™”: ["ğŸ“", "â˜ï¸", "ğŸ“±", "ğŸ“²", "ğŸ”Š"],
  íœ´ëŒ€í°: ["ğŸ“±", "ğŸ“²", "ğŸ“", "ğŸ’¬", "ğŸ”‹"],
  ì»´í“¨í„°: ["ğŸ’»", "âŒ¨ï¸", "ğŸ–±ï¸", "ğŸ–¥ï¸", "ğŸ“Š"],
  ì´ë©”ì¼: ["ğŸ“§", "ğŸ“¨", "ğŸ“¤", "ğŸ“¥", "ğŸ’»"],
  í¸ì§€: ["âœ‰ï¸", "ğŸ“¨", "ğŸ“©", "ğŸ“®", "ğŸ“„"],
  í…”ë ˆë¹„ì „: ["ğŸ“º", "ğŸ®", "ğŸ“¡", "ğŸ¬", "ğŸ¿"],

  // ê±´ê°• ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì‹¬ì¥: ["â¤ï¸", "ğŸ’“", "ğŸ’—", "ğŸ’–", "ğŸ’˜"],
  ì•½: ["ğŸ’Š", "ğŸ’‰", "ğŸ¥", "ğŸ‘¨â€âš•ï¸", "ğŸ‘©â€âš•ï¸"],
  ì£¼ì‚¬: ["ğŸ’‰", "ğŸ’Š", "ğŸ©¸", "ğŸ¥", "ğŸ‘¨â€âš•ï¸"],
  ìš´ë™: ["ğŸƒ", "ğŸ‹ï¸", "ğŸ‹ï¸", "ğŸŠ", "âš½"],

  // ìš°ì£¼/ì²œì²´ ê´€ë ¨ í•­ëª© ì¶”ê°€
  ì§€êµ¬: ["ğŸŒ", "ğŸŒ", "ğŸŒ", "ğŸŒ", "ğŸª"],
  ë‹¬: ["ğŸŒ™", "ğŸŒ›", "ğŸŒœ", "ğŸŒ", "ğŸŒš"],
  íƒœì–‘ê³„: ["â˜€ï¸", "ğŸŒ", "ğŸŒ™", "â­", "ğŸª"],
  ìš°ì£¼: ["ğŸŒŒ", "âœ¨", "ğŸš€", "ğŸ‘¨â€ğŸš€", "ğŸ›°ï¸"],
  ë³„: ["â­", "ğŸŒŸ", "âœ¨", "ğŸ’«", "ğŸŒ "],
  í–‰ì„±: ["ğŸª", "ğŸŒ", "ğŸŒ", "ğŸŒ", "ğŸŒŒ"],
  ì€í•˜: ["ğŸŒŒ", "âœ¨", "ğŸ’«", "ğŸŒŸ", "ğŸ”­"],
  í˜œì„±: ["â˜„ï¸", "ğŸŒ ", "ğŸ’«", "ğŸŒŒ", "âœ¨"],

  // ë‹¤ì˜ì–´ ê´€ë ¨ ì´ëª¨ì§€ ì¶”ê°€
  ë°°_ê³¼ì¼: ["ğŸ", "ğŸ", "ğŸ¥­", "ğŸ", "ğŸ¥"],
  ë°°_ì„ ë°•: ["ğŸš¢", "â›´ï¸", "ğŸ›³ï¸", "âš“", "ğŸŒŠ"],
  ë°°_ì‹ ì²´: ["ğŸ¤°", "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§", "ğŸ‘š", "ğŸ‘¨â€ğŸ‘©â€ï¿½ï¿½", "ğŸ’ƒ"],
  ë°°: ["ğŸ", "ğŸš¢", "ğŸ¤°", "â›´ï¸", "ğŸ›³ï¸", "ğŸ", "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§", "âš“", "ğŸŒŠ"],

  ë°¤_ì‹œê°„: ["ğŸŒ™", "ğŸŒ›", "ğŸŒœ", "ğŸŒš", "ğŸŒƒ"],
  ë°¤_ì‹í’ˆ: ["ğŸŒ°", "ğŸ¥œ", "ğŸ‚", "ğŸ", "ğŸ"],

  ì°¨_ìŒë£Œ: ["â˜•", "ğŸµ", "ğŸ«–", "ğŸ¶", "ğŸ¥¤"],
  ì°¨_êµí†µ: ["ğŸš—", "ğŸš™", "ğŸš•", "ğŸš“", "ğŸšŒ"],

  ë‹¤ë¦¬_ì‹ ì²´: ["ğŸ¦µ", "ğŸ‘–", "ğŸš¶", "ğŸƒ", "ğŸ’ƒ"],
  ë‹¤ë¦¬_êµëŸ‰: ["ğŸŒ‰", "ğŸŒ", "ğŸŒ‡", "ğŸï¸", "ğŸš—"],

  ëˆˆ_ê°ê°: ["ğŸ‘ï¸", "ğŸ‘€", "ğŸ‘“", "ğŸ”", "ğŸ‘ï¸â€ğŸ—¨ï¸"],
  ëˆˆ_ë‚ ì”¨: ["â„ï¸", "â˜ƒï¸", "â›„", "ğŸŒ¨ï¸", "ğŸ‚"],

  ë§_ë™ë¬¼: ["ğŸ´", "ğŸ", "ğŸ‡", "ğŸŒ¾", "ğŸï¸"],
  ë§_ì–¸ì–´: ["ğŸ’¬", "ğŸ—£ï¸", "ğŸ‘„", "ğŸ”Š", "ğŸ“¢"],

  ì_ì‹ë¬¼: ["ğŸƒ", "ğŸ‚", "ğŸŒ¿", "ğŸŒ±", "ğŸ"],
  ì…_ì‹ ì²´: ["ğŸ‘„", "ğŸ‘…", "ğŸ¦·", "ğŸ’‹", "ğŸ—£ï¸"],

  // ë‚˜ë¼/êµ­ê°€ ì¶”ê°€ (êµ­ê¸° ì´ëª¨ì§€ ëŒ€ì²´)
  í•œêµ­: ["ğŸ­", "ğŸ²", "ğŸ›ï¸", "ğŸ¥»", "â˜¯ï¸"],
  ë¯¸êµ­: ["ğŸ—½", "ğŸ¦…", "ğŸˆ", "ğŸ”", "ğŸ™ï¸"],
  ì¼ë³¸: ["ğŸŒ¸", "ğŸ£", "ğŸ—¾", "ğŸ¯", "â›©ï¸"],
  ì¤‘êµ­: ["ğŸ‰", "ğŸ§§", "ğŸ¥¢", "ğŸ®", "ğŸ¼"],
  ì˜êµ­: ["ğŸ°", "ğŸšŒ", "â˜•", "ğŸ‘‘", "ğŸ§¸"],
  í”„ë‘ìŠ¤: ["ğŸ—¼", "ğŸ¥–", "ğŸ§€", "ğŸ·", "ğŸ¨"],
  ë…ì¼: ["ğŸº", "ğŸ¥¨", "ğŸ°", "ğŸš—", "âš½"],
  ì´íƒˆë¦¬ì•„: ["ğŸ•", "ğŸ", "ğŸ›ï¸", "ğŸ·", "ğŸš¤"],
  ìŠ¤í˜ì¸: ["ğŸ’ƒ", "ğŸ¥˜", "ğŸ°", "ğŸ‚", "ğŸ–ï¸"],
  ëŸ¬ì‹œì•„: ["ğŸ°", "â„ï¸", "ğŸ»", "â›ª", "ğŸ¥¶"],
  ìºë‚˜ë‹¤: ["ğŸ", "ğŸï¸", "ğŸ»", "â„ï¸", "ğŸ’"],
  í˜¸ì£¼: ["ğŸ¦˜", "ğŸ¨", "ğŸ„", "ğŸ–ï¸", "ğŸ‰"],
  ì¸ë„: ["ğŸ•‰ï¸", "ğŸ›", "ğŸ˜", "ğŸ", "ğŸ¯"],
  ë¸Œë¼ì§ˆ: ["âš½", "ğŸ–ï¸", "ğŸï¸", "ğŸ­", "ğŸŒ´"],
  ë©•ì‹œì½”: ["ğŸŒ®", "ğŸŒµ", "ğŸ¸", "ğŸœï¸", "ğŸ­"],
  íƒœêµ­: ["ğŸœ", "ğŸ–ï¸", "ğŸ˜", "ğŸ›•", "ğŸï¸"],
  ë² íŠ¸ë‚¨: ["ğŸœ", "ğŸŒ¿", "ğŸ›–", "ğŸ‹", "ğŸŒ´"],
  ì¸ë„ë„¤ì‹œì•„: ["ğŸï¸", "ğŸŒ‹", "ğŸ•Œ", "ğŸ„", "ğŸŒ´"],
  ì‹±ê°€í¬ë¥´: ["ğŸ¦", "ğŸ™ï¸", "ğŸš¢", "ğŸŒ†", "ğŸœ"],
  í•„ë¦¬í•€: ["ğŸï¸", "ğŸŒŠ", "ğŸ„", "â›ª", "ğŸ¥¥"],
  ë§ë ˆì´ì‹œì•„: ["ğŸ™ï¸", "ğŸ•Œ", "ğŸŒ´", "ğŸ¯", "ğŸŒŠ"],
};

export async function initAddHangul() {
  const closeModalBtn = document.getElementById("close-modal");
  const hangulInput = document.getElementById("hangul-input");
  const pronunciationInput = document.getElementById("pronunciation-input");
  const meaningInput = document.getElementById("meaning-input");
  const descriptionInput = document.getElementById("description-input");
  const emojiOptions = document.getElementById("emoji-options");
  const imageInput = document.getElementById("image-input");
  const saveHangulBtn = document.getElementById("add-hangul");

  // ì´ëª¨ì§€ ë©”ì‹œì§€ ìš”ì†ŒëŠ” ë”ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì£¼ì„ ì²˜ë¦¬
  // let emojiMessage = document.getElementById("emoji-message");
  // if (!emojiMessage) {
  //   emojiMessage = document.createElement("div");
  //   emojiMessage.id = "emoji-message";
  //   emojiMessage.className = "mt-2 text-yellow-600 text-sm hidden";
  //   emojiOptions.parentNode.insertBefore(emojiMessage, emojiOptions);
  // }

  if (closeModalBtn) {
    closeModalBtn.addEventListener("click", () => {
      closeModal();
      resetForm();
    });
  }

  if (hangulInput) {
    hangulInput.addEventListener("input", async (e) => {
      const hangul = e.target.value.trim();
      if (hangul) {
        try {
          // ì „ì²´ í•œê¸€ì— ëŒ€í•œ ë°œìŒ ìë™ ìƒì„±
          pronunciationInput.value = getFullPronunciation(hangul);

          // ì´ëª¨ì§€ ì˜µì…˜ ìƒì„±
          emojiOptions.innerHTML = "";
          // ì „ì²´ ì…ë ¥ëœ ë¬¸ìì—´ë¡œ ì´ëª¨ì§€ ìƒì„±
          const emojis = generateEmojisForHangul(hangul);

          emojis.forEach((emoji) => {
            const emojiButton = document.createElement("button");
            emojiButton.className = "p-2 text-3xl hover:bg-gray-100 rounded-lg";
            emojiButton.textContent = emoji;
            emojiButton.addEventListener("click", () => {
              // ì´ì „ì— ì„ íƒëœ ë²„íŠ¼ì˜ ìŠ¤íƒ€ì¼ ì œê±°
              document
                .querySelectorAll("#emoji-options button")
                .forEach((btn) => {
                  btn.classList.remove(
                    "bg-blue-100",
                    "border",
                    "border-blue-500"
                  );
                });

              // í˜„ì¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì ìš©
              emojiButton.classList.add(
                "bg-blue-100",
                "border",
                "border-blue-500"
              );
              imageInput.value = emoji;
            });
            emojiOptions.appendChild(emojiButton);
          });

          // ê¸°ë³¸ ì²« ë²ˆì§¸ ì´ëª¨ì§€ ì„ íƒ
          if (emojis.length > 0) {
            emojiOptions.firstChild.click();
          }
        } catch (error) {
          console.error("í•œê¸€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ", error);
        }
      } else {
        pronunciationInput.value = "";
        emojiOptions.innerHTML = "";
        imageInput.value = "";
      }
    });
  }

  if (saveHangulBtn) {
    saveHangulBtn.addEventListener("click", async () => {
      if (!validateForm()) {
        alert("ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }

      try {
        const userEmail = auth.currentUser.email;
        if (!userEmail) {
          alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
          return;
        }

        const userRef = doc(db, "users", userEmail);
        const userSnap = await getDoc(userRef);

        if (!userSnap.exists()) {
          alert("ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
          return;
        }

        const userData = userSnap.data();
        if (userData.wordCount >= userData.maxWordCount) {
          alert(
            `ìµœëŒ€ í•œê¸€ ì¶”ê°€ ê°œìˆ˜ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. (ìµœëŒ€: ${userData.maxWordCount}ê°œ)`
          );
          return;
        }

        const hangul = hangulInput.value.trim();
        const pronunciation = pronunciationInput.value.trim();
        const meaning = meaningInput.value.trim();
        const description = descriptionInput.value.trim();
        const image = imageInput.value.trim();

        // ë‹¨ì–´ ì¶”ê°€
        const wordlistRef = doc(db, "wordlist", userEmail, "wordlist", hangul);
        await setDoc(wordlistRef, {
          hangul: hangul,
          pronunciation: pronunciation,
          meaning: meaning,
          description: description,
          image: image,
          createdAt: new Date().toISOString(),
        });

        // ì‚¬ìš©ì ë‹¨ì–´ ìˆ˜ ì¦ê°€
        await updateDoc(userRef, {
          wordCount: userData.wordCount + 1,
        });

        alert("í•œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.");

        // ëª¨ë‹¬ ë‹«ê¸° ë° í¼ ì´ˆê¸°í™”
        closeModal();
        resetForm();

        // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ (ë‹¨ì–´ ëª©ë¡ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´)
        window.location.reload();
      } catch (error) {
        console.error("í•œê¸€ ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ", error);
        alert("í•œê¸€ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
      }
    });
  }
}

// í¼ ìœ íš¨ì„± ê²€ì‚¬ í•¨ìˆ˜
function validateForm() {
  const hangulInput = document.getElementById("hangul-input");
  const pronunciationInput = document.getElementById("pronunciation-input");
  const meaningInput = document.getElementById("meaning-input");
  const descriptionInput = document.getElementById("description-input");
  const imageInput = document.getElementById("image-input");

  return (
    hangulInput.value.trim() !== "" &&
    pronunciationInput.value.trim() !== "" &&
    meaningInput.value.trim() !== "" &&
    descriptionInput.value.trim() !== "" &&
    imageInput.value.trim() !== ""
  );
}

// ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜
function closeModal() {
  const modal = document.getElementById("add-hangul-modal");
  if (modal) {
    modal.classList.add("hidden");
  }
}

// í¼ ì´ˆê¸°í™” í•¨ìˆ˜
function resetForm() {
  const hangulInput = document.getElementById("hangul-input");
  const pronunciationInput = document.getElementById("pronunciation-input");
  const meaningInput = document.getElementById("meaning-input");
  const descriptionInput = document.getElementById("description-input");
  const emojiOptions = document.getElementById("emoji-options");
  const imageInput = document.getElementById("image-input");

  if (hangulInput) hangulInput.value = "";
  if (pronunciationInput) pronunciationInput.value = "";
  if (meaningInput) meaningInput.value = "";
  if (descriptionInput) descriptionInput.value = "";
  if (emojiOptions) emojiOptions.innerHTML = "";
  if (imageInput) imageInput.value = "";
}

// í•œê¸€ì— í•´ë‹¹í•˜ëŠ” ì´ëª¨ì§€ ëª©ë¡ ìƒì„±
function generateEmojisForHangul(hangul) {
  if (!hangul) return [];

  // íŠ¹ìˆ˜ ë‹¤ì˜ì–´ ì²˜ë¦¬ - ë¨¼ì € í™•ì¸
  // ë‹¨ì–´ê°€ ì—¬ëŸ¬ ì˜ë¯¸ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ê²½ìš° ëª¨ë“  ì˜ë¯¸ì˜ ì´ëª¨ì§€ë¥¼ í•©ì³ì„œ ì œê³µ
  if (hangul === "ë°°") {
    console.log("ë‹¤ì˜ì–´ ì²˜ë¦¬: ë°° (ê³¼ì¼/ì„ ë°•/ì‹ ì²´)");
    const combinedEmojis = [
      ...wordBasedEmojiMap["ë°°_ê³¼ì¼"].slice(0, 2),
      ...wordBasedEmojiMap["ë°°_ì„ ë°•"].slice(0, 2),
      ...wordBasedEmojiMap["ë°°_ì‹ ì²´"].slice(0, 2),
    ];
    return combinedEmojis;
  }

  if (hangul === "ë°¤") {
    console.log("ë‹¤ì˜ì–´ ì²˜ë¦¬: ë°¤ (ì‹œê°„/ì‹í’ˆ)");
    return [
      ...wordBasedEmojiMap["ë°¤_ì‹œê°„"].slice(0, 3),
      ...wordBasedEmojiMap["ë°¤_ì‹í’ˆ"].slice(0, 3),
    ];
  }

  if (hangul === "ì°¨") {
    console.log("ë‹¤ì˜ì–´ ì²˜ë¦¬: ì°¨ (ìŒë£Œ/êµí†µ)");
    return [
      ...wordBasedEmojiMap["ì°¨_ìŒë£Œ"].slice(0, 3),
      ...wordBasedEmojiMap["ì°¨_êµí†µ"].slice(0, 3),
    ];
  }

  if (hangul === "ë‹¤ë¦¬") {
    console.log("ë‹¤ì˜ì–´ ì²˜ë¦¬: ë‹¤ë¦¬ (ì‹ ì²´/êµëŸ‰)");
    return [
      ...wordBasedEmojiMap["ë‹¤ë¦¬_ì‹ ì²´"].slice(0, 3),
      ...wordBasedEmojiMap["ë‹¤ë¦¬_êµëŸ‰"].slice(0, 3),
    ];
  }

  if (hangul === "ëˆˆ") {
    console.log("ë‹¤ì˜ì–´ ì²˜ë¦¬: ëˆˆ (ê°ê°/ë‚ ì”¨)");
    return [
      ...wordBasedEmojiMap["ëˆˆ_ê°ê°"].slice(0, 3),
      ...wordBasedEmojiMap["ëˆˆ_ë‚ ì”¨"].slice(0, 3),
    ];
  }

  if (hangul === "ë§") {
    console.log("ë‹¤ì˜ì–´ ì²˜ë¦¬: ë§ (ë™ë¬¼/ì–¸ì–´)");
    return [
      ...wordBasedEmojiMap["ë§_ë™ë¬¼"].slice(0, 3),
      ...wordBasedEmojiMap["ë§_ì–¸ì–´"].slice(0, 3),
    ];
  }

  if (hangul === "ì" || hangul === "ì…") {
    const key = hangul === "ì" ? "ì_ì‹ë¬¼" : "ì…_ì‹ ì²´";
    console.log(`ë‹¤ì˜ì–´ ì²˜ë¦¬: ${hangul}`);
    return wordBasedEmojiMap[key];
  }

  // 1. ì •í™•í•œ ë‹¨ì–´ ë§¤ì¹­ í™•ì¸
  if (wordBasedEmojiMap[hangul]) {
    console.log(`ì •í™•í•œ ë‹¨ì–´ ë§¤ì¹­: ${hangul}`);
    return wordBasedEmojiMap[hangul];
  }

  // 2. ë™ì˜ì–´ ë§¤í•‘ í™•ì¸
  const synonym = synonymMap[hangul];
  if (synonym && wordBasedEmojiMap[synonym]) {
    console.log(`ë™ì˜ì–´ ë§¤í•‘: ${hangul} â†’ ${synonym}`);
    return wordBasedEmojiMap[synonym];
  }

  // 3. ë³µí•© ë‹¨ì–´ ì²˜ë¦¬ (2ê¸€ì ì´ìƒ)
  if (hangul.length >= 2) {
    // 3.1 ë™ì‚¬í˜• ì–´ë¯¸ íŒ¨í„´ í™•ì¸
    const verbPatterns = [
      "í•˜ê¸°",
      "í•˜ë‹¤",
      "í•˜ê³ ",
      "í•˜ëŠ”",
      "í•˜ì§€",
      "í•˜ì—¬",
      "í•´ìš”",
    ];
    for (const pattern of verbPatterns) {
      if (hangul.endsWith(pattern)) {
        const root = hangul.slice(0, hangul.length - pattern.length);
        console.log("ë™ì‚¬ ì–´ê·¼:", root);
        // ë™ì‚¬ ì–´ê·¼ì˜ ë™ì˜ì–´ í™•ì¸
        const normalizedRoot = synonymMap[root] || root;
        if (wordBasedEmojiMap[normalizedRoot]) {
          return wordBasedEmojiMap[normalizedRoot];
        }
      }
    }

    // 3.2 íŠ¹ìˆ˜ ë³µí•© ë‹¨ì–´ ì²˜ë¦¬ (ì˜ˆ: ì•…ìˆ˜, ê³µë¶€)
    // ì²« ë‘ ê¸€ìë¡œ ì´ë£¨ì–´ì§„ ë³µí•©ì–´ ê²€ì‚¬
    const firstTwoChars = hangul.substring(0, 2);
    const normalizedTwoChars = synonymMap[firstTwoChars] || firstTwoChars;
    if (wordBasedEmojiMap[normalizedTwoChars]) {
      console.log("ì²« ë‘ ê¸€ì ë§¤ì¹­:", normalizedTwoChars);
      return wordBasedEmojiMap[normalizedTwoChars];
    }

    // 3.3 ë‹¨ì–´ ë‚´ ì˜ë¯¸ìˆëŠ” ë¶€ë¶„ ê²€ìƒ‰
    for (let i = 0; i < hangul.length - 1; i++) {
      for (let j = 2; j <= 3 && i + j <= hangul.length; j++) {
        const fragment = hangul.substring(i, i + j);
        const normalizedFragment = synonymMap[fragment] || fragment;
        if (wordBasedEmojiMap[normalizedFragment]) {
          console.log("ì˜ë¯¸ ìˆëŠ” ë¶€ë¶„ ë§¤ì¹­:", normalizedFragment);
          return wordBasedEmojiMap[normalizedFragment];
        }
      }
    }

    // 3.4 ë‘ ê¸€ì ì´ìƒ ë‹¨ì–´ì˜ íŠ¹ë³„ ì²˜ë¦¬ - ì²« ê¸€ìê°€ "ê³ "ì¸ ê²½ìš° ë™ë¬¼ì´ë‚˜ ìŒì‹ ê´€ë ¨ ì´ëª¨ì§€ ë°˜í™˜
    if (hangul.startsWith("ê³ ") && !wordBasedEmojiMap[hangul]) {
      // ê³ ë˜, ê³ ê¸°, ê³ êµ¬ë§ˆ ë“±ì´ ì—†ë‹¤ë©´ ì¼ë°˜ì ì¸ ë™ë¬¼/ìŒì‹ ì´ëª¨ì§€ ë°˜í™˜
      return ["ğŸ„", "ğŸˆ", "ğŸ•", "ğŸ¦", "ğŸ¯"]; // ë™ë¬¼ ê´€ë ¨ ì´ëª¨ì§€ë¡œ ê¸°ë³¸ ì œê³µ
    }
  }

  // 4. ì˜ë¯¸ ê¸°ë°˜ ì´ëª¨ì§€ í™•ì¸
  // ì£¼ìš” ì¹´í…Œê³ ë¦¬ë³„ë¡œ ë‹¨ì–´ë¥¼ í™•ì¸í•˜ê³  ì˜ë¯¸ ê¸°ë°˜ ì´ëª¨ì§€ ë°˜í™˜
  for (const [category, emojis] of Object.entries(meaningBasedEmojis)) {
    // ì¹´í…Œê³ ë¦¬ëª…ì´ í¬í•¨ëœ ê²½ìš° í•´ë‹¹ ì´ëª¨ì§€ ë°˜í™˜ (ì˜ˆ: "ë™ë¬¼ì›", "ë™ë¬¼" ì¹´í…Œê³ ë¦¬ ë§¤ì¹­)
    if (hangul.includes(category)) {
      console.log(`ì¹´í…Œê³ ë¦¬ ë§¤ì¹­: ${hangul} â†’ ${category}`);
      return emojis;
    }

    // ì¹´í…Œê³ ë¦¬ë³„ íŠ¹ë³„ ì²˜ë¦¬
    if (category === "ë™ë¬¼" && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }

    if (category === "ê³¼ì¼" && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }

    if (category === "ì±„ì†Œ" && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }

    if (category === "ë‚ ì”¨" && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }

    if (category === "ê°ì •" && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }

    if (category === "êµí†µ" && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }

    if (category === "ìŒì•…" && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }

    if (category === "ì‹œê°„" && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }

    if (category === "ì¥ì†Œ" && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }

    if (category === "ìƒ‰ìƒ" && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }

    if (category === "ìì—°í™˜ê²½" && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }

    if (category === "í•™ìŠµ" && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }

    if (category === "í†µì‹ " && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }

    if (category === "ê±´ê°•" && wordBasedEmojiMap[hangul]) {
      return wordBasedEmojiMap[hangul];
    }
  }

  // 5. ì¹´í…Œê³ ë¦¬ ë‚´ íŠ¹ì • í•­ëª© ê²€ìƒ‰ (ì´ë¯¸ ìœ„ì—ì„œ ì²˜ë¦¬ëœ ê²½ìš° ì¤‘ë³µë  ìˆ˜ ìˆìœ¼ë‚˜ ì•ˆì „ì¥ì¹˜ë¡œ ì¶”ê°€)
  // ëª¨ë“  ì´ëª¨ì§€ ë§µì„ ê²€ì‚¬í•˜ì—¬ ê´€ë ¨ í•­ëª© ì°¾ê¸°
  for (const key in wordBasedEmojiMap) {
    // ì…ë ¥ëœ ë‹¨ì–´ê°€ ë‹¤ë¥¸ í•­ëª©ì˜ ì´ëª¨ì§€ ì¤‘ì— í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
    const emojis = wordBasedEmojiMap[key];
    for (const emoji of emojis) {
      if (hangul.includes(emoji)) {
        console.log(`ì´ëª¨ì§€ ì—°ê´€ ê²€ìƒ‰: ${hangul} â†’ ${emoji} (${key})`);
        return wordBasedEmojiMap[key];
      }
    }
  }

  // 6. ë“±ë¡ë˜ì§€ ì•Šì€ ë‹¨ì–´ ì²˜ë¦¬ - ì¼ë°˜ì ì¸ ì´ëª¨ì§€ ì œê³µ
  console.log("ë“±ë¡ë˜ì§€ ì•Šì€ ë‹¨ì–´:", hangul);

  // ì¼ë°˜ì ì¸ ì´ëª¨ì§€ë“¤ ì œê³µ
  const generalEmojis = [
    // ë‹¤ì–‘í•œ ì¹´í…Œê³ ë¦¬ì˜ ì´ëª¨ì§€ ì œê³µ
    "ğŸ“",
    "âœï¸",
    "ğŸ”¤",
    "ğŸ“š",
    "ğŸ“", // í•™ìŠµ ê´€ë ¨
    "ğŸ’¬",
    "ğŸ—£ï¸",
    "ğŸ‘‚",
    "ğŸ‘€",
    "ğŸ‘„", // ì†Œí†µ ê´€ë ¨
    "ğŸ‘",
    "ğŸ‘",
    "ğŸ™Œ",
    "ğŸ«¶",
    "â¤ï¸", // ê¸ì •ì  í‘œí˜„
    "ğŸ”",
    "ğŸ’¡",
    "ğŸ§ ",
    "ğŸ’­",
    "â“", // ìƒê°/ì§ˆë¬¸ ê´€ë ¨
    "ğŸŒˆ",
    "ğŸŒŸ",
    "ğŸµ",
    "ğŸ¨",
    "ğŸ­", // ì˜ˆìˆ /í‘œí˜„ ê´€ë ¨
    "ğŸš—",
    "ğŸš‚",
    "âœˆï¸",
    "ğŸš¢",
    "ğŸš²", // êµí†µ ê´€ë ¨ (ì¶”ê°€)
    "ğŸ ",
    "ğŸ¢",
    "ğŸ«",
    "ğŸ¥",
    "ğŸ¦", // ê±´ë¬¼ ê´€ë ¨ (ì¶”ê°€)
    "ğŸ",
    "ğŸš",
    "ğŸ•",
    "ğŸ¦",
    "ğŸ·", // ìŒì‹ ê´€ë ¨ (ì¶”ê°€)
  ];

  // ì¼ë°˜ ì´ëª¨ì§€ ì¤‘ ëœë¤í•˜ê²Œ 10ê°œ ì„ íƒí•˜ì—¬ ë°˜í™˜
  const randomEmojis = [];
  const totalEmojis = generalEmojis.length;
  const emojiCount = Math.min(10, totalEmojis);

  // ì¤‘ë³µ ì—†ì´ ëœë¤ ì„ íƒ
  const selectedIndices = new Set();
  while (selectedIndices.size < emojiCount) {
    const randomIndex = Math.floor(Math.random() * totalEmojis);
    selectedIndices.add(randomIndex);
  }

  // ì„ íƒëœ ì´ëª¨ì§€ ë°°ì—´ êµ¬ì„±
  for (const index of selectedIndices) {
    randomEmojis.push(generalEmojis[index]);
  }

  return randomEmojis;
}
