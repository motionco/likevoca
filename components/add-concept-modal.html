<!-- 개념 추가 모달 -->
<div id="concept-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center hidden z-50">
  <div class="bg-white rounded-lg shadow-xl p-6 w-11/12 max-w-4xl max-h-[90vh] overflow-y-auto">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-bold text-gray-800" data-i18n="add_concept">개념 추가</h2>
      <button id="close-concept-modal" class="text-gray-500 hover:text-gray-700">
        <i class="fas fa-times text-xl"></i>
      </button>
    </div>

    <form id="concept-form">
      <!-- 기본 정보 -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="domain">도메인</label>
          <select id="concept-domain" class="w-full p-2 border rounded">
                            <option value="" class="hidden" data-i18n="select_domain">도메인 선택</option>
            <option value="daily" data-i18n="daily">일상</option>
            <option value="food" data-i18n="food">음식</option>
            <option value="travel" data-i18n="travel">여행</option>
            <option value="business" data-i18n="business">비즈니스</option>
            <option value="education" data-i18n="education">교육</option>
            <option value="nature" data-i18n="nature">자연</option>
            <option value="technology" data-i18n="technology">기술</option>
            <option value="health" data-i18n="health">건강</option>
            <option value="sports" data-i18n="sports">스포츠</option>
            <option value="entertainment" data-i18n="entertainment">엔터테인먼트</option>
            <option value="culture" data-i18n="culture">문화</option>
            <option value="other" data-i18n="other">기타</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="category">카테고리</label>
          <select id="concept-category" class="w-full p-2 border rounded">
                            <option value="" class="hidden" data-i18n="select_category">카테고리 선택</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="emoji">이모지</label>
          <select id="concept-emoji" class="w-full p-2 border rounded">
                            <option value="" class="hidden" data-i18n="select_emoji">이모지 선택</option>
          </select>
        </div>
      </div>

      <!-- 추가 정보 -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="purpose">목적</label>
          <select id="concept-purpose" class="w-full p-2 border rounded">
                            <option value="" class="hidden" data-i18n="select_purpose">목적 선택</option>
            <option value="greeting" data-i18n="greeting">인사</option>
            <option value="thanking" data-i18n="thanking">감사</option>
            <option value="request" data-i18n="request">요청</option>
            <option value="question" data-i18n="question">질문</option>
            <option value="opinion" data-i18n="opinion">의견</option>
            <option value="agreement" data-i18n="agreement">동의</option>
            <option value="refusal" data-i18n="refusal">거절</option>
            <option value="apology" data-i18n="apology">사과</option>
            <option value="instruction" data-i18n="instruction">지시</option>
            <option value="description" data-i18n="description">설명</option>
            <option value="suggestion" data-i18n="suggestion">제안</option>
            <option value="emotion" data-i18n="emotion">감정표현</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="situation">상황 (다중 선택 가능)</label>
          <div class="grid grid-cols-2 gap-2 border rounded p-2 max-h-32 overflow-y-auto">
            <label class="flex items-center">
              <input type="checkbox" name="situation" value="formal" class="mr-2">
              <span data-i18n="formal">격식</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="situation" value="casual" class="mr-2">
              <span data-i18n="casual">비격식</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="situation" value="polite" class="mr-2">
              <span data-i18n="polite">정중한</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="situation" value="urgent" class="mr-2">
              <span data-i18n="urgent">긴급한</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="situation" value="work" class="mr-2">
              <span data-i18n="work">직장</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="situation" value="school" class="mr-2">
              <span data-i18n="school">학교</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="situation" value="social" class="mr-2">
              <span data-i18n="social">사교</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="situation" value="travel" class="mr-2">
              <span data-i18n="travel">여행</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="situation" value="shopping" class="mr-2">
              <span data-i18n="shopping">쇼핑</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="situation" value="home" class="mr-2">
              <span data-i18n="home">가정</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="situation" value="public" class="mr-2">
              <span data-i18n="public">공공장소</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="situation" value="online" class="mr-2">
              <span data-i18n="online">온라인</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="situation" value="medical" class="mr-2">
              <span data-i18n="medical">의료</span>
            </label>
          </div>
        </div>
      </div>

      <!-- 언어별 표현 -->
      <div class="mb-6">
        <h3 class="text-lg font-semibold mb-3" data-i18n="language_expressions">언어별 표현</h3>
        
        <!-- 언어 탭 -->
        <div id="edit-language-tabs" class="border-b mb-4">
          <nav class="flex space-x-8">
            <button type="button" class="edit-language-tab pb-2 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600" data-language="korean">
              <span class="flag-icon">🇰🇷</span> <span data-i18n="korean">한국어</span>
            </button>
            <button type="button" class="edit-language-tab pb-2 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-language="english">
              <span class="flag-icon">🇺🇸</span> <span data-i18n="english">영어</span>
            </button>
            <button type="button" class="edit-language-tab pb-2 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-language="japanese">
              <span class="flag-icon">🇯🇵</span> <span data-i18n="japanese">일본어</span>
            </button>
            <button type="button" class="edit-language-tab pb-2 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-language="chinese">
              <span class="flag-icon">🇨🇳</span> <span data-i18n="chinese">중국어</span>
            </button>
            <button type="button" class="edit-language-tab pb-2 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-language="spanish">
              <span class="flag-icon">🇪🇸</span> <span data-i18n="spanish">스페인어</span>
            </button>
          </nav>
        </div>

        <!-- 언어별 콘텐츠 -->
        <div id="edit-language-content">
          <!-- 한국어 탭 -->
          <div id="korean-content" class="language-content">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
              <div>
                <label class="block text-sm text-gray-600" data-i18n="word">단어</label>
                <input type="text" id="korean-word" class="w-full p-2 border rounded" placeholder="사과">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="pronunciation">발음</label>
                <input type="text" id="korean-pronunciation" class="w-full p-2 border rounded" placeholder="sa-gwa">
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm text-gray-600" data-i18n="definition">정의</label>
                <input type="text" id="korean-definition" class="w-full p-2 border rounded" placeholder="둥글고 빨간 과일">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="part_of_speech">품사</label>
                <select id="korean-pos" class="w-full p-2 border rounded">
                  <option value="" class="hidden" data-i18n="select_pos">품사 선택</option>
                  <option value="명사" data-i18n="noun">명사</option>
                  <option value="동사" data-i18n="verb">동사</option>
                  <option value="형용사" data-i18n="adjective">형용사</option>
                  <option value="부사" data-i18n="adverb">부사</option>
                  <option value="대명사" data-i18n="pronoun">대명사</option>
                  <option value="전치사" data-i18n="preposition">전치사</option>
                  <option value="접속사" data-i18n="conjunction">접속사</option>
                  <option value="감탄사" data-i18n="interjection">감탄사</option>
                  <option value="조사" data-i18n="particle">조사</option>
                  <option value="기타" data-i18n="other">기타</option>
                </select>
              </div>
            </div>
            <!-- 고급 필드들 -->
            <div class="space-y-3">
              <div>
                <label class="block text-sm text-gray-600" data-i18n="synonyms">유사어 (쉼표로 구분)</label>
                <input type="text" id="korean-synonyms" class="w-full p-2 border rounded" placeholder="과일, 열매">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="antonyms">반의어 (쉼표로 구분)</label>
                <input type="text" id="korean-antonyms" class="w-full p-2 border rounded" placeholder="">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="collocations">연어 (쉼표로 구분)</label>
                <input type="text" id="korean-collocations" class="w-full p-2 border rounded" placeholder="빨간 사과, 신선한 사과">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="compound_words">복합어 (쉼표로 구분)</label>
                <input type="text" id="korean-compound-words" class="w-full p-2 border rounded" placeholder="사과나무, 사과주스">
              </div>
            </div>
          </div>

          <!-- 영어 탭 -->
          <div id="english-content" class="language-content hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
              <div>
                <label class="block text-sm text-gray-600" data-i18n="word">단어</label>
                <input type="text" id="english-word" class="w-full p-2 border rounded" placeholder="apple">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="pronunciation">발음</label>
                <input type="text" id="english-pronunciation" class="w-full p-2 border rounded" placeholder="/ˈæpəl/">
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm text-gray-600" data-i18n="definition">정의</label>
                <input type="text" id="english-definition" class="w-full p-2 border rounded" placeholder="a round fruit with red or green skin">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="part_of_speech">품사</label>
                <select id="english-pos" class="w-full p-2 border rounded">
                  <option value="" class="hidden" data-i18n="select_pos">품사 선택</option>
                  <option value="noun" data-i18n="noun">noun</option>
                  <option value="verb" data-i18n="verb">verb</option>
                  <option value="adjective" data-i18n="adjective">adjective</option>
                  <option value="adverb" data-i18n="adverb">adverb</option>
                  <option value="pronoun" data-i18n="pronoun">pronoun</option>
                  <option value="preposition" data-i18n="preposition">preposition</option>
                  <option value="conjunction" data-i18n="conjunction">conjunction</option>
                  <option value="interjection" data-i18n="interjection">interjection</option>
                  <option value="determiner" data-i18n="determiner">determiner</option>
                  <option value="other" data-i18n="other">other</option>
                </select>
              </div>
            </div>
            <!-- 고급 필드들 -->
            <div class="space-y-3">
              <div>
                <label class="block text-sm text-gray-600" data-i18n="synonyms">유사어 (쉼표로 구분)</label>
                <input type="text" id="english-synonyms" class="w-full p-2 border rounded" placeholder="fruit, produce">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="antonyms">반의어 (쉼표로 구분)</label>
                <input type="text" id="english-antonyms" class="w-full p-2 border rounded" placeholder="">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="collocations">연어 (쉼표로 구분)</label>
                <input type="text" id="english-collocations" class="w-full p-2 border rounded" placeholder="red apple, fresh apple">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="compound_words">복합어 (쉼표로 구분)</label>
                <input type="text" id="english-compound-words" class="w-full p-2 border rounded" placeholder="apple tree, apple juice">
              </div>
            </div>
          </div>

          <!-- 일본어 탭 -->
          <div id="japanese-content" class="language-content hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
              <div>
                <label class="block text-sm text-gray-600" data-i18n="word">단어</label>
                <input type="text" id="japanese-word" class="w-full p-2 border rounded" placeholder="りんご">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="pronunciation">발음</label>
                <input type="text" id="japanese-pronunciation" class="w-full p-2 border rounded" placeholder="ringo">
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm text-gray-600" data-i18n="definition">정의</label>
                <input type="text" id="japanese-definition" class="w-full p-2 border rounded" placeholder="丸くて赤い果物">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="part_of_speech">품사</label>
                <select id="japanese-pos" class="w-full p-2 border rounded">
                  <option value="" class="hidden" data-i18n="select_pos">품사 선택</option>
                  <option value="名詞" data-i18n="noun">名詞</option>
                  <option value="動詞" data-i18n="verb">動詞</option>
                  <option value="形容詞" data-i18n="adjective">形容詞</option>
                  <option value="副詞" data-i18n="adverb">副詞</option>
                  <option value="代名詞" data-i18n="pronoun">代名詞</option>
                  <option value="前置詞" data-i18n="preposition">前置詞</option>
                  <option value="接続詞" data-i18n="conjunction">接続詞</option>
                  <option value="感嘆詞" data-i18n="interjection">感嘆詞</option>
                  <option value="助詞" data-i18n="particle">助詞</option>
                  <option value="その他" data-i18n="other">その他</option>
                </select>
              </div>
            </div>
            <!-- 고급 필드들 -->
            <div class="space-y-3">
              <div>
                <label class="block text-sm text-gray-600" data-i18n="synonyms">유사어 (쉼표로 구분)</label>
                <input type="text" id="japanese-synonyms" class="w-full p-2 border rounded" placeholder="果物、フルーツ">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="antonyms">반의어 (쉼표로 구분)</label>
                <input type="text" id="japanese-antonyms" class="w-full p-2 border rounded" placeholder="">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="collocations">연어 (쉼표로 구분)</label>
                <input type="text" id="japanese-collocations" class="w-full p-2 border rounded" placeholder="赤いりんご、新鮮なりんご">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="compound_words">복합어 (쉼표로 구분)</label>
                <input type="text" id="japanese-compound-words" class="w-full p-2 border rounded" placeholder="りんごの木、りんごジュース">
              </div>
            </div>
          </div>

          <!-- 중국어 탭 -->
          <div id="chinese-content" class="language-content hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
              <div>
                <label class="block text-sm text-gray-600" data-i18n="word">단어</label>
                <input type="text" id="chinese-word" class="w-full p-2 border rounded" placeholder="苹果">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="pronunciation">발음</label>
                <input type="text" id="chinese-pronunciation" class="w-full p-2 border rounded" placeholder="píngguǒ">
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm text-gray-600" data-i18n="definition">정의</label>
                <input type="text" id="chinese-definition" class="w-full p-2 border rounded" placeholder="圆形红色水果">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="part_of_speech">품사</label>
                <select id="chinese-pos" class="w-full p-2 border rounded">
                  <option value="" class="hidden" data-i18n="select_pos">품사 선택</option>
                  <option value="名词" data-i18n="noun">名词</option>
                  <option value="动词" data-i18n="verb">动词</option>
                  <option value="形容词" data-i18n="adjective">形容词</option>
                  <option value="副词" data-i18n="adverb">副词</option>
                  <option value="代词" data-i18n="pronoun">代词</option>
                  <option value="介词" data-i18n="preposition">介词</option>
                  <option value="连词" data-i18n="conjunction">连词</option>
                  <option value="感叹词" data-i18n="interjection">感叹词</option>
                  <option value="量词" data-i18n="classifier">量词</option>
                  <option value="其他" data-i18n="other">其他</option>
                </select>
              </div>
            </div>
            <!-- 고급 필드들 -->
            <div class="space-y-3">
              <div>
                <label class="block text-sm text-gray-600" data-i18n="synonyms">유사어 (쉼표로 구분)</label>
                <input type="text" id="chinese-synonyms" class="w-full p-2 border rounded" placeholder="水果、果实">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="antonyms">반의어 (쉼표로 구분)</label>
                <input type="text" id="chinese-antonyms" class="w-full p-2 border rounded" placeholder="">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="collocations">연어 (쉼표로 구분)</label>
                <input type="text" id="chinese-collocations" class="w-full p-2 border rounded" placeholder="红苹果、新鲜苹果">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="compound_words">복합어 (쉼표로 구분)</label>
                <input type="text" id="chinese-compound-words" class="w-full p-2 border rounded" placeholder="苹果树、苹果汁">
              </div>
            </div>
          </div>

          <!-- 스페인어 탭 -->
          <div id="spanish-content" class="language-content hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
              <div>
                <label class="block text-sm text-gray-600" data-i18n="word">단어</label>
                <input type="text" id="spanish-word" class="w-full p-2 border rounded" placeholder="manzana">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="pronunciation">발음</label>
                <input type="text" id="spanish-pronunciation" class="w-full p-2 border rounded" placeholder="/manˈθana/">
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm text-gray-600" data-i18n="definition">정의</label>
                <input type="text" id="spanish-definition" class="w-full p-2 border rounded" placeholder="fruta redonda con piel roja o verde">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="part_of_speech">품사</label>
                <select id="spanish-pos" class="w-full p-2 border rounded">
                  <option value="" class="hidden" data-i18n="select_pos">품사 선택</option>
                  <option value="sustantivo" data-i18n="noun">sustantivo</option>
                  <option value="verbo" data-i18n="verb">verbo</option>
                  <option value="adjetivo" data-i18n="adjective">adjetivo</option>
                  <option value="adverbio" data-i18n="adverb">adverbio</option>
                  <option value="pronombre" data-i18n="pronoun">pronombre</option>
                  <option value="preposición" data-i18n="preposition">preposición</option>
                  <option value="conjunción" data-i18n="conjunction">conjunción</option>
                  <option value="interjección" data-i18n="interjection">interjección</option>
                  <option value="determinante" data-i18n="determiner">determinante</option>
                  <option value="otro" data-i18n="other">otro</option>
                </select>
              </div>
            </div>
            <!-- 고급 필드들 -->
            <div class="space-y-3">
              <div>
                <label class="block text-sm text-gray-600" data-i18n="synonyms">유사어 (쉼표로 구분)</label>
                <input type="text" id="spanish-synonyms" class="w-full p-2 border rounded" placeholder="fruta, producto">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="antonyms">반의어 (쉼표로 구분)</label>
                <input type="text" id="spanish-antonyms" class="w-full p-2 border rounded" placeholder="">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="collocations">연어 (쉼표로 구분)</label>
                <input type="text" id="spanish-collocations" class="w-full p-2 border rounded" placeholder="manzana roja, manzana fresca">
              </div>
              <div>
                <label class="block text-sm text-gray-600" data-i18n="compound_words">복합어 (쉼표로 구분)</label>
                <input type="text" id="spanish-compound-words" class="w-full p-2 border rounded" placeholder="manzano, jugo de manzana">
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 예문 -->
      <div class="mb-6">
        <div class="flex justify-between items-center mb-3">
          <h3 class="text-lg font-semibold" data-i18n="examples">예문</h3>
          <button type="button" id="add-example" class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm">
            <i class="fas fa-plus mr-1"></i><span data-i18n="add_example">예문 추가</span>
          </button>
        </div>
        <div id="examples-container">
          <!-- 대표 예문 -->
          <div class="example-item border-2 border-blue-300 bg-blue-50 p-4 rounded mb-4">
            <div class="flex items-center mb-3">
              <i class="fas fa-star text-yellow-500 mr-2"></i>
              <span class="font-semibold text-blue-700" data-i18n="representative_example">대표 예문</span>
              <span class="text-sm text-gray-600 ml-2" data-i18n="representative_example_desc">(필수 - 개념을 가장 잘 보여주는 예문)</span>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm text-gray-600 mb-1" data-i18n="korean_example">한국어 예문</label>
                <textarea class="korean-example w-full p-2 border rounded h-20" placeholder="나는 빨간 사과를 좋아한다."></textarea>
              </div>
              <div>
                <label class="block text-sm text-gray-600 mb-1" data-i18n="english_example">영어 예문</label>
                <textarea class="english-example w-full p-2 border rounded h-20" placeholder="I like red apples."></textarea>
              </div>
              <div>
                <label class="block text-sm text-gray-600 mb-1" data-i18n="japanese_example">일본어 예문</label>
                <textarea class="japanese-example w-full p-2 border rounded h-20" placeholder="私は赤いりんごが好きです。"></textarea>
              </div>
              <div>
                <label class="block text-sm text-gray-600 mb-1" data-i18n="chinese_example">중국어 예문</label>
                <textarea class="chinese-example w-full p-2 border rounded h-20" placeholder="我喜欢红苹果。"></textarea>
              </div>
              <div>
                <label class="block text-sm text-gray-600 mb-1" data-i18n="spanish_example">스페인어 예문</label>
                <textarea class="spanish-example w-full p-2 border rounded h-20" placeholder="Me gustan las manzanas rojas."></textarea>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 버튼 -->
      <div class="flex justify-end space-x-4">
        <button type="button" id="cancel-concept" class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded" data-i18n="cancel">
          취소
        </button>
        <button type="submit" id="save-concept" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded" data-i18n="save">
          저장
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Domain-Category-Emoji JavaScript -->
<script src="components/js/domain-category-emoji.js"></script> 