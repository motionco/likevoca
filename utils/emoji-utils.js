// í•œê¸€ ë‹¨ì–´ì— ëŒ€í•œ ì´ëª¨ì§€ ë§¤í•‘ ë° ì„ íƒ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜

// ë‹¨ì–´ ê¸°ë°˜ ì´ëª¨ì§€ ë§¤í•‘
export const wordBasedEmojiMap = {
  // ì‹ ì²´ ë¶€ìœ„
  ë°œ: ["ğŸ¦¶", "ğŸ‘£", "ğŸ§¦", "ğŸ‘", "ğŸ©°"],
  ì†: ["ğŸ‘‹", "âœ‹", "ğŸ‘", "ğŸ¤²", "ğŸ™Œ"],
  ëˆˆ: ["ğŸ‘ï¸", "ğŸ‘€", "ğŸ‘“", "ğŸ”", "ğŸ‘ï¸â€ğŸ—¨ï¸"],
  ì½”: ["ğŸ‘ƒ", "ğŸ½", "ğŸŒ¹", "ğŸŒ·", "ğŸŒ¸"],
  ì…: ["ğŸ‘„", "ğŸ‘…", "ğŸ¦·", "ğŸ’‹", "ğŸ—£ï¸"],
  ê·€: ["ğŸ‘‚", "ğŸ‘‚ğŸ»", "ğŸ¦»", "ğŸ§", "ğŸ”Š"],
  ë‹¤ë¦¬: ["ğŸ¦µ", "ğŸ‘–", "ğŸš¶", "ğŸƒ", "ğŸ’ƒ"],
  íŒ”: ["ğŸ’ª", "ğŸ‘Š", "ğŸ‘", "ğŸ’…", "ğŸ¦¾"],
  ë¨¸ë¦¬: ["ğŸ‘¨", "ğŸ‘©", "ğŸ§ ", "ğŸ§¢", "ğŸ‘±"],
  ì–¼êµ´: ["ğŸ˜€", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜", "ğŸ˜†"],
  ëª©: ["ğŸ‘”", "ğŸ‘•", "ğŸ‘—", "ğŸ’", "ğŸ§£"],
  ê°€ìŠ´: ["ğŸ’“", "â¤ï¸", "ğŸ«€", "ğŸ‘•", "ğŸ‘š"],
  ë°°: ["ğŸ", "ğŸš¢", "ğŸ¤°", "â›´ï¸", "ğŸ›³ï¸", "ğŸ", "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§", "âš“", "ğŸŒŠ"],
  ë°°_ê³¼ì¼: ["ğŸ", "ğŸ", "ğŸ¥­", "ğŸ", "ğŸ¥"],
  ë°°_ì„ ë°•: ["ğŸš¢", "â›´ï¸", "ğŸ›³ï¸", "âš“", "ğŸŒŠ"],
  ë°°_ì‹ ì²´: ["ğŸ¤°", "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§", "ğŸ‘š", "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§", "ğŸ’ƒ"],

  // ë™ë¬¼
  ê°•ì•„ì§€: ["ğŸ¶", "ğŸ•", "ğŸ¦®", "ğŸ©", "ğŸ¾"],
  ê³ ì–‘ì´: ["ğŸ±", "ğŸˆ", "ğŸ˜º", "ğŸ˜¸", "ğŸ™€"],
  ì½”ë¼ë¦¬: ["ğŸ˜", "ğŸŒ²", "ğŸï¸", "ğŸ§ ", "ğŸ‘ƒ"],
  í˜¸ë‘ì´: ["ğŸ¯", "ğŸ…", "ğŸŒ¿", "ğŸï¸", "ğŸŒ´"],
  ì‚¬ì: ["ğŸ¦", "ğŸ¦¬", "ğŸª´", "ğŸŒ¿", "ğŸŒ¹"],
  ì›ìˆ­ì´: ["ğŸ’", "ğŸµ", "ğŸŒ", "ğŸŒ´", "ğŸŒ²"],

  // ë„êµ¬
  ì¹¼: ["ğŸ”ª", "ğŸ´", "ğŸ½ï¸", "ğŸ—¡ï¸", "âš”ï¸"],
  ê°€ìœ„: ["âœ‚ï¸", "ğŸ¦¯", "ğŸ“‘", "ğŸ“„", "ğŸ”ª"],
  ì—°í•„: ["âœï¸", "ğŸ–Šï¸", "ğŸ“", "ğŸ–Œï¸", "ğŸ”"],
  íœ´ì§€: ["ğŸ§»", "ğŸ›", "ğŸš½", "ğŸ§¼", "ğŸ’¦"],

  // ì§ì—…
  ì˜ì‚¬: ["ğŸ‘¨â€âš•ï¸", "ğŸ‘©â€âš•ï¸", "ğŸ’‰", "ğŸ’Š", "ğŸ©º"],
  ì„ ìƒë‹˜: ["ğŸ‘¨â€ğŸ«", "ğŸ‘©â€ğŸ«", "ğŸ“š", "ğŸ“", "ğŸ§‘â€ğŸ“"],
  ìš”ë¦¬ì‚¬: ["ğŸ‘¨â€ğŸ³", "ğŸ‘©â€ğŸ³", "ğŸ³", "ğŸ¥˜", "ğŸ²"],
  í•™ìƒ: ["ğŸ‘¨â€ğŸ“", "ğŸ‘©â€ğŸ“", "ğŸ“š", "âœï¸", "ğŸ’"],

  // ìŒì‹
  ë°¥: ["ğŸš", "ğŸ›", "ğŸ±", "ğŸ¥„", "ğŸœ"],
  êµ­: ["ğŸ²", "ğŸ¥£", "ğŸ±", "ğŸ¥„", "ğŸœ"],
  ë¬¼: ["ğŸ’§", "ğŸ¥›", "ğŸš¿", "ğŸŒŠ", "ğŸš°"],
  ë¹µ: ["ğŸ", "ğŸ¥", "ğŸ¥¯", "ğŸ¥–", "ğŸ©"],

  // ì¥ì†Œ
  ì§‘: ["ğŸ ", "ğŸ¡", "ğŸ¢", "ğŸ ", "ğŸ˜ï¸"],
  í•™êµ: ["ğŸ«", "ğŸ‘¨â€ğŸ«", "ğŸ‘©â€ğŸ“", "ğŸ“š", "ğŸ’"],
  ë³‘ì›: ["ğŸ¥", "ğŸ‘¨â€âš•ï¸", "ğŸ’‰", "ğŸ©º", "ğŸ’Š"],
  ê³µì›: ["ğŸŒ³", "ğŸŒ²", "ğŸŒ¸", "ğŸï¸", "ğŸª‚"],

  // êµí†µ
  ìë™ì°¨: ["ğŸš—", "ğŸš™", "ğŸš˜", "ğŸï¸", "ğŸ›£ï¸"],
  ë²„ìŠ¤: ["ğŸšŒ", "ğŸš", "ğŸš", "ğŸš", "ğŸ—ºï¸"],
  ê¸°ì°¨: ["ğŸš‚", "ğŸš„", "ğŸš…", "ğŸš‰", "ğŸ›¤ï¸"],
  ë¹„í–‰ê¸°: ["âœˆï¸", "ğŸ›©ï¸", "ğŸ›«", "ğŸ›¬", "ğŸŒ¤ï¸"],

  // ê°ì •
  ì›ƒìŒ: ["ğŸ˜€", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜", "ğŸ¤£"],
  ìŠ¬í””: ["ğŸ˜¢", "ğŸ˜­", "ğŸ˜", "ğŸ˜”", "ğŸ˜¥"],
  ë¶„ë…¸: ["ğŸ˜¡", "ğŸ¤¬", "ğŸ‘¿", "ğŸ˜ ", "ğŸ’¢"],
  í–‰ë³µ: ["ğŸ˜Š", "ğŸ¥°", "ğŸ˜", "ğŸ˜Œ", "ğŸ¤—"],

  // ìì—°
  ë‚˜ë¬´: ["ğŸŒ³", "ğŸŒ²", "ğŸŒ±", "ğŸ„", "ğŸ‚"],
  ê½ƒ: ["ğŸŒ¸", "ğŸŒº", "ğŸŒ·", "ğŸŒ¹", "ğŸ’"],
  ì‚°: ["â›°ï¸", "ğŸ”ï¸", "ğŸŒ„", "ğŸ§—", "ğŸï¸"],
  ë°”ë‹¤: ["ğŸŒŠ", "ğŸ–ï¸", "ğŸï¸", "ğŸ™", "ğŸ "],

  // ê³¼ì¼/ì±„ì†Œ
  ì‚¬ê³¼: ["ğŸ", "ğŸ", "ğŸ“", "ğŸ¥§", "ğŸ§ƒ"],
  ë°”ë‚˜ë‚˜: ["ğŸŒ", "ğŸ’", "ğŸ¥­", "ğŸ¨", "ğŸ¥¤"],
  ë‹¹ê·¼: ["ğŸ¥•", "ğŸ°", "ğŸ¥—", "ğŸ²", "ğŸ§†"],
  ê°ì: ["ğŸ¥”", "ğŸŸ", "ğŸ ", "ğŸ¥˜", "ğŸ²"],

  // ë‹¤ì˜ì–´ ê´€ë ¨ ë§¤í•‘ ì¶”ê°€
  ë°¤_ì‹œê°„: ["ğŸŒ™", "ğŸŒ›", "ğŸŒœ", "ğŸŒš", "ğŸŒƒ"],
  ë°¤_ì‹í’ˆ: ["ğŸŒ°", "ğŸ¥œ", "ğŸ‚", "ğŸ", "ğŸ"],

  ì°¨_ìŒë£Œ: ["â˜•", "ğŸµ", "ğŸ«–", "ğŸ¶", "ğŸ¥¤"],
  ì°¨_êµí†µ: ["ğŸš—", "ğŸš™", "ğŸš•", "ğŸš“", "ğŸšŒ"],

  ë‹¤ë¦¬_ì‹ ì²´: ["ğŸ¦µ", "ğŸ‘–", "ğŸš¶", "ğŸƒ", "ğŸ’ƒ"],
  ë‹¤ë¦¬_êµëŸ‰: ["ğŸŒ‰", "ğŸŒ", "ğŸŒ‡", "ğŸï¸", "ğŸš—"],

  ëˆˆ_ê°ê°: ["ğŸ‘ï¸", "ğŸ‘€", "ğŸ‘“", "ğŸ”", "ğŸ‘ï¸â€ğŸ—¨ï¸"],
  ëˆˆ_ë‚ ì”¨: ["â„ï¸", "â˜ƒï¸", "â›„", "ğŸŒ¨ï¸", "ğŸ‚"],

  ë§_ë™ë¬¼: ["ğŸ´", "ğŸ", "ğŸ‡", "ğŸŒ¾", "ğŸï¸"],
  ë§_ì–¸ì–´: ["ğŸ’¬", "ğŸ—£ï¸", "ğŸ‘„", "ğŸ”Š", "ğŸ“¢"],

  ì_ì‹ë¬¼: ["ğŸƒ", "ğŸ‚", "ğŸŒ¿", "ğŸŒ±", "ğŸ"],
  ì…_ì‹ ì²´: ["ğŸ‘„", "ğŸ‘…", "ğŸ¦·", "ğŸ’‹", "ğŸ—£ï¸"],
};

// ë™ì˜ì–´ ë§¤í•‘
export const synonymMap = {
  ê°œ: "ê°•ì•„ì§€",
  ëŒ•ëŒ•ì´: "ê°•ì•„ì§€",
  ë©ë©ì´: "ê°•ì•„ì§€",
  ëƒ¥ì´: "ê³ ì–‘ì´",
  ì•¼ì˜¹ì´: "ê³ ì–‘ì´",
  ì½”ë¼ë¦¬: "ì½”ë¼ë¦¬",
  í˜¸ë‘ì´: "í˜¸ë‘ì´",
  ì‚¬ì: "ì‚¬ì",
  ì›ìˆ­ì´: "ì›ìˆ­ì´",

  ì¹¼: "ì¹¼",
  ë‚˜ì´í”„: "ì¹¼",
  ê°€ìœ„: "ê°€ìœ„",
  ì—°í•„: "ì—°í•„",
  íœ: "ì—°í•„",
  íœ´ì§€: "íœ´ì§€",
  í™”ì¥ì§€: "íœ´ì§€",

  ë‹¥í„°: "ì˜ì‚¬",
  ì˜ì‚¬: "ì˜ì‚¬",
  ì„ ìƒë‹˜: "ì„ ìƒë‹˜",
  êµì‚¬: "ì„ ìƒë‹˜",
  ìŒ¤: "ì„ ìƒë‹˜",
  ìš”ë¦¬ì‚¬: "ìš”ë¦¬ì‚¬",
  ì‰í”„: "ìš”ë¦¬ì‚¬",
  í•™ìƒ: "í•™ìƒ",

  ë°¥: "ë°¥",
  ì‹ì‚¬: "ë°¥",
  êµ­: "êµ­",
  ìˆ˜í”„: "êµ­",
  ë¬¼: "ë¬¼",
  ì›Œí„°: "ë¬¼",
  ë¹µ: "ë¹µ",
  ë¸Œë ˆë“œ: "ë¹µ",

  ì§‘: "ì§‘",
  ê°€ì •: "ì§‘",
  í™ˆ: "ì§‘",
  í•™êµ: "í•™êµ",
  ìŠ¤ì¿¨: "í•™êµ",
  ë³‘ì›: "ë³‘ì›",
  ê³µì›: "ê³µì›",
  íŒŒí¬: "ê³µì›",
};

/**
 * í•œê¸€ ë‹¨ì–´ì— ëŒ€í•œ ì—¬ëŸ¬ ì´ëª¨ì§€ ì˜µì…˜ì„ ìƒì„±
 * @param {string} hangul - ì´ëª¨ì§€ë¥¼ ì°¾ì„ í•œê¸€ ë‹¨ì–´
 * @returns {Array} - ì´ëª¨ì§€ ì˜µì…˜ ë°°ì—´
 */
export function getEmojisForHangul(hangul) {
  console.log("í•œê¸€ ë‹¨ì–´ ì´ëª¨ì§€ ìƒì„±:", hangul);

  if (!hangul) {
    return [];
  }

  // ë‹¤ì˜ì–´ íŠ¹ë³„ ì²˜ë¦¬ (ì˜ˆ: 'ë°°'ëŠ” ê³¼ì¼, ì„ ë°•, ì‹ ì²´ ë“±)
  if (hangul === "ë°°") {
    console.log("ë‹¤ì˜ì–´ ì²˜ë¦¬: ë°°");
    return wordBasedEmojiMap["ë°°"] || [];
  }

  if (hangul === "ë°¤") {
    console.log("ë‹¤ì˜ì–´ ì²˜ë¦¬: ë°¤");
    return [
      ...(wordBasedEmojiMap["ë°¤_ì‹œê°„"] || []),
      ...(wordBasedEmojiMap["ë°¤_ì‹í’ˆ"] || []),
    ];
  }

  if (hangul === "ì°¨") {
    console.log("ë‹¤ì˜ì–´ ì²˜ë¦¬: ì°¨");
    return [
      ...(wordBasedEmojiMap["ì°¨_ìŒë£Œ"] || []),
      ...(wordBasedEmojiMap["ì°¨_êµí†µ"] || []),
    ];
  }

  if (hangul === "ë‹¤ë¦¬") {
    console.log("ë‹¤ì˜ì–´ ì²˜ë¦¬: ë‹¤ë¦¬");
    return [
      ...(wordBasedEmojiMap["ë‹¤ë¦¬_ì‹ ì²´"] || []),
      ...(wordBasedEmojiMap["ë‹¤ë¦¬_êµëŸ‰"] || []),
    ];
  }

  if (hangul === "ëˆˆ") {
    console.log("ë‹¤ì˜ì–´ ì²˜ë¦¬: ëˆˆ");
    return [
      ...(wordBasedEmojiMap["ëˆˆ_ê°ê°"] || []),
      ...(wordBasedEmojiMap["ëˆˆ_ë‚ ì”¨"] || []),
    ];
  }

  if (hangul === "ë§") {
    console.log("ë‹¤ì˜ì–´ ì²˜ë¦¬: ë§");
    return [
      ...(wordBasedEmojiMap["ë§_ë™ë¬¼"] || []),
      ...(wordBasedEmojiMap["ë§_ì–¸ì–´"] || []),
    ];
  }

  if (hangul === "ì" || hangul === "ì…") {
    console.log("ë‹¤ì˜ì–´ ì²˜ë¦¬: ì/ì…");
    return [
      ...(wordBasedEmojiMap["ì_ì‹ë¬¼"] || []),
      ...(wordBasedEmojiMap["ì…_ì‹ ì²´"] || []),
    ];
  }

  // ì •í™•í•œ ì¼ì¹˜ í™•ì¸
  if (wordBasedEmojiMap[hangul]) {
    console.log("ì •í™•í•œ ì¼ì¹˜ ë°œê²¬:", hangul);
    return wordBasedEmojiMap[hangul];
  }

  // ë™ì˜ì–´ í™•ì¸
  if (synonymMap[hangul] && wordBasedEmojiMap[synonymMap[hangul]]) {
    console.log("ë™ì˜ì–´ ë§¤í•‘ ë°œê²¬:", hangul, "->", synonymMap[hangul]);
    return wordBasedEmojiMap[synonymMap[hangul]];
  }

  // ë³µí•©ì–´ë‚˜ ì ‘ì‚¬ ì²˜ë¦¬
  if (hangul.length > 1) {
    // í•œê¸€ ë‹¨ì–´ ëì— ~í•˜ë‹¤, ~ë˜ë‹¤, ~ìŠ¤ëŸ½ë‹¤ ë“±ì˜ íŒ¨í„´ì„ ì²˜ë¦¬
    const verbPatterns = ["í•˜ë‹¤", "ë˜ë‹¤", "ìŠ¤ëŸ½ë‹¤", "ë‹µë‹¤", "ì "];
    for (const pattern of verbPatterns) {
      if (hangul.endsWith(pattern)) {
        const root = hangul.substring(0, hangul.length - pattern.length);
        console.log("ë™ì‚¬ íŒ¨í„´ ê°ì§€:", pattern, "ë£¨íŠ¸:", root);

        if (wordBasedEmojiMap[root]) {
          return wordBasedEmojiMap[root];
        }

        if (synonymMap[root] && wordBasedEmojiMap[synonymMap[root]]) {
          return wordBasedEmojiMap[synonymMap[root]];
        }
      }
    }

    // ëª…ì‚¬ + ëª…ì‚¬ ë³µí•©ì–´ ì²˜ë¦¬
    for (let i = 1; i < hangul.length; i++) {
      const part1 = hangul.substring(0, i);
      const part2 = hangul.substring(i);

      console.log("ë³µí•©ì–´ ë¶„ì„ ì¤‘:", part1, part2);

      // ê° ë¶€ë¶„ì„ ê°œë³„ì ìœ¼ë¡œ í™•ì¸
      if (wordBasedEmojiMap[part1]) {
        return wordBasedEmojiMap[part1];
      }

      if (wordBasedEmojiMap[part2]) {
        return wordBasedEmojiMap[part2];
      }
    }
  }

  // íŠ¹ë³„í•œ íŒ¨í„´ (ì˜ˆ: 'ê³ 'ë¡œ ì‹œì‘í•˜ëŠ” ë™ë¬¼ ì´ë¦„)
  if (hangul.startsWith("ê³ ") && !wordBasedEmojiMap[hangul]) {
    console.log("'ê³ 'ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ê°ì§€:", hangul);
    return wordBasedEmojiMap["ê³ ì–‘ì´"] || wordBasedEmojiMap["ê³ ê¸°"] || [];
  }

  // ì¹´í…Œê³ ë¦¬ ê¸°ë°˜ í™•ì¸
  const categories = [
    {
      keywords: ["ë¨¹", "ì‹", "ìš”ë¦¬", "ìš”ë¦¬ì‚¬", "ì£¼ë°©"],
      emojis: ["ğŸ½ï¸", "ğŸ´", "ğŸ•", "ğŸ", "ğŸœ"],
    },
    {
      keywords: ["ë™ë¬¼", "ì§ìŠ¹", "ìƒˆ"],
      emojis: ["ğŸ•", "ğŸˆ", "ğŸ…", "ğŸ˜", "ğŸ¦"],
    },
    {
      keywords: ["ìŠ¤í¬ì¸ ", "ìš´ë™", "ì²´ìœ¡"],
      emojis: ["âš½", "ğŸ€", "ğŸ¾", "ğŸ“", "ğŸ"],
    },
    {
      keywords: ["ìŒì•…", "ë…¸ë˜", "ì¶¤"],
      emojis: ["ğŸµ", "ğŸ¶", "ğŸ¤", "ğŸµ", "ğŸ¹"],
    },
    {
      keywords: ["í•™êµ", "í•™ìƒ", "ê³µë¶€", "êµìœ¡"],
      emojis: ["ğŸ“š", "âœï¸", "ğŸ“", "ğŸ§ ", "ğŸ“"],
    },
  ];

  for (const category of categories) {
    if (category.keywords.some((keyword) => hangul.includes(keyword))) {
      console.log("ì¹´í…Œê³ ë¦¬ í‚¤ì›Œë“œ ë§¤ì¹˜:", hangul);
      return category.emojis;
    }
  }

  console.log("ì´ëª¨ì§€ ì°¾ê¸° ì‹¤íŒ¨:", hangul);
  return ["â“", "ğŸ”", "ğŸ“–", "ğŸ”¤", "ğŸ²"];
}

/**
 * í•œê¸€ ë‹¨ì–´ì— ëŒ€í•œ ì´ëª¨ì§€ ì„ íƒ í•¨ìˆ˜
 * @param {string} word - ì´ëª¨ì§€ë¥¼ ì„ íƒí•  í•œê¸€ ë‹¨ì–´
 * @returns {string} - ì„ íƒëœ ì´ëª¨ì§€
 */
export function selectEmojiForWord(word) {
  if (!word) return "â“";

  const emojis = getEmojisForHangul(word);

  if (!emojis || emojis.length === 0) {
    console.log("ì´ëª¨ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:", word);
    return "â“";
  }

  // ëœë¤í•˜ê²Œ ì´ëª¨ì§€ ì„ íƒ
  const randomIndex = Math.floor(Math.random() * emojis.length);
  console.log(`ë‹¨ì–´ '${word}'ì— ëŒ€í•´ ì„ íƒëœ ì´ëª¨ì§€:`, emojis[randomIndex]);

  return emojis[randomIndex];
}
