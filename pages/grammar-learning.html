<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>문법 학습 - LikeVoca</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      .grammar-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      .grammar-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      }
      .pattern-example {
        position: relative;
        padding: 16px;
        background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
        border-radius: 8px;
        margin: 8px 0;
      }
      .pattern-highlight {
        background: linear-gradient(120deg, #a78bfa 0%, #8b5cf6 100%);
        color: white;
        padding: 2px 6px;
        border-radius: 4px;
        font-weight: 600;
      }
    </style>
  </head>

  <body class="bg-gray-50 min-h-screen">
    <!-- 네비게이션바 -->
    <div id="navbar-container"></div>

    <!-- 메인 콘텐츠 -->
    <main class="container mx-auto px-4 py-8 max-w-7xl">
      <!-- 페이지 헤더 -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <div class="flex items-center justify-between">
          <div>
            <h1 class="text-3xl font-bold text-gray-800 mb-2" data-i18n="grammar_learning_title">
              문법 학습
            </h1>
            <p class="text-gray-600" data-i18n="grammar_learning_subtitle">
              체계적인 문법 패턴 분석과 실습을 통해 언어 실력을 향상시키세요
            </p>
          </div>
          <div class="flex items-center space-x-3">
            <select id="target-language" class="p-2 border rounded-lg">
              <option value="english">영어</option>
              <option value="japanese">일본어</option>
              <option value="chinese">중국어</option>
            </select>
            <button
              id="refresh-patterns"
              class="bg-[#4B63AC] text-white px-4 py-2 rounded-lg hover:bg-[#3A4F8B] transition duration-300"
            >
              <i class="fas fa-sync-alt mr-2"></i>
              <span data-i18n="refresh">새로고침</span>
            </button>
          </div>
        </div>
      </div>

      <!-- 필터 섹션 -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">난이도</label>
            <select id="difficulty-filter" class="w-full p-2 border rounded-lg">
              <option value="all">전체</option>
              <option value="beginner">초급</option>
              <option value="intermediate">중급</option>
              <option value="advanced">고급</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">패턴 유형</label>
            <select id="pattern-type-filter" class="w-full p-2 border rounded-lg">
              <option value="all">전체</option>
              <option value="tense">시제</option>
              <option value="grammar">문법</option>
              <option value="expression">표현</option>
              <option value="conversation">회화</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">도메인</label>
            <select id="domain-filter" class="w-full p-2 border rounded-lg">
              <option value="all">전체</option>
              <option value="daily">일상</option>
              <option value="business">비즈니스</option>
              <option value="academic">학술</option>
              <option value="travel">여행</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">정렬</label>
            <select id="sort-patterns" class="w-full p-2 border rounded-lg">
              <option value="frequency">사용 빈도순</option>
              <option value="difficulty">난이도순</option>
              <option value="alphabetical">알파벳순</option>
              <option value="recent">최근 추가순</option>
            </select>
          </div>
        </div>
      </div>

      <!-- 문법 패턴 목록 -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6" id="grammar-patterns-container">
        <!-- 동적으로 채워짐 -->
      </div>

      <!-- 로딩 스피너 -->
      <div id="loading-spinner" class="text-center py-8 hidden">
        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#4B63AC]"></div>
        <p class="mt-2 text-gray-600" data-i18n="loading">로딩 중...</p>
      </div>

      <!-- 빈 상태 -->
      <div id="empty-state" class="text-center py-16 hidden">
        <div class="text-6xl mb-4">📚</div>
        <h3 class="text-xl font-semibold text-gray-800 mb-2">문법 패턴이 없습니다</h3>
        <p class="text-gray-600 mb-4">선택한 조건에 맞는 문법 패턴을 찾을 수 없습니다.</p>
        <button
          onclick="resetFilters()"
          class="bg-[#4B63AC] text-white px-6 py-3 rounded-lg hover:bg-[#3A4F8B] transition duration-300"
        >
          필터 초기화
        </button>
      </div>
    </main>

    <!-- 문법 패턴 상세 모달 -->
    <div id="pattern-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
      <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
          <div class="p-6 border-b">
            <div class="flex items-center justify-between">
              <h2 id="pattern-modal-title" class="text-2xl font-bold text-gray-800"></h2>
              <button
                onclick="closePatternModal()"
                class="text-gray-500 hover:text-gray-700"
              >
                <i class="fas fa-times text-xl"></i>
              </button>
            </div>
          </div>
          <div id="pattern-modal-content" class="p-6">
            <!-- 동적으로 채워짐 -->
          </div>
        </div>
      </div>
    </div>

    <!-- Firebase 및 스크립트 -->
    <script type="module" src="../js/firebase/firebase-init.js"></script>
    <script type="module" src="js/grammar-learning.js"></script>
  </body>
</html> 