# 데이터 업로드 방법 안내

## 📋 개요

이 가이드는 확장된 다국어 학습 시스템에 새로운 개념 데이터를 업로드하는 방법을 설명합니다. CSV와 JSON 두 가지 형식을 지원하며, 각각의 장단점과 사용 방법을 안내합니다.

## 🚀 빠른 시작

### 1단계: 업로드 모달 열기

- 메인 페이지에서 **"대량 개념 추가"** 버튼 클릭
- 또는 개념 목록 페이지에서 **"+"** 버튼 → **"대량 추가"** 선택

### 2단계: 파일 형식 선택

- **CSV**: 스프레드시트(Excel, Google Sheets)에서 작업하기 편리
- **JSON**: 복잡한 구조와 모든 기능을 완전히 지원

### 3단계: 템플릿 다운로드

- **"템플릿 다운로드"** 버튼 클릭
- 선택한 형식에 맞는 샘플 파일 다운로드

### 4단계: 데이터 입력

- 다운로드한 템플릿에 데이터 입력
- [데이터 구조 가이드](#데이터-구조-설명) 참조

### 5단계: 파일 업로드

- 완성된 파일을 드래그 앤 드롭하거나 **"파일 선택"** 클릭
- **"가져오기 시작"** 버튼 클릭

## 📊 CSV 형식 사용법

### 장점

- Excel, Google Sheets 등에서 쉽게 편집 가능
- 대량 데이터 입력에 적합
- 비개발자도 쉽게 사용 가능

### 제한사항

- 복잡한 구조의 일부 기능 제한
- 중첩된 데이터 표현의 제약

### CSV 필수 컬럼

| 컬럼명        | 설명          | 필수 여부 | 예시                     |
| ------------- | ------------- | --------- | ------------------------ |
| domain        | 개념 도메인   | 필수      | food, daily, nature      |
| category      | 개념 카테고리 | 필수      | fruit, greeting, weather |
| unicode_emoji | 대표 이모지   | 선택      | 🍎, 👋, ☀️               |
| korean_word   | 한국어 단어   | 필수      | 사과                     |
| english_word  | 영어 단어     | 필수      | apple                    |
| japanese_word | 일본어 단어   | 선택      | りんご                   |
| chinese_word  | 중국어 단어   | 선택      | 苹果                     |

### 🏷️ 문법 태그 컬럼 (새로 추가)

| 컬럼명                | 설명             | 필수 여부 | 예시                                            |
| --------------------- | ---------------- | --------- | ----------------------------------------------- |
| korean_grammar_tags   | 한국어 문법 태그 | 선택      | `noun\|noun_type:구체명사\|honorific:높임말`    |
| english_grammar_tags  | 영어 문법 태그   | 선택      | `noun\|noun_type:countable\|number:singular`    |
| japanese_grammar_tags | 일본어 문법 태그 | 선택      | `noun\|writing_system:ひらがな`                 |
| chinese_grammar_tags  | 중국어 문법 태그 | 선택      | `noun\|tone:二声三声\|classifier_type:个体量词` |

#### 문법 태그 작성 규칙

1. **구분자**: 파이프(|) 기호로 각 태그 구분
2. **품사**: 첫 번째 태그는 반드시 품사 (예: `noun`, `verb`, `adjective`)
3. **문법 특성**: `category:value` 형식 (예: `verb_type:규칙동사`)
4. **유효성**: 언어별 지원되는 태그만 사용 (자세한 내용은 [데이터 입력 표준 가이드](./데이터_입력_표준_가이드.md) 참조)

#### 문법 태그 예시

**한국어 예시:**

```
verb|verb_type:규칙동사|verb_class:타동사|honorific:존댓말
adjective|adj_type:성질형용사|honorific:평어
noun|noun_type:추상명사
```

**영어 예시:**

```
verb|verb_type:transitive|tense:past_tense|voice:active
adjective|comparison:comparative
noun|noun_type:uncountable|number:singular
```

**일본어 예시:**

```
verb_u|verb_type:他動詞|form:丁寧語
i_adjective|adj_conjugation:基本形
noun|writing_system:カタカナ
```

**중국어 예시:**

```
verb|verb_type:及物动词|aspect:完成
noun|tone:四声二声|classifier_type:个体量词
adjective|adj_type:性质形容词
```

## 📄 JSON 형식 사용법

### 장점

- 모든 데이터 구조를 완전히 지원
- 중첩된 객체와 배열 표현 가능
- 프로그래밍 친화적

### 제한사항

- JSON 문법에 대한 기본 이해 필요
- 실수 시 파싱 오류 발생 가능

### JSON 구조

```json
{
  "concepts": [
    {
      "concept_info": {
        "domain": "food",
        "category": "fruit",
        "difficulty": "basic",
        "unicode_emoji": "🍎"
      },
      "expressions": {
        "korean": {
          "word": "사과",
          "pronunciation": "sa-gwa",
          "definition": "둥글고 단맛이 나는 열매",
          "part_of_speech": "명사",
          "level": "초급",
          "grammar_tags": ["noun", "noun_type:구체명사"]
        },
        "english": {
          "word": "apple",
          "pronunciation": "ˈæpl",
          "definition": "a round fruit with firm, white flesh",
          "part_of_speech": "noun",
          "level": "beginner",
          "grammar_tags": ["noun", "noun_type:countable", "number:singular"]
        }
      }
    }
  ]
}
```

## 📝 데이터 구조 설명

### 개념 정보 (concept_info)

| 필드명         | 타입   | 설명            | 예시                          |
| -------------- | ------ | --------------- | ----------------------------- |
| domain         | string | 대분류 도메인   | food, daily, nature           |
| category       | string | 소분류 카테고리 | fruit, greeting, weather      |
| difficulty     | string | 개념 난이도     | basic, intermediate, advanced |
| tags           | array  | 개념 태그       | ["healthy", "common"]         |
| unicode_emoji  | string | 대표 이모지     | 🍎, 👋, ☀️                    |
| color_theme    | string | 색상 테마 (HEX) | #FF6B6B, #4A90E2              |
| quiz_frequency | string | 퀴즈 빈도       | low, medium, high, very_high  |

### 언어별 표현 (expressions)

#### 기본 필드

| 필드명           | 타입      | 설명                      | 예시                               |
| ---------------- | --------- | ------------------------- | ---------------------------------- |
| word             | string    | 핵심 단어/표현            | 사과, apple, りんご, 苹果          |
| pronunciation    | string    | 발음 표기                 | sa-gwa, ˈæpl, ringo, píng guǒ      |
| definition       | string    | 의미/정의                 | 둥글고 단맛이 나는 열매            |
| part_of_speech   | string    | 품사                      | 명사, noun, 名詞, 名词             |
| level            | string    | 언어별 난이도             | 초급, beginner, 初級, 初级         |
| **grammar_tags** | **array** | **문법 태그 (새로 추가)** | **["noun", "noun_type:구체명사"]** |

#### 확장 필드

| 필드명         | 타입  | 설명        | 예시                                             |
| -------------- | ----- | ----------- | ------------------------------------------------ |
| synonyms       | array | 동의어      | ["사과나무", "apple tree"]                       |
| antonyms       | array | 반의어      | []                                               |
| word_family    | array | 어족/관련어 | ["과일", "fruit"]                                |
| compound_words | array | 복합어      | ["사과나무", "apple juice"]                      |
| collocations   | array | 연어 표현   | [{"phrase": "사과를 먹다", "frequency": "high"}] |

### 예문 (examples)

#### 기본 예문

```json
"examples": [
  {
    "korean": "나는 사과를 좋아해요.",
    "english": "I like apples.",
    "japanese": "私はりんごが好きです。",
    "chinese": "我喜欢苹果。"
  }
]
```

#### 확장 예문 (featured_examples)

```json
"featured_examples": [
  {
    "level": "beginner",
    "context": "preference",
    "priority": 1,
    "unicode_emoji": "🍎",
    "translations": {
      "korean": {
        "text": "나는 사과를 좋아해요.",
        "grammar_notes": "현재 시제, 존댓말"
      },
      "english": {
        "text": "I like apples.",
        "grammar_notes": "Simple present tense"
      }
    }
  }
]
```

## 🔧 고급 기능

### 미디어 링크

```json
"media": {
  "images": {
    "primary_image": "https://example.com/apple.jpg",
    "secondary_image": "https://example.com/apple_variety.jpg"
  },
  "videos": {
    "intro_video": "https://example.com/apple_intro.mp4"
  },
  "audio": {
    "korean_audio": "https://example.com/apple_korean.mp3",
    "english_audio": "https://example.com/apple_english.mp3"
  }
}
```

### 퀴즈 메타데이터

```json
"quiz_data": {
  "question_types": ["translation", "pronunciation", "matching"],
  "difficulty_multiplier": 0.8,
  "hint": {
    "korean": "빨간색 또는 초록색 과일",
    "english": "Red or green fruit"
  }
}
```

### 게임 데이터

```json
"game_data": {
  "memory_cards": {
    "front_type": "word",
    "back_type": "definition"
  },
  "pronunciation_game": {
    "phonetic_focus": true
  }
}
```

## ⚠️ 주의사항

### 데이터 형식

- **UTF-8 인코딩** 사용 필수
- CSV에서 쉼표(,)나 따옴표(")가 포함된 텍스트는 큰따옴표로 감싸기
- JSON에서 백슬래시(\)나 따옴표는 이스케이프 처리

### 문법 태그 주의사항

- **언어별 지원 태그**: 각 언어에서 지원하는 품사와 문법 특성만 사용
- **필수 품사**: 첫 번째 태그는 반드시 품사여야 함
- **형식 준수**: `category:value` 형식을 정확히 지켜서 입력
- **구분자**: 파이프(|) 기호만 사용, 다른 구분자는 인식되지 않음

### 유효성 검사

업로드 시 다음 항목들이 자동으로 검증됩니다:

- 필수 필드 존재 여부
- 문법 태그 유효성 (언어별 지원 태그 확인)
- 데이터 형식 일관성
- 특수 문자 처리

## 🛠️ 문제 해결

### 업로드 실패 시

1. 파일 형식이 올바른지 확인 (.csv 또는 .json)
2. 필수 필드가 누락되지 않았는지 점검
3. 문법 태그 형식이 올바른지 확인
4. 특수 문자나 인코딩 문제 확인
5. 브라우저 콘솔에서 오류 메시지 확인

### 문법 태그 오류 시

1. **지원하지 않는 품사**: 해당 언어에서 지원하는 품사 목록 확인
2. **잘못된 형식**: `품사|특성:값` 형식 준수
3. **미지원 특성**: 언어별 지원되는 문법 특성 확인
4. **구분자 오류**: 파이프(|) 기호만 사용

### 데이터 누락 시

1. 템플릿과 입력 데이터 구조 비교
2. JSON 문법 검증기로 유효성 확인
3. 샘플 데이터와 비교하여 형식 점검

### 성능 최적화

1. 배치 크기를 적절히 조절 (100-500개 권장)
2. 네트워크 상태가 안정적일 때 업로드
3. 대용량 미디어 파일은 URL 링크 사용

## 📋 체크리스트

### 업로드 전 확인사항

- [ ] 파일 인코딩이 UTF-8인가?
- [ ] 필수 필드가 모두 입력되었는가?
- [ ] 문법 태그가 올바른 형식인가?
- [ ] 언어별 표기법을 준수했는가?
- [ ] 예문이 자연스럽고 적절한가?
- [ ] 미디어 링크가 유효한가?

### 품질 확인사항

- [ ] 번역의 정확성과 자연스러움
- [ ] 문법 정보의 정확성
- [ ] 난이도 설정의 일관성
- [ ] 데이터 구조의 완성도

## 📞 지원

문제가 발생하거나 추가 도움이 필요한 경우:

- 개발팀에 문의
- GitHub Issues에 버그 리포트
- 사용자 매뉴얼 참조

---

이 가이드를 따라 하시면 문법 태그 시스템을 포함한 고품질의 다국어 학습 데이터를 효율적으로 업로드할 수 있습니다. 궁금한 점이 있으시면 언제든 문의해 주세요!
