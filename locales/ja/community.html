<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LikeVocaã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ - å­¦ç¿’ã‚¬ã‚¤ãƒ‰ã€FAQã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</title>
    
    <meta name="description" content="LikeVocaã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§è¨€èªå­¦ç¿’ã‚¬ã‚¤ãƒ‰ã€ã‚ˆãã‚ã‚‹è³ªå•ï¼ˆFAQï¼‰ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã€ãŠçŸ¥ã‚‰ã›ã‚’ã”ç¢ºèªãã ã•ã„ã€‚åŠ¹æœçš„ãªè¨€èªå­¦ç¿’ã®ãŸã‚ã®åŒ…æ‹¬çš„ãªæƒ…å ±ã‚’æä¾›ã—ã¾ã™ã€‚" />
    <meta name="keywords" content="LikeVoca, ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£, è¨€èªå­¦ç¿’, å­¦ç¿’ã‚¬ã‚¤ãƒ‰, FAQ, ãƒãƒ‹ãƒ¥ã‚¢ãƒ«, ãŠçŸ¥ã‚‰ã›, å¤šè¨€èª, è‹±èª, æ—¥æœ¬èª, ä¸­å›½èª" />
    
    <!-- Open Graph ã‚¿ã‚° -->
    <meta property="og:title" content="LikeVocaã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ - å­¦ç¿’ã‚¬ã‚¤ãƒ‰ã€FAQã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«" />
    <meta property="og:description" content="LikeVocaã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§å­¦ç¿’ã‚¬ã‚¤ãƒ‰ã€FAQã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’ã”ç¢ºèªãã ã•ã„ã€‚" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://likevoca.com/ja/community.html" />
    <meta property="og:site_name" content="LikeVoca" />
    <meta property="og:locale" content="ja_JP" />
    
    <!-- Twitter Card ã‚¿ã‚° -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="LikeVocaã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ - å­¦ç¿’ã‚¬ã‚¤ãƒ‰ã€FAQã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«" />
    <meta name="twitter:description" content="LikeVocaã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§å­¦ç¿’ã‚¬ã‚¤ãƒ‰ã€FAQã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’ã”ç¢ºèªãã ã•ã„ã€‚" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://likevoca.com/ja/community.html" />
    
    <!-- Hreflang ã‚¿ã‚° -->
    <link rel="alternate" hreflang="ko" href="https://likevoca.com/ko/community.html" />
    <link rel="alternate" hreflang="en" href="https://likevoca.com/en/community.html" />
    <link rel="alternate" hreflang="ja" href="https://likevoca.com/ja/community.html" />
    <link rel="alternate" hreflang="zh" href="https://likevoca.com/zh/community.html" />
    <link rel="alternate" hreflang="es" href="https://likevoca.com/es/community.html" />
    <link rel="alternate" hreflang="x-default" href="https://likevoca.com/en/community.html" />
    
    <!-- JSON-LD æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "LikeVoca Community",
        "url": "https://likevoca.com/ja/community.html",
        "description": "LikeVocaã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§å­¦ç¿’ã‚¬ã‚¤ãƒ‰ã€FAQã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’ã”ç¢ºèªãã ã•ã„ã€‚",
        "inLanguage": "ja",
        "publisher": {
            "@type": "Organization",
            "name": "LikeVoca",
            "url": "https://likevoca.com"
        },
        "mainEntity": {
            "@type": "FAQPage",
            "name": "LikeVoca Community",
            "mainEntity": []
        }
    }
    </script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .content-card {
            transition: all 0.2s ease;
        }
        .content-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .loading-skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="navbar-container"></div>

    <main class="container mx-auto max-w-6xl px-4 md:px-6 lg:px-8 py-8 md:py-12">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">
                LikeVoca <span class="text-[#4B63AC]">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</span>
            </h1>
            <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">
                è¨€èªå­¦ç¿’ã«å½¹ç«‹ã¤ã‚¬ã‚¤ãƒ‰ã€ãƒ’ãƒ³ãƒˆã€ãŠçŸ¥ã‚‰ã›ã‚’ã”ç¢ºèªãã ã•ã„
            </p>
        </header>

        <!-- æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <div class="flex flex-col md:flex-row gap-4 items-center">
                <div class="flex-1">
                    <input 
                        type="text" 
                        id="searchInput" 
                        placeholder="æƒ…å ±ã‚’æ¤œç´¢..." 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B63AC]"
                    />
                </div>
                <div class="flex gap-2">
                    <select id="categoryFilter" class="px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B63AC]">
                        <option value="all">ã™ã¹ã¦ã®ã‚«ãƒ†ã‚´ãƒª</option>
                        <option value="notice">ãŠçŸ¥ã‚‰ã›</option>
                        <option value="guide">å­¦ç¿’ã‚¬ã‚¤ãƒ‰</option>
                        <option value="faq">ã‚ˆãã‚ã‚‹è³ªå•</option>
                        <option value="manual">ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</option>
                    </select>
                    <button id="searchBtn" class="bg-[#4B63AC] text-white px-6 py-3 rounded-lg hover:bg-[#3A4F8B] transition duration-200">
                        <i class="fas fa-search"></i>
                    </button>
                    <button id="refreshBtn" class="bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition duration-200" title="ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ›´æ–°">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- èª­ã¿è¾¼ã¿çŠ¶æ…‹ -->
        <div id="loading" class="text-center py-12">
            <i class="fas fa-spinner fa-spin text-3xl text-gray-400 mb-4"></i>
            <p class="text-gray-600" id="loadingText">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
            <div id="loadingDebug" class="mt-2 text-sm text-gray-500"></div>
        </div>
        
        <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¸€è¦§ -->
        <div id="contentList" class="space-y-6">
        </div>

        <!-- ç©ºã®çŠ¶æ…‹ -->
        <div id="emptyState" class="text-center py-12 hidden">
            <i class="fas fa-search text-6xl text-gray-300 mb-6"></i>
            <h3 class="text-xl font-semibold text-gray-700 mb-2">æ¤œç´¢çµæœãŒã‚ã‚Šã¾ã›ã‚“</h3>
            <p class="text-gray-500">ç•°ãªã‚‹æ¤œç´¢ç”¨èªã‚’ä½¿ç”¨ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
        </div>
    </main>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <div id="footer-container"></div>

    <!-- Firebase Config -->
    <script type="module" src="../../js/firebase/firebase-init.js"></script>
    
    <!-- ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script src="../../components/js/navbar.js"></script>
    <script src="../../components/js/footer.js"></script>
    
    <script type="module">
        import { applyLanguage, updateMetadata } from '../../utils/language-utils.js';
        
        let contentData = [];
        
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚’èª­ã¿è¾¼ã¿
                if (typeof window.loadNavbar === 'function') {
                    await window.loadNavbar();
                }
                
                // ãƒ•ãƒƒã‚¿ãƒ¼ã‚’èª­ã¿è¾¼ã¿
                if (typeof window.loadFooter === 'function') {
                    await window.loadFooter();
                }
                
                // è¨€èªã‚’é©ç”¨
                await applyLanguage();
                await updateMetadata('community');
                
                // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’èª­ã¿è¾¼ã¿
                await loadContentData();
                await displayContent();
                
                // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
                setupEventListeners();
                
            } catch (error) {
                console.error('ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒšãƒ¼ã‚¸ã®åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
                showError('ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚');
            }
        });

        // Firebaseã‚’åˆæœŸåŒ–ã—ã¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
        async function loadContentData() {
            try {
                // Loading content data from Firestore
                
                // FirebaseåˆæœŸåŒ–ã‚’å¾…æ©Ÿ
                await waitForFirebase();
                
                showLoading();
                
                // Firebaseé–¢æ•°ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                const { collection, query, orderBy, getDocs } = await import("https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js");
                
                if (!window.db) {
                    throw new Error('FirebaseåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                }
                
                // Firestoreã‹ã‚‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’èª­ã¿è¾¼ã¿
                const contentRef = collection(window.db, 'content');
                const contentQuery = query(contentRef, orderBy('createdAt', 'desc'));
                const snapshot = await getDocs(contentQuery);
                
                contentData = snapshot.docs
                    .map(doc => {
                        const data = doc.data();
                        // Content loaded
                        return {
                            id: doc.id,
                            ...data
                        };
                    })
                    .filter(item => {
                        // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒã¤å¤šè¨€èªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                        const hasVersions = item.versions && typeof item.versions === 'object';
                        const hasUserId = item.userId;
                        const isValidContentType = ['faq', 'guide', 'notice', 'manual'].includes(item.type);
                        
                        if (!hasVersions || !hasUserId || !isValidContentType) {
                            return false;
                        }
                        return true;
                    });

                // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒãªã„å ´åˆã¯ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ 
                if (contentData.length === 0) {
                    console.log('ğŸ“ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã‚ã‚Šã¾ã›ã‚“ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ');
                    
                    const currentTime = new Date().toISOString();
                    
                    contentData = [
                        {
                            id: 'sample_announcement_ja',
                            type: 'notice',
                            createdAt: currentTime,
                            updatedAt: currentTime,
                            versions: {
                                ja: {
                                    title: 'LikeVocaã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã‚ˆã†ã“ãï¼',
                                    content: '<div class="prose max-w-none"><h2>ğŸ‰ LikeVocaã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚ªãƒ¼ãƒ—ãƒ³ï¼</h2><p>è¨€èªå­¦ç¿’ã«å½¹ç«‹ã¤ã‚¬ã‚¤ãƒ‰ã‚„ãƒ’ãƒ³ãƒˆã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹æ–°ã—ã„ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚’ãŠçŸ¥ã‚‰ã›ã„ãŸã—ã¾ã™ã€‚</p><ul><li>å­¦ç¿’ã‚¬ã‚¤ãƒ‰ã¨æˆ¦ç•¥</li><li>æ–°æ©Ÿèƒ½ã®ãŠçŸ¥ã‚‰ã›</li><li>ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¨ãŠçŸ¥ã‚‰ã›</li></ul><p>ã‚ãªãŸã®è¨€èªå­¦ç¿’ã®æ—…ã«å½¹ç«‹ã¤æƒ…å ±ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ï¼</p></div>',
                                    published: true,
                                    lastModified: currentTime,
                                    translationStatus: 'updated'
                                }
                            }
                        }
                    ];
                }
                
                // Content data loaded
                hideLoading();
                
            } catch (error) {
                console.error('âŒ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿å¤±æ•—:', error);
                hideLoading();
                showError('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
            }
        }

        // FirebaseåˆæœŸåŒ–ã‚’å¾…æ©Ÿ
        async function waitForFirebase() {
            let attempts = 0;
            const maxAttempts = 50;
            
            while (!window.db && attempts < maxAttempts) {
                console.log(`â³ FirebaseåˆæœŸåŒ–ã‚’å¾…æ©Ÿä¸­... (${attempts + 1}/${maxAttempts})`);
                await new Promise(resolve => setTimeout(resolve, 200));
                attempts++;
            }
            
            if (!window.db) {
                throw new Error('FirebaseåˆæœŸåŒ–ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ');
            }
            
            console.log('âœ… FirebaseåˆæœŸåŒ–æˆåŠŸ');
        }

        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
        async function displayContent() {
            // Displaying content
            
            const contentList = document.getElementById('contentList');
            const emptyState = document.getElementById('emptyState');
            const searchInput = document.getElementById('searchInput');
            const categoryFilterElement = document.getElementById('categoryFilter');
            
            if (!searchInput || !categoryFilterElement) {
                console.error('âŒ å¿…è¦ãªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                return;
            }
            
            const searchTerm = searchInput.value.toLowerCase();
            const categoryFilter = categoryFilterElement.value;
            
            // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
            let filteredContent = contentData.filter(item => {
                // ã€Œå…¬é–‹ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã¿è¡¨ç¤º
                if (item.status !== 'published') return false;
                
                const versions = item.versions || {};
                const version = versions.ja;
                if (!version || !version.title || !version.content) return false;
                
                // ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                if (categoryFilter !== 'all' && item.type !== categoryFilter) return false;
                
                // æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                if (searchTerm) {
                    const titleMatch = (version.title || '').toLowerCase().includes(searchTerm);
                    const contentMatch = (version.content || '').toLowerCase().includes(searchTerm);
                    if (!titleMatch && !contentMatch) return false;
                }
                
                return true;
            });
            
            if (filteredContent.length === 0) {
                contentList.innerHTML = '';
                emptyState.classList.remove('hidden');
            } else {
                renderContent(filteredContent);
                emptyState.classList.add('hidden');
            }
        }

        // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚«ãƒ¼ãƒ‰ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderContent(content) {
            const contentList = document.getElementById('contentList');
            
            const typeIcons = {
                faq: 'fa-question-circle',
                manual: 'fa-book',
                guide: 'fa-lightbulb',
                notice: 'fa-bullhorn'
            };
            
            const typeNames = {
                faq: 'ã‚ˆãã‚ã‚‹è³ªå•',
                manual: 'ãƒãƒ‹ãƒ¥ã‚¢ãƒ«',
                guide: 'å­¦ç¿’ã‚¬ã‚¤ãƒ‰',
                notice: 'ãŠçŸ¥ã‚‰ã›'
            };

            contentList.innerHTML = content.map(item => {
                const version = item.versions.ja || {};
                const typeIcon = typeIcons[item.type] || 'fa-file-alt';
                const typeName = typeNames[item.type] || item.type;
                
                return `
                    <article class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition duration-300">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 rounded-lg bg-[#4B63AC] bg-opacity-10 flex items-center justify-center">
                                    <i class="fas ${typeIcon} text-[#4B63AC] text-lg"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-1">
                                        ${version.title || 'ã‚¿ã‚¤ãƒˆãƒ«ãªã—'}
                                    </h3>
                                    <div class="flex items-center space-x-3">
                                        <span class="text-sm text-gray-500">${typeName}</span>
                                        <span class="text-sm text-gray-400">${formatDate(item.updatedAt || item.createdAt)}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-gray-600 mb-4">
                            ${stripHtml(version.content || '').substring(0, 150) + '...'}
                        </div>
                        
                        <a href="content-detail.html?id=${item.id}" class="inline-flex items-center text-[#4B63AC] hover:text-[#3A4F8B] font-medium transition duration-200">
                            <i class="fas fa-arrow-right mr-2"></i>
                            ç¶šãã‚’èª­ã‚€
                        </a>
                    </article>
                    </div>
                `;
            }).join('');
        }

        // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å±•é–‹ã‚’ãƒˆã‚°ãƒ«
        window.toggleContent = function(contentId) {
            const element = document.getElementById(contentId);
            const button = element.previousElementSibling.querySelector('button');
            const icon = button.querySelector('i.fa-chevron-down, i.fa-chevron-up');
            
            if (element.classList.contains('hidden')) {
                element.classList.remove('hidden');
                button.innerHTML = 'é–‰ã˜ã‚‹ <i class="fas fa-chevron-up ml-1"></i>';
            } else {
                element.classList.add('hidden');
                button.innerHTML = 'ç¶šãã‚’èª­ã‚€ <i class="fas fa-chevron-down ml-1"></i>';
            }
        };

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
        function setupEventListeners() {
            const searchBtn = document.getElementById('searchBtn');
            const searchInput = document.getElementById('searchInput');
            const categoryFilter = document.getElementById('categoryFilter');
            const refreshBtn = document.getElementById('refreshBtn');
            
            if (searchBtn) searchBtn.addEventListener('click', displayContent);
            if (searchInput) searchInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') displayContent();
            });
            if (categoryFilter) categoryFilter.addEventListener('change', displayContent);
            if (refreshBtn) refreshBtn.addEventListener('click', async () => {
                await loadContentData();
                await displayContent();
                showSuccess('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒæ­£å¸¸ã«æ›´æ–°ã•ã‚Œã¾ã—ãŸï¼');
            });
        }

        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
        function showLoading() {
            document.getElementById('loading').classList.remove('hidden');
            document.getElementById('contentList').innerHTML = '';
            document.getElementById('emptyState').classList.add('hidden');
        }

        function hideLoading() {
            document.getElementById('loading').classList.add('hidden');
        }

        function stripHtml(html) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = html;
            return tempDiv.textContent || tempDiv.innerText || '';
        }

        function formatDate(dateValue) {
            if (!dateValue) return '-';
            
            let date;
            // Firestore Timestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
            if (dateValue.toDate && typeof dateValue.toDate === 'function') {
                date = dateValue.toDate();
            }
            // æ—¢ã«Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¾ãŸã¯æ–‡å­—åˆ—
            else {
                date = new Date(dateValue);
            }
            
            if (isNaN(date.getTime())) return '-';
            
            return date.toLocaleDateString('ja-JP', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        function showError(message) {
            const contentList = document.getElementById('contentList');
            contentList.innerHTML = `
                <div class="text-center py-12">
                    <i class="fas fa-exclamation-triangle text-4xl text-red-400 mb-4"></i>
                    <p class="text-red-600">${message}</p>
                </div>
            `;
        }

        function showSuccess(message) {
            // ã‚·ãƒ³ãƒ—ãƒ«ãªãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥
            const toast = document.createElement('div');
            toast.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            toast.innerHTML = `<i class="fas fa-check mr-2"></i>${message}`;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
    </script>
</body>
</html>