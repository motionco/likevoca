<nav class="bg-[#4B63AC] p-4 shadow-md">
  <div class="container mx-auto flex justify-between items-center max-w-6xl">
    <!-- ì™¼ìª½: í–„ë²„ê±° ë©”ë‰´ (ëª¨ë°”ì¼) + ë¡œê³  -->
    <div class="flex items-center">
    <button
      id="menu-toggle"
        class="text-white text-2xl lg:hidden mr-3"
    >
      <i class="fa-solid fa-bars"></i>
    </button>

      <a
        href="index.html"
        class="text-white text-xl md:text-2xl lg:text-3xl font-bold"
        >LikeVoca</a
      >
    </div>

    <!-- ì¤‘ì•™: ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ (ë°ìŠ¤í¬í†±ë§Œ) -->
    <ul id="nav-menu" class="hidden lg:flex space-x-10 items-center">
      <li>
        <a href="vocabulary.html" class="text-xl text-white hover:text-yellow-400" data-i18n="vocabulary">è¯æ±‡è¡¨</a>
      </li>
      <li>
        <a href="ai-vocabulary.html" class="text-xl text-white hover:text-yellow-400" data-i18n="ai_vocabulary">AIè¯æ±‡è¡¨</a>
      </li>
      <li>
        <a href="quiz.html" class="text-xl text-white hover:text-yellow-400" data-i18n="quiz">æµ‹éªŒ</a>
      </li>
      <li>
        <a href="games.html" class="text-xl text-white hover:text-yellow-400" data-i18n="games">æ¸¸æˆ</a>
      </li>
      <li>
        <a href="learning.html" class="text-xl text-white hover:text-yellow-400" data-i18n="learning_title">å­¦ä¹ </a>
      </li>
      <li>
        <a href="progress.html" class="text-xl text-white hover:text-yellow-400" data-i18n="progress">è¿›åº¦</a>
      </li>
      <li>
        <a href="inquiry.html" class="text-xl text-white hover:text-yellow-400" data-i18n="inquiry">è”ç³»æˆ‘ä»¬</a>
      </li>
    </ul>

    <!-- ì˜¤ë¥¸ìª½: ì–¸ì–´ ì„¤ì • + ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ + ìœ ì € í”„ë¡œí•„ -->
    <div class="flex items-center space-x-1.5 lg:space-x-3">
      <!-- ì–¸ì–´ ì„¤ì • ë²„íŠ¼ (ë°˜ì‘í˜•) -->
      <button
        id="language-button"
        class="
          text-white font-semibold transition duration-300
          lg:border-2 lg:border-white lg:bg-[#4B63AC] lg:px-3 lg:py-2 lg:rounded-lg lg:hover:bg-white lg:hover:text-[#4B63AC]
          hover:text-yellow-400 lg:hover:text-[#4B63AC]
          text-xl lg:text-base
          p-2 lg:p-2
        "
      >
        <i class="fas fa-globe lg:mr-1"></i>
        <span class="inline lg:ml-1">ğŸ‡¨ğŸ‡³</span>
      </button>

      <!-- Desktop: ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ (ë¡œê·¸ì¸ ì „) -->
      <div id="desktop-login-section" class="hidden lg:flex space-x-2">
        <a
          href="#"
          id="login-button"
          onclick="goToLanguageSpecificPage('login.html')"
          class="border-2 border-white bg-[#4B63AC] text-white font-semibold px-4 py-1.5 text-sm rounded-lg hover:bg-white hover:text-[#4B63AC] transition duration-300"
          data-i18n="login"
          >ç™»å½•</a
        >
        <a
          href="#"
          id="signup-button"
          onclick="goToLanguageSpecificPage('signup.html')"
          class="border-2 border-white bg-white text-[#4B63AC] font-semibold px-4 py-1.5 text-sm rounded-lg hover:bg-[#4B63AC] hover:text-white transition duration-300"
          data-i18n="signup"
          >æ³¨å†Œ</a
        >
    </div>

      <!-- ìœ ì € í”„ë¡œí•„ (ë°˜ì‘í˜•) -->
      <div id="desktop-user-section" class="hidden lg:flex items-center">
    <div
      id="user-profile"
          class="relative flex items-center text-white"
    >
          <div id="avatar-container" class="cursor-pointer">
        <div
          id="avatar"
              class="w-8 h-8 lg:w-10 lg:h-10 rounded-full overflow-hidden border-2 border-white"
        >
          <img id="profile-image" src="" alt="ä¸ªäººèµ„æ–™" class="w-full h-full object-cover" />
        </div>
      </div>

      <div
        id="profile-dropdown"
            class="hidden absolute top-12 right-0 bg-white shadow-lg rounded-lg py-2 w-48 text-gray-900 z-50"
      >
        <div class="px-4 py-2 font-semibold border-b border-gray-200">
          <span id="user-name"></span>
        </div>
            <a
              href="my-word-list.html"
              class="block w-full text-left px-4 py-2 hover:bg-gray-100"
              data-i18n="wordbook"
              data-i18n-link="my-word-list.html"
            >
              æˆ‘çš„å•è¯æœ¬
            </a>
            <a
              href="profile.html"
              class="block w-full text-left px-4 py-2 hover:bg-gray-100"
              data-i18n="profile"
              data-i18n-link="profile.html"
        >
              ä¸ªäººèµ„æ–™
            </a>
        <button
          id="logout-button"
          class="block w-full text-left px-4 py-2 hover:bg-gray-100"
          data-i18n="logout"
        >
          é€€å‡ºç™»å½•
        </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    id="mobile-menu"
    class="hidden flex flex-col items-center space-y-4 bg-[#4B63AC] text-white p-3 lg:hidden"
  >
    <a href="vocabulary.html" class="text-lg hover:text-yellow-400" data-i18n="vocabulary">è¯æ±‡è¡¨</a>
    <a href="ai-vocabulary.html" class="text-lg hover:text-yellow-400" data-i18n="ai_vocabulary">AIè¯æ±‡è¡¨</a>
    <a href="quiz.html" class="text-lg hover:text-yellow-400" data-i18n="quiz">æµ‹éªŒ</a>
    <a href="games.html" class="text-lg hover:text-yellow-400" data-i18n="games">æ¸¸æˆ</a>
    <a href="learning.html" class="text-lg hover:text-yellow-400" data-i18n="learning_title">å­¦ä¹ </a>
    <a href="progress.html" class="text-lg hover:text-yellow-400" data-i18n="progress">è¿›åº¦</a>
    <a href="inquiry.html" class="text-lg hover:text-yellow-400" data-i18n="inquiry">è”ç³»æˆ‘ä»¬</a>

    <!-- ëª¨ë°”ì¼ ë¡œê·¸ì¸ ë²„íŠ¼ë“¤ -->
    <div id="mobile-login-buttons" class="hidden flex space-x-3">
      <a
        href="#"
        onclick="goToLanguageSpecificPage('login.html')"
        class="border-2 border-white bg-[#4B63AC] text-white font-semibold px-5 py-2 text-sm rounded-lg hover:bg-white hover:text-[#4B63AC] transition duration-300"
        data-i18n="login"
        >ç™»å½•</a
      >
      <a
        href="#"
        onclick="goToLanguageSpecificPage('signup.html')"
        class="border-2 border-white bg-[#4B63AC] text-white font-semibold px-5 py-2 text-sm rounded-lg hover:bg-white hover:text-[#4B63AC] transition duration-300"
        data-i18n="signup"
        >æ³¨å†Œ</a
      >
    </div>

    <!-- ëª¨ë°”ì¼ ì‚¬ìš©ì í”„ë¡œí•„ -->
    <div id="mobile-user-section" class="hidden flex-col items-center space-y-2">
      <div class="flex items-center space-x-2">
        <div id="mobile-avatar" class="w-8 h-8 rounded-full overflow-hidden border-2 border-white">
          <img id="mobile-profile-image" src="" alt="ä¸ªäººèµ„æ–™" class="w-full h-full object-cover" />
        </div>
        <span id="mobile-user-name" class="text-white font-semibold"></span>
      </div>
      <div class="flex space-x-3">
        <a
          href="my-word-list.html"
          class="text-white hover:text-yellow-400"
          data-i18n="wordbook"
          data-i18n-link="my-word-list.html"
        >
          æˆ‘çš„å•è¯æœ¬
        </a>
        <a
          href="profile.html"
          class="text-white hover:text-yellow-400"
          data-i18n="profile"
          data-i18n-link="profile.html"
        >
          ä¸ªäººèµ„æ–™
        </a>
        <button
          id="mobile-logout-button"
          class="text-white hover:text-yellow-400"
          data-i18n="logout"
        >
          é€€å‡ºç™»å½•
        </button>
      </div>
    </div>

  </div>
</nav>

<script>
// ê°œë°œ í™˜ê²½ ê°ì§€
function isDevelopment() {
    return window.location.hostname === 'localhost' || 
           window.location.hostname === '127.0.0.1' ||
           window.location.port === '5500';
}

// í˜„ì¬ ì–¸ì–´ ê°ì§€
function getCurrentLanguage() {
    const path = window.location.pathname;
    const langMatch = path.match(/\/(ko|en|ja|zh)\//);
    return langMatch ? langMatch[1] : 'ko';
}

// í˜ì´ì§€ ì´ë™ í•¨ìˆ˜
function goToPage(filename) {
    const currentLang = getCurrentLanguage();
    
    if (isDevelopment()) {
        window.location.href = `/locales/${currentLang}/${filename}`;
    } else {
        window.location.href = `/${currentLang}/${filename}`;
    }
}

// í™ˆìœ¼ë¡œ ì´ë™
function goToHome() {
    const currentLang = getCurrentLanguage();
    
    if (isDevelopment()) {
        window.location.href = `/locales/${currentLang}/index.html`;
    } else {
        window.location.href = `/${currentLang}/index.html`;
    }
}

// ë£¨íŠ¸ íŒŒì¼ë¡œ ì´ë™ (ë¡œê·¸ì¸, íšŒì›ê°€ì…, í”„ë¡œí•„)
function goToRoot(filename) {
    window.location.href = `/${filename}`;
}

// ì–¸ì–´ë³„ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” í•¨ìˆ˜
function goToLanguageSpecificPage(filename) {
  const userLanguage = localStorage.getItem('userLanguage') || 'ko';
  const isDev = window.location.hostname === 'localhost' || 
               window.location.hostname === '127.0.0.1' ||
               window.location.port === '5500';
  
  if (isDev) {
    window.location.href = `/locales/${userLanguage}/${filename}`;
  } else {
    window.location.href = `/${userLanguage}/${filename}`;
  }
}

// ë„¤ë¹„ê²Œì´ì…˜ë°” ì´ˆê¸°í™” í•¨ìˆ˜
function initializeNavbar() {
  console.log('ğŸ”§ initializeNavbar í•¨ìˆ˜ ì‹¤í–‰');
  
  // navbar.jsì˜ ì´ˆê¸°í™” í•¨ìˆ˜ë“¤ì´ ì´ë¯¸ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
  if (typeof window.setupNavbarAuth === 'function') {
    window.setupNavbarAuth();
  }
  
  if (typeof window.setupNavbarEvents === 'function') {
    window.setupNavbarEvents();
  }
}

// DOMì´ ë¡œë“œëœ í›„ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
  console.log('ğŸ“ navbar.html DOM ë¡œë“œ ì™„ë£Œ');
  initializeNavbar();
});
</script>


