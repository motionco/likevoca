<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LikeVoca ì»¤ë®¤ë‹ˆí‹° - í•™ìŠµ ê°€ì´ë“œ, FAQ, ë§¤ë‰´ì–¼</title>

    <meta name="description"
        content="LikeVoca ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ì–¸ì–´ í•™ìŠµ ê°€ì´ë“œ, ìì£¼ ë¬»ëŠ” ì§ˆë¬¸(FAQ), ì‚¬ìš©ì ë§¤ë‰´ì–¼ ë° ê³µì§€ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”. íš¨ê³¼ì ì¸ ì–¸ì–´ í•™ìŠµì„ ìœ„í•œ ë‹¤ì–‘í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤." />
    <meta name="keywords" content="LikeVoca, ì»¤ë®¤ë‹ˆí‹°, ì–¸ì–´í•™ìŠµ, í•™ìŠµê°€ì´ë“œ, FAQ, ë§¤ë‰´ì–¼, ê³µì§€ì‚¬í•­, ë‹¤êµ­ì–´, ì˜ì–´, ì¼ë³¸ì–´, ì¤‘êµ­ì–´" />

    <!-- Open Graph íƒœê·¸ -->
    <meta property="og:title" content="LikeVoca ì»¤ë®¤ë‹ˆí‹° - í•™ìŠµ ê°€ì´ë“œ, FAQ, ë§¤ë‰´ì–¼" />
    <meta property="og:description" content="LikeVoca ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ì–¸ì–´ í•™ìŠµ ê°€ì´ë“œ, FAQ, ë§¤ë‰´ì–¼ì„ í™•ì¸í•˜ì„¸ìš”." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.likevoca.com/ko/community.html" />
    <meta property="og:site_name" content="LikeVoca" />
    <meta property="og:locale" content="ko_KR" />
    <meta property="og:image" content="https://www.likevoca.com/assets/hero.webp" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="LikeVoca ì»¤ë®¤ë‹ˆí‹° - í•™ìŠµ ê°€ì´ë“œ, FAQ, ë§¤ë‰´ì–¼" />

    <!-- Twitter Card íƒœê·¸ -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="LikeVoca ì»¤ë®¤ë‹ˆí‹° - í•™ìŠµ ê°€ì´ë“œ, FAQ, ë§¤ë‰´ì–¼" />
    <meta name="twitter:description" content="LikeVoca ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ì–¸ì–´ í•™ìŠµ ê°€ì´ë“œ, FAQ, ë§¤ë‰´ì–¼ì„ í™•ì¸í•˜ì„¸ìš”." />
    <meta name="twitter:image" content="https://www.likevoca.com/assets/hero.webp" />
    <meta name="twitter:image:alt" content="LikeVoca ì»¤ë®¤ë‹ˆí‹° - í•™ìŠµ ê°€ì´ë“œ, FAQ, ë§¤ë‰´ì–¼" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://likevoca.com/ko/community.html" />

    <!-- Hreflang íƒœê·¸ -->
    <link rel="alternate" hreflang="ko" href="https://likevoca.com/ko/community.html" />
    <link rel="alternate" hreflang="en" href="https://likevoca.com/en/community.html" />
    <link rel="alternate" hreflang="ja" href="https://likevoca.com/ja/community.html" />
    <link rel="alternate" hreflang="zh" href="https://likevoca.com/zh/community.html" />
    <link rel="alternate" hreflang="es" href="https://likevoca.com/es/community.html" />
    <link rel="alternate" hreflang="x-default" href="https://likevoca.com/en/community.html" />

    <!-- JSON-LD êµ¬ì¡°í™” ë°ì´í„° -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "LikeVoca Community",
        "url": "https://likevoca.com/ko/community.html",
        "description": "LikeVoca ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ì–¸ì–´ í•™ìŠµ ê°€ì´ë“œ, FAQ, ë§¤ë‰´ì–¼ì„ í™•ì¸í•˜ì„¸ìš”.",
        "inLanguage": "ko",
        "publisher": {
            "@type": "Organization",
            "name": "LikeVoca",
            "url": "https://likevoca.com"
        },
        "mainEntity": {
            "@type": "FAQPage",
            "mainEntity": []
        }
    }
    </script>

    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link rel="stylesheet" href="../../css/style.css" />

    <!-- Firebase ì´ˆê¸°í™” -->
    <script type="module" src="../../js/firebase/firebase-init.js"></script>

    <!-- Firebase ì´ˆê¸°í™” ë””ë²„ê¹… -->
    <script>
        // Firebase ì´ˆê¸°í™” ìƒíƒœ ëª¨ë‹ˆí„°ë§
        function monitorFirebaseInit() {
            let checkCount = 0;
            const maxChecks = 100; // 10ì´ˆ (100ms * 100)

            const interval = setInterval(() => {
                checkCount++;
                console.log(`ğŸ” Firebase ìƒíƒœ ì²´í¬ #${checkCount}:`, {
                    'window.db': !!window.db,
                    'window.auth': !!window.auth,
                    'window.firebaseInit': !!window.firebaseInit
                });

                if (window.db && window.auth) {
                    console.log('âœ… Firebase ì´ˆê¸°í™” ì„±ê³µ!');
                    clearInterval(interval);
                } else if (checkCount >= maxChecks) {
                    console.error('âŒ Firebase ì´ˆê¸°í™” íƒ€ì„ì•„ì›ƒ - 10ì´ˆ ê²½ê³¼');
                    console.log('ìµœì¢… ì „ì—­ ê°ì²´ ìƒíƒœ:', {
                        'typeof window.db': typeof window.db,
                        'typeof window.auth': typeof window.auth,
                        'window ê°ì²´ í‚¤ë“¤': Object.keys(window).filter(key => key.includes('fire') || key.includes('db') || key.includes('auth'))
                    });
                    clearInterval(interval);
                }
            }, 100);
        }

        // DOM ë¡œë“œ í›„ ëª¨ë‹ˆí„°ë§ ì‹œì‘
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸš€ DOM ë¡œë“œ ì™„ë£Œ - Firebase ì´ˆê¸°í™” ëª¨ë‹ˆí„°ë§ ì‹œì‘');
            monitorFirebaseInit();
        });
    </script>
</head>

<body class="bg-gray-50">
    <div id="navbar-container"></div>

    <main class="container mx-auto max-w-6xl px-4 md:px-6 lg:px-8 py-8 md:py-12">
        <!-- í—¤ë” ì„¹ì…˜ -->
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">
                LikeVoca <span class="text-[#4B63AC]">ì»¤ë®¤ë‹ˆí‹°</span>
            </h1>
            <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">
                ì–¸ì–´í•™ìŠµì— ë„ì›€ì´ ë˜ëŠ” ê°€ì´ë“œ, íŒ, ê³µì§€ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”
            </p>
        </header>

        <!-- ê²€ìƒ‰ ë° í•„í„° -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <div class="flex flex-col md:flex-row gap-4 items-center">
                <div class="flex-1">
                    <input type="text" id="searchInput" placeholder="ê¶ê¸ˆí•œ ë‚´ìš©ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”..."
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B63AC]" />
                </div>
                <div class="flex gap-2">
                    <select id="categoryFilter"
                        class="px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B63AC]">
                        <option value="all">ì „ì²´ ì¹´í…Œê³ ë¦¬</option>
                        <option value="notice">ê³µì§€ì‚¬í•­</option>
                        <option value="guide">í•™ìŠµ ê°€ì´ë“œ</option>
                        <option value="faq">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</option>
                        <option value="manual">ì‚¬ìš©ì ë§¤ë‰´ì–¼</option>
                    </select>
                    <button id="searchBtn"
                        class="bg-[#4B63AC] text-white px-6 py-3 rounded-lg hover:bg-[#3A4F8B] transition duration-200">
                        <i class="fas fa-search"></i>
                    </button>
                    <button id="refreshBtn"
                        class="bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition duration-200"
                        title="ì½˜í…ì¸  ìƒˆë¡œê³ ì¹¨">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- ë¡œë”© ìƒíƒœ -->
        <div id="loading" class="text-center py-12">
            <i class="fas fa-spinner fa-spin text-3xl text-gray-400 mb-4"></i>
            <p class="text-gray-600" id="loadingText">ì½˜í…ì¸ ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            <div id="loadingDebug" class="mt-2 text-sm text-gray-500"></div>
        </div>

        <!-- ì½˜í…ì¸  ëª©ë¡ -->
        <div id="contentList" class="space-y-6">
        </div>

        <!-- ë¹ˆ ìƒíƒœ -->
        <div id="emptyState" class="text-center py-12 hidden">
            <i class="fas fa-search text-6xl text-gray-300 mb-6"></i>
            <h3 class="text-xl font-semibold text-gray-700 mb-2">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
            <p class="text-gray-500">ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”.</p>
        </div>
    </main>

    <!-- Footer -->
    <div id="footer-container"></div>

    <!-- Scripts -->
    <script src="../../components/js/navbar.js"></script>
    <script src="../../components/js/footer.js"></script>

    <script type="module">
        import { applyLanguage, updateMetadata } from '../../utils/language-utils.js';

        let contentData = [];

        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // ë„¤ë¹„ê²Œì´ì…˜ë°” ë¡œë“œ
                if (typeof window.loadNavbar === 'function') {
                    await window.loadNavbar();
                }

                // Footer ë¡œë“œ
                if (typeof window.loadFooter === 'function') {
                    await window.loadFooter();
                }

                // ì–¸ì–´ ì ìš©
                await applyLanguage();
                await updateMetadata('community');

                // ì½˜í…ì¸  ë¡œë“œ
                await loadContentData();
                await displayContent();

                // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
                setupEventListeners();

            } catch (error) {
                console.error('ì»¤ë®¤ë‹ˆí‹° í˜ì´ì§€ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜:', error);
                showError('í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        });

        // ì½˜í…ì¸  ë°ì´í„° ë¡œë“œ (Firestore ì „ìš©)
        // ë¡œë”© ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateLoadingStatus(message, debug = '') {
            const loadingText = document.getElementById('loadingText');
            const loadingDebug = document.getElementById('loadingDebug');
            if (loadingText) loadingText.textContent = message;
            if (loadingDebug) loadingDebug.textContent = debug;
            // ë¡œê·¸ ì œê±°ë¨
        }

        async function loadContentData() {
            try {
                console.log('ğŸ“Š ì½˜í…ì¸  ë°ì´í„° ë¡œë“œ ì‹œë„... (Firestore)');
                // Firebase ì´ˆê¸°í™” í™•ì¸ ë° ëŒ€ê¸°
                if (!window.db || !window.auth) {
                    let attempts = 0;
                    const maxAttempts = 100; // 10ì´ˆ (100ms * 100)

                    await new Promise((resolve, reject) => {
                        const checkFirebase = setInterval(() => {
                            attempts++;

                            if (window.db && window.auth) {
                                clearInterval(checkFirebase);
                                console.log('âœ… Firebase ì´ˆê¸°í™” ì™„ë£Œ! dbì™€ auth ëª¨ë‘ ì¤€ë¹„ë¨');
                                resolve();
                            } else if (attempts >= maxAttempts) {
                                clearInterval(checkFirebase);
                                console.error('âŒ Firebase ì´ˆê¸°í™” íƒ€ì„ì•„ì›ƒ (10ì´ˆ ê²½ê³¼)');
                                console.log('ìµœì¢… ìƒíƒœ - window.db:', !!window.db, 'window.auth:', !!window.auth);
                                console.log('Firebase ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ìƒíƒœ:', {
                                    'firebase script element': document.querySelector('script[src*="firebase-init"]'),
                                    'window.firebaseInit': !!window.firebaseInit,
                                    'window keys with firebase/db/auth': Object.keys(window).filter(key =>
                                        key.toLowerCase().includes('firebase') ||
                                        key.toLowerCase().includes('db') ||
                                        key.toLowerCase().includes('auth')
                                    )
                                });

                                // íƒ€ì„ì•„ì›ƒ ì‹œì—ë„ ê³„ì† ì§„í–‰ (ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©)
                                console.log('ğŸ”„ Firebase ì—†ì´ ìƒ˜í”Œ ë°ì´í„°ë¡œ ê³„ì† ì§„í–‰...');
                                resolve();
                            } else if (attempts % 20 === 0) {
                                console.log(`ğŸ”„ Firebase ëŒ€ê¸° ì¤‘... (${attempts}/${maxAttempts}) db:${!!window.db} auth:${!!window.auth}`);
                                // Firebase ì—°ê²° ëŒ€ê¸° ì¤‘
                            }
                        }, 100);
                    });
                } else {
                    console.log('âœ… FirebaseëŠ” ì´ë¯¸ ì´ˆê¸°í™”ë˜ì–´ ìˆìŒ');
                }

                // Firestoreì—ì„œ ì½˜í…ì¸  ë¡œë“œ ì‹œë„
                if (window.db) {
                    // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì½˜í…ì¸  ë¡œë“œ ì¤‘
                    try {
                        const { collection, query, orderBy, getDocs } = await import("https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js");

                        const contentRef = collection(window.db, 'content');
                        const contentQuery = query(contentRef, orderBy('createdAt', 'desc'));
                        const snapshot = await getDocs(contentQuery);

                        contentData = snapshot.docs
                            .map(doc => ({
                                id: doc.id,
                                ...doc.data()
                            }))
                            .filter(item => {
                                // ì‚¬ìš©ìê°€ ì‘ì„±í•œ ë‹¤êµ­ì–´ ì½˜í…ì¸ ë§Œ í‘œì‹œ
                                const hasVersions = item.versions && typeof item.versions === 'object';
                                const hasUserId = item.userId; // ì‚¬ìš©ìê°€ ì‘ì„±í•œ ì½˜í…ì¸ 
                                const isValidContentType = ['faq', 'guide', 'notice', 'manual'].includes(item.type);
                                return hasVersions && hasUserId && isValidContentType;
                            });

                        console.log(`âœ… Firestoreì—ì„œ ${contentData.length}ê°œ ì½˜í…ì¸  ë¡œë“œ`);
                    } catch (firestoreError) {
                        console.error('âŒ Firestore ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', firestoreError);
                        console.log('ğŸ“ Firestore ì˜¤ë¥˜ë¡œ ì¸í•´ ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©');
                        contentData = [];
                    }
                } else {
                    console.log('ğŸ“ Firebaseê°€ ì—†ì–´ ìƒ˜í”Œ ë°ì´í„°ë¡œ ì§ì ‘ ì„¤ì •');
                    // Firebase ì—°ê²° ì—†ì´ ìƒ˜í”Œ ì½˜í…ì¸  ì‚¬ìš©
                    contentData = [];
                }

                // ì½˜í…ì¸ ê°€ ì—†ìœ¼ë©´ ìƒ˜í”Œ ìƒì„±
                if (contentData.length === 0) {
                    console.log('ğŸ“ ì½˜í…ì¸ ê°€ ì—†ì–´ ìƒ˜í”Œ ë°ì´í„° í‘œì‹œ');
                    // ìƒ˜í”Œ ì½˜í…ì¸  ìƒì„±
                    contentData = generateSampleContent();
                }

                // ì½˜í…ì¸  í‘œì‹œ ì¤€ë¹„ ì™„ë£Œ

            } catch (error) {
                console.error('âŒ ì½˜í…ì¸  ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                console.log('ğŸ“ ì˜¤ë¥˜ë¡œ ì¸í•´ ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©');
                contentData = generateSampleContent();
            }
        }

        // ìƒ˜í”Œ ì½˜í…ì¸  ìƒì„±
        function generateSampleContent() {
            const currentTime = new Date().toISOString();

            return [
                {
                    id: 'community_welcome_001',
                    type: 'notice',
                    priority: 'high',
                    createdAt: currentTime,
                    updatedAt: currentTime,
                    versions: {
                        ko: {
                            title: 'LikeVoca ì»¤ë®¤ë‹ˆí‹°ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!',
                            content: '<div class="prose max-w-none"><h2>ğŸ‰ LikeVoca ì»¤ë®¤ë‹ˆí‹° ì˜¤í”ˆ!</h2><p>ì–¸ì–´í•™ìŠµì— ë„ì›€ì´ ë˜ëŠ” ë‹¤ì–‘í•œ ê°€ì´ë“œì™€ íŒì„ ê³µìœ í•˜ëŠ” ìƒˆë¡œìš´ ì»¤ë®¤ë‹ˆí‹° ê³µê°„ì´ ì˜¤í”ˆë˜ì—ˆìŠµë‹ˆë‹¤.</p><ul><li>í•™ìŠµ ê°€ì´ë“œ ë° ì „ëµ</li><li>ìƒˆë¡œìš´ ê¸°ëŠ¥ ì•ˆë‚´</li><li>ê³µì§€ì‚¬í•­ ë° ì—…ë°ì´íŠ¸</li></ul><p>ì—¬ëŸ¬ë¶„ì˜ ì–¸ì–´í•™ìŠµ ì—¬ì •ì— ë„ì›€ì´ ë˜ëŠ” ìœ ìš©í•œ ì •ë³´ë“¤ì„ ì°¾ì•„ë³´ì„¸ìš”!</p></div>',
                            published: true,
                            lastModified: currentTime,
                            translationStatus: 'updated'
                        },
                        en: {
                            title: 'Welcome to LikeVoca Community!',
                            content: '<div class="prose max-w-none"><h2>ğŸ‰ LikeVoca Community Open!</h2><p>We\'re excited to announce the opening of our new community space where you can find helpful guides and tips for language learning.</p><ul><li>Learning guides and strategies</li><li>New feature announcements</li><li>Updates and notices</li></ul><p>Find useful information to help with your language learning journey!</p></div>',
                            published: true,
                            lastModified: currentTime,
                            translationStatus: 'updated'
                        }
                    }
                },
                {
                    id: 'guide_001',
                    type: 'guide',
                    priority: 'high',
                    createdAt: currentTime,
                    updatedAt: currentTime,
                    versions: {
                        ko: {
                            title: 'íš¨ê³¼ì ì¸ ë‹¨ì–´ í•™ìŠµ ì „ëµ',
                            content: '<div class="prose max-w-none"><h2>ğŸ“š ë‹¨ì–´ í•™ìŠµì˜ ê³¼í•™ì  ì ‘ê·¼ë²•</h2><p>ì–¸ì–´í•™ìŠµì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒ ì¤‘ í•˜ë‚˜ëŠ” ì–´íœ˜ í•™ìŠµì…ë‹ˆë‹¤. ì—¬ê¸° íš¨ê³¼ì ì¸ ë‹¨ì–´ í•™ìŠµ ì „ëµì„ ì†Œê°œí•©ë‹ˆë‹¤.</p><h3>ğŸ”„ ê°„ê²© ë°˜ë³µ í•™ìŠµë²•</h3><ul><li>1ì¼ í›„: ì²« ë²ˆì§¸ ë³µìŠµ</li><li>3ì¼ í›„: ë‘ ë²ˆì§¸ ë³µìŠµ</li><li>1ì£¼ì¼ í›„: ì„¸ ë²ˆì§¸ ë³µìŠµ</li><li>2ì£¼ì¼ í›„: ë„¤ ë²ˆì§¸ ë³µìŠµ</li></ul><h3>ğŸ¯ ëŠ¥ë™ì  íšŒìƒë²•</h3><p>ë‹¨ìˆœíˆ ì½ê¸°ë³´ë‹¤ëŠ” ì§ì ‘ ìƒê°í•´ë‚´ëŠ” ê²ƒì´ íš¨ê³¼ì ì…ë‹ˆë‹¤.</p></div>',
                            published: true,
                            lastModified: currentTime,
                            translationStatus: 'updated'
                        }
                    }
                },
                {
                    id: 'faq_001',
                    type: 'faq',
                    priority: 'normal',
                    createdAt: currentTime,
                    updatedAt: currentTime,
                    versions: {
                        ko: {
                            title: 'LikeVocaë¥¼ ì²˜ìŒ ì‹œì‘í•˜ëŠ” ë°©ë²•ì€?',
                            content: '<div class="prose max-w-none"><p>LikeVocaë¥¼ ì²˜ìŒ ì‚¬ìš©í•˜ì‹œëŠ” ë¶„ë“¤ì„ ìœ„í•œ ê°„ë‹¨í•œ ê°€ì´ë“œì…ë‹ˆë‹¤:</p><ol><li><strong>ê³„ì • ìƒì„±</strong>: ì´ë©”ì¼ë¡œ ê°€ì…í•˜ê±°ë‚˜ Google/Facebook ì†Œì…œ ë¡œê·¸ì¸ì„ ì´ìš©í•˜ì„¸ìš”.</li><li><strong>ë ˆë²¨ í…ŒìŠ¤íŠ¸</strong>: ê°„ë‹¨í•œ ì–´íœ˜ í…ŒìŠ¤íŠ¸ë¡œ ë‚´ ìˆ˜ì¤€ì„ í™•ì¸í•´ë³´ì„¸ìš”.</li><li><strong>AI ë‹¨ì–´ ì¶”ì²œ</strong>: ë‚´ ìˆ˜ì¤€ì— ë§ëŠ” ë‹¤ì–‘í•œ ë‹¨ì–´ë“¤ì„ ë§Œë‚˜ë³´ì„¸ìš”.</li><li><strong>ê²Œì„ìœ¼ë¡œ í•™ìŠµ</strong>: ì¬ë¯¸ìˆëŠ” ê²Œì„ìœ¼ë¡œ ë‹¨ì–´ë¥¼ ìµí˜€ë³´ì„¸ìš”!</li></ol></div>',
                            published: true,
                            lastModified: currentTime,
                            translationStatus: 'updated'
                        }
                    }
                }
            ];
        }

        // ì½˜í…ì¸  í‘œì‹œ
        async function displayContent() {
            const loading = document.getElementById('loading');
            const contentList = document.getElementById('contentList');
            const emptyState = document.getElementById('emptyState');

            if (!loading || !contentList || !emptyState) {
                console.error('í•„ìˆ˜ DOM ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', {
                    loading: !!loading,
                    contentList: !!contentList,
                    emptyState: !!emptyState
                });
                return;
            }

            loading.style.display = 'block';
            emptyState.classList.add('hidden');

            try {
                const searchInput = document.getElementById('searchInput');
                const categoryFilterElement = document.getElementById('categoryFilter');

                if (!searchInput || !categoryFilterElement) {
                    console.error('ê²€ìƒ‰/í•„í„° DOM ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', {
                        searchInput: !!searchInput,
                        categoryFilter: !!categoryFilterElement
                    });
                    showError('í˜ì´ì§€ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                const searchTerm = searchInput.value.toLowerCase();
                const categoryFilter = categoryFilterElement.value;

                // í•„í„°ë§
                let filteredContent = contentData.filter(item => {
                    // ìƒíƒœê°€ 'published'ì¸ ì½˜í…ì¸ ë§Œ í‘œì‹œ
                    if (item.status !== 'published') return false;

                    const versions = item.versions || {};
                    const version = versions.ko;
                    if (!version || !version.title || !version.content) return false;

                    // ì¹´í…Œê³ ë¦¬ í•„í„°
                    if (categoryFilter !== 'all' && item.type !== categoryFilter) return false;

                    // ê²€ìƒ‰ í•„í„°
                    if (searchTerm) {
                        const titleMatch = (version.title || '').toLowerCase().includes(searchTerm);
                        const contentMatch = (version.content || '').toLowerCase().includes(searchTerm);
                        if (!titleMatch && !contentMatch) return false;
                    }

                    return true;
                });

                if (filteredContent.length === 0) {
                    contentList.innerHTML = '';
                    emptyState.classList.remove('hidden');
                } else {
                    renderContent(filteredContent);
                    emptyState.classList.add('hidden');
                }

            } catch (error) {
                console.error('ì½˜í…ì¸  í‘œì‹œ ì‹¤íŒ¨:', error);
                showError('ì½˜í…ì¸ ë¥¼ í‘œì‹œí•˜ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            } finally {
                loading.style.display = 'none';
            }
        }

        // ì½˜í…ì¸  ë Œë”ë§
        function renderContent(content) {
            const contentList = document.getElementById('contentList');

            const categoryIcons = {
                notice: 'fa-bullhorn',
                guide: 'fa-compass',
                faq: 'fa-question-circle',
                manual: 'fa-book'
            };

            const categoryNames = {
                notice: 'ê³µì§€ì‚¬í•­',
                guide: 'í•™ìŠµ ê°€ì´ë“œ',
                faq: 'ìì£¼ ë¬»ëŠ” ì§ˆë¬¸',
                manual: 'ì‚¬ìš©ì ë§¤ë‰´ì–¼'
            };

            const html = content.map(item => {
                const versions = item.versions || {};
                const version = versions.ko || {};
                const excerpt = stripHtml(version.content || '').substring(0, 150) + '...';

                return `
                    <article class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition duration-300">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 rounded-lg bg-[#4B63AC] bg-opacity-10 flex items-center justify-center">
                                    <i class="fas ${categoryIcons[item.type]} text-[#4B63AC] text-lg"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-1">
                                        ${version.title || 'ì œëª© ì—†ìŒ'}
                                    </h3>
                                    <div class="flex items-center space-x-3">
                                        <span class="text-sm text-gray-500">${categoryNames[item.type]}</span>
                                        <span class="text-sm text-gray-400">${formatDate(item.updatedAt)}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-gray-600 mb-4">
                            ${excerpt}
                        </div>
                        
                        <a href="content-detail.html?id=${item.id}" class="inline-flex items-center text-[#4B63AC] hover:text-[#3A4F8B] font-medium transition duration-200">
                            <i class="fas fa-arrow-right mr-2"></i>
                            ìì„¸íˆ ë³´ê¸°
                        </a>
                    </article>
                `;
            }).join('');

            contentList.innerHTML = html;
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupEventListeners() {
            document.getElementById('searchBtn').addEventListener('click', displayContent);
            document.getElementById('refreshBtn').addEventListener('click', async () => {
                console.log('ğŸ”„ ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨ ì‹¤í–‰...');
                await loadContentData();
                await displayContent();
            });
            document.getElementById('searchInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') displayContent();
            });
            document.getElementById('categoryFilter').addEventListener('change', displayContent);
        }

        // ë™ì  SEO ë©”íƒ€íƒœê·¸ ì—…ë°ì´íŠ¸
        function updateSEOForContent(content, lang = 'ko') {
            const version = content.versions[lang];
            if (!version) return;

            // ì œëª©ê³¼ ì„¤ëª… ì¶”ì¶œ (HTML íƒœê·¸ ì œê±°)
            const cleanTitle = version.title || 'LikeVoca ì»¤ë®¤ë‹ˆí‹°';
            const cleanDescription = version.content
                ? version.content.replace(/<[^>]*>/g, '').substring(0, 160) + '...'
                : 'LikeVoca ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ì–¸ì–´ í•™ìŠµ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.';

            // ë©”íƒ€íƒœê·¸ ì—…ë°ì´íŠ¸
            document.title = `${cleanTitle} - LikeVoca ì»¤ë®¤ë‹ˆí‹°`;

            // Description ì—…ë°ì´íŠ¸
            let metaDesc = document.querySelector('meta[name="description"]');
            if (metaDesc) metaDesc.setAttribute('content', cleanDescription);

            // Open Graph ì—…ë°ì´íŠ¸
            let ogTitle = document.querySelector('meta[property="og:title"]');
            if (ogTitle) ogTitle.setAttribute('content', cleanTitle);

            let ogDesc = document.querySelector('meta[property="og:description"]');
            if (ogDesc) ogDesc.setAttribute('content', cleanDescription);

            // URL ì—…ë°ì´íŠ¸ (íˆìŠ¤í† ë¦¬ API ì‚¬ìš©)
            if (window.history && window.history.pushState) {
                const newUrl = `${window.location.pathname}#${content.id}`;
                window.history.pushState({ contentId: content.id }, cleanTitle, newUrl);
            }

            // JSON-LD êµ¬ì¡°í™” ë°ì´í„° ì—…ë°ì´íŠ¸
            updateStructuredData(content, lang);
        }

        // êµ¬ì¡°í™” ë°ì´í„° ì—…ë°ì´íŠ¸  
        function updateStructuredData(content, lang) {
            const version = content.versions[lang];
            if (!version) return;

            const structuredData = {
                "@context": "https://schema.org",
                "@type": "Article",
                "headline": version.title,
                "description": version.content ? version.content.replace(/<[^>]*>/g, '').substring(0, 200) : '',
                "author": {
                    "@type": "Organization",
                    "name": "LikeVoca"
                },
                "publisher": {
                    "@type": "Organization",
                    "name": "LikeVoca",
                    "url": "https://likevoca.com"
                },
                "datePublished": content.createdAt,
                "dateModified": content.updatedAt || content.createdAt,
                "url": `https://likevoca.com/${lang}/community.html#${content.id}`,
                "inLanguage": lang
            };

            // ê¸°ì¡´ JSON-LD ìŠ¤í¬ë¦½íŠ¸ ì°¾ê¸° ë° ì—…ë°ì´íŠ¸
            let jsonLdScript = document.querySelector('script[type="application/ld+json"]');
            if (jsonLdScript) {
                jsonLdScript.textContent = JSON.stringify(structuredData);
            }
        }

        // ìƒì„¸ë³´ê¸°
        // ëª¨ë‹¬ ê¸°ë°˜ ì½˜í…ì¸  í‘œì‹œ ì œê±° - ê°œë³„ í˜ì´ì§€ë¡œ ëŒ€ì²´ë¨

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function stripHtml(html) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = html;
            return tempDiv.textContent || tempDiv.innerText || '';
        }

        function formatDate(dateValue) {
            if (!dateValue) return '-';

            let date;
            // Firestore Timestamp ê°ì²´ì¸ ê²½ìš°
            if (dateValue.toDate && typeof dateValue.toDate === 'function') {
                date = dateValue.toDate();
            }
            // ì´ë¯¸ Date ê°ì²´ì¸ ê²½ìš° ë˜ëŠ” ë¬¸ìì—´ì¸ ê²½ìš°
            else {
                date = new Date(dateValue);
            }

            if (isNaN(date.getTime())) return '-';

            return date.toLocaleDateString('ko-KR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        function showError(message) {
            const contentList = document.getElementById('contentList');
            contentList.innerHTML = `
                <div class="text-center py-12">
                    <i class="fas fa-exclamation-triangle text-4xl text-red-400 mb-4"></i>
                    <p class="text-red-600">${message}</p>
                </div>
            `;
        }

        // ì»¤ë®¤ë‹ˆí‹° ë©”ì¸ í˜ì´ì§€ì˜ ê²½ìš° ì¦‰ì‹œ ê³µìœ  ê¸°ëŠ¥ í™œì„±í™”
        document.addEventListener('DOMContentLoaded', () => {
            // URLì— id íŒŒë¼ë¯¸í„°ê°€ ì—†ìœ¼ë©´ ë©”ì¸ í˜ì´ì§€ë¡œ ê°„ì£¼
            if (!window.location.search.includes('id=')) {
                window.contentLoaded = true;
                console.log('âœ… ì»¤ë®¤ë‹ˆí‹° ë©”ì¸ í˜ì´ì§€ ê³µìœ  ê¸°ëŠ¥ í™œì„±í™”');
            }
        });
    </script>
</body>

</html>