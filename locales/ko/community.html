<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LikeVoca 커뮤니티 - 학습 가이드, FAQ, 매뉴얼</title>

    <meta name="description"
        content="LikeVoca 커뮤니티에서 언어 학습 가이드, 자주 묻는 질문(FAQ), 사용자 매뉴얼 및 공지사항을 확인하세요. 효과적인 언어 학습을 위한 다양한 정보를 제공합니다." />
    <meta name="keywords" content="LikeVoca, 커뮤니티, 언어학습, 학습가이드, FAQ, 매뉴얼, 공지사항, 다국어, 영어, 일본어, 중국어" />

    <!-- Open Graph 태그 -->
    <meta property="og:title" content="LikeVoca 커뮤니티 - 학습 가이드, FAQ, 매뉴얼" />
    <meta property="og:description" content="LikeVoca 커뮤니티에서 언어 학습 가이드, FAQ, 매뉴얼을 확인하세요." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.likevoca.com/ko/community.html" />
    <meta property="og:site_name" content="LikeVoca" />
    <meta property="og:locale" content="ko_KR" />
    <meta property="og:image" content="https://www.likevoca.com/assets/hero.webp" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="LikeVoca 커뮤니티 - 학습 가이드, FAQ, 매뉴얼" />

    <!-- Twitter Card 태그 -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="LikeVoca 커뮤니티 - 학습 가이드, FAQ, 매뉴얼" />
    <meta name="twitter:description" content="LikeVoca 커뮤니티에서 언어 학습 가이드, FAQ, 매뉴얼을 확인하세요." />
    <meta name="twitter:image" content="https://www.likevoca.com/assets/hero.webp" />
    <meta name="twitter:image:alt" content="LikeVoca 커뮤니티 - 학습 가이드, FAQ, 매뉴얼" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://likevoca.com/ko/community.html" />

    <!-- Hreflang 태그 -->
    <link rel="alternate" hreflang="ko" href="https://likevoca.com/ko/community.html" />
    <link rel="alternate" hreflang="en" href="https://likevoca.com/en/community.html" />
    <link rel="alternate" hreflang="ja" href="https://likevoca.com/ja/community.html" />
    <link rel="alternate" hreflang="zh" href="https://likevoca.com/zh/community.html" />
    <link rel="alternate" hreflang="es" href="https://likevoca.com/es/community.html" />
    <link rel="alternate" hreflang="x-default" href="https://likevoca.com/en/community.html" />

    <!-- JSON-LD 구조화 데이터 -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "LikeVoca Community",
        "url": "https://likevoca.com/ko/community.html",
        "description": "LikeVoca 커뮤니티에서 언어 학습 가이드, FAQ, 매뉴얼을 확인하세요.",
        "inLanguage": "ko",
        "publisher": {
            "@type": "Organization",
            "name": "LikeVoca",
            "url": "https://likevoca.com"
        },
        "mainEntity": {
            "@type": "FAQPage",
            "mainEntity": []
        }
    }
    </script>

    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link rel="stylesheet" href="../../css/style.css" />

    <!-- Firebase 초기화 -->
    <script type="module" src="../../js/firebase/firebase-init.js"></script>

    <!-- Firebase 초기화 디버깅 -->
    <script>
        // Firebase 초기화 상태 모니터링
        function monitorFirebaseInit() {
            let checkCount = 0;
            const maxChecks = 100; // 10초 (100ms * 100)

            const interval = setInterval(() => {
                checkCount++;
                console.log(`🔍 Firebase 상태 체크 #${checkCount}:`, {
                    'window.db': !!window.db,
                    'window.auth': !!window.auth,
                    'window.firebaseInit': !!window.firebaseInit
                });

                if (window.db && window.auth) {
                    console.log('✅ Firebase 초기화 성공!');
                    clearInterval(interval);
                } else if (checkCount >= maxChecks) {
                    console.error('❌ Firebase 초기화 타임아웃 - 10초 경과');
                    console.log('최종 전역 객체 상태:', {
                        'typeof window.db': typeof window.db,
                        'typeof window.auth': typeof window.auth,
                        'window 객체 키들': Object.keys(window).filter(key => key.includes('fire') || key.includes('db') || key.includes('auth'))
                    });
                    clearInterval(interval);
                }
            }, 100);
        }

        // DOM 로드 후 모니터링 시작
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🚀 DOM 로드 완료 - Firebase 초기화 모니터링 시작');
            monitorFirebaseInit();
        });
    </script>
</head>

<body class="bg-gray-50">
    <div id="navbar-container"></div>

    <main class="container mx-auto max-w-6xl px-4 md:px-6 lg:px-8 py-8 md:py-12">
        <!-- 헤더 섹션 -->
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">
                LikeVoca <span class="text-[#4B63AC]">커뮤니티</span>
            </h1>
            <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">
                언어학습에 도움이 되는 가이드, 팁, 공지사항을 확인하세요
            </p>
        </header>

        <!-- 검색 및 필터 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <div class="flex flex-col md:flex-row gap-4 items-center">
                <div class="flex-1">
                    <input type="text" id="searchInput" placeholder="궁금한 내용을 검색해보세요..."
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B63AC]" />
                </div>
                <div class="flex gap-2">
                    <select id="categoryFilter"
                        class="px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B63AC]">
                        <option value="all">전체 카테고리</option>
                        <option value="notice">공지사항</option>
                        <option value="guide">학습 가이드</option>
                        <option value="faq">자주 묻는 질문</option>
                        <option value="manual">사용자 매뉴얼</option>
                    </select>
                    <button id="searchBtn"
                        class="bg-[#4B63AC] text-white px-6 py-3 rounded-lg hover:bg-[#3A4F8B] transition duration-200">
                        <i class="fas fa-search"></i>
                    </button>
                    <button id="refreshBtn"
                        class="bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition duration-200"
                        title="콘텐츠 새로고침">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- 로딩 상태 -->
        <div id="loading" class="text-center py-12">
            <i class="fas fa-spinner fa-spin text-3xl text-gray-400 mb-4"></i>
            <p class="text-gray-600" id="loadingText">콘텐츠를 불러오는 중...</p>
            <div id="loadingDebug" class="mt-2 text-sm text-gray-500"></div>
        </div>

        <!-- 콘텐츠 목록 -->
        <div id="contentList" class="space-y-6">
        </div>

        <!-- 빈 상태 -->
        <div id="emptyState" class="text-center py-12 hidden">
            <i class="fas fa-search text-6xl text-gray-300 mb-6"></i>
            <h3 class="text-xl font-semibold text-gray-700 mb-2">검색 결과가 없습니다</h3>
            <p class="text-gray-500">다른 검색어를 사용해보세요.</p>
        </div>
    </main>

    <!-- Footer -->
    <div id="footer-container"></div>

    <!-- Scripts -->
    <script src="../../components/js/navbar.js"></script>
    <script src="../../components/js/footer.js"></script>

    <script type="module">
        import { applyLanguage, updateMetadata } from '../../utils/language-utils.js';

        let contentData = [];

        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // 네비게이션바 로드
                if (typeof window.loadNavbar === 'function') {
                    await window.loadNavbar();
                }

                // Footer 로드
                if (typeof window.loadFooter === 'function') {
                    await window.loadFooter();
                }

                // 언어 적용
                await applyLanguage();
                await updateMetadata('community');

                // 콘텐츠 로드
                await loadContentData();
                await displayContent();

                // 이벤트 리스너 설정
                setupEventListeners();

            } catch (error) {
                console.error('커뮤니티 페이지 초기화 중 오류:', error);
                showError('페이지를 불러오는 중 오류가 발생했습니다.');
            }
        });

        // 콘텐츠 데이터 로드 (Firestore 전용)
        // 로딩 상태 업데이트 함수
        function updateLoadingStatus(message, debug = '') {
            const loadingText = document.getElementById('loadingText');
            const loadingDebug = document.getElementById('loadingDebug');
            if (loadingText) loadingText.textContent = message;
            if (loadingDebug) loadingDebug.textContent = debug;
            // 로그 제거됨
        }

        async function loadContentData() {
            try {
                console.log('📊 콘텐츠 데이터 로드 시도... (Firestore)');
                // Firebase 초기화 확인 및 대기
                if (!window.db || !window.auth) {
                    let attempts = 0;
                    const maxAttempts = 100; // 10초 (100ms * 100)

                    await new Promise((resolve, reject) => {
                        const checkFirebase = setInterval(() => {
                            attempts++;

                            if (window.db && window.auth) {
                                clearInterval(checkFirebase);
                                console.log('✅ Firebase 초기화 완료! db와 auth 모두 준비됨');
                                resolve();
                            } else if (attempts >= maxAttempts) {
                                clearInterval(checkFirebase);
                                console.error('❌ Firebase 초기화 타임아웃 (10초 경과)');
                                console.log('최종 상태 - window.db:', !!window.db, 'window.auth:', !!window.auth);
                                console.log('Firebase 스크립트 로딩 상태:', {
                                    'firebase script element': document.querySelector('script[src*="firebase-init"]'),
                                    'window.firebaseInit': !!window.firebaseInit,
                                    'window keys with firebase/db/auth': Object.keys(window).filter(key =>
                                        key.toLowerCase().includes('firebase') ||
                                        key.toLowerCase().includes('db') ||
                                        key.toLowerCase().includes('auth')
                                    )
                                });

                                // 타임아웃 시에도 계속 진행 (샘플 데이터 사용)
                                console.log('🔄 Firebase 없이 샘플 데이터로 계속 진행...');
                                resolve();
                            } else if (attempts % 20 === 0) {
                                console.log(`🔄 Firebase 대기 중... (${attempts}/${maxAttempts}) db:${!!window.db} auth:${!!window.auth}`);
                                // Firebase 연결 대기 중
                            }
                        }, 100);
                    });
                } else {
                    console.log('✅ Firebase는 이미 초기화되어 있음');
                }

                // Firestore에서 콘텐츠 로드 시도
                if (window.db) {
                    // 데이터베이스에서 콘텐츠 로드 중
                    try {
                        const { collection, query, orderBy, getDocs } = await import("https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js");

                        const contentRef = collection(window.db, 'content');
                        const contentQuery = query(contentRef, orderBy('createdAt', 'desc'));
                        const snapshot = await getDocs(contentQuery);

                        contentData = snapshot.docs
                            .map(doc => ({
                                id: doc.id,
                                ...doc.data()
                            }))
                            .filter(item => {
                                // 사용자가 작성한 다국어 콘텐츠만 표시
                                const hasVersions = item.versions && typeof item.versions === 'object';
                                const hasUserId = item.userId; // 사용자가 작성한 콘텐츠
                                const isValidContentType = ['faq', 'guide', 'notice', 'manual'].includes(item.type);
                                return hasVersions && hasUserId && isValidContentType;
                            });

                        console.log(`✅ Firestore에서 ${contentData.length}개 콘텐츠 로드`);
                    } catch (firestoreError) {
                        console.error('❌ Firestore 데이터 로드 실패:', firestoreError);
                        console.log('📝 Firestore 오류로 인해 샘플 데이터 사용');
                        contentData = [];
                    }
                } else {
                    console.log('📝 Firebase가 없어 샘플 데이터로 직접 설정');
                    // Firebase 연결 없이 샘플 콘텐츠 사용
                    contentData = [];
                }

                // 콘텐츠가 없으면 샘플 생성
                if (contentData.length === 0) {
                    console.log('📝 콘텐츠가 없어 샘플 데이터 표시');
                    // 샘플 콘텐츠 생성
                    contentData = generateSampleContent();
                }

                // 콘텐츠 표시 준비 완료

            } catch (error) {
                console.error('❌ 콘텐츠 데이터 로드 실패:', error);
                console.log('📝 오류로 인해 샘플 데이터 사용');
                contentData = generateSampleContent();
            }
        }

        // 샘플 콘텐츠 생성
        function generateSampleContent() {
            const currentTime = new Date().toISOString();

            return [
                {
                    id: 'community_welcome_001',
                    type: 'notice',
                    priority: 'high',
                    createdAt: currentTime,
                    updatedAt: currentTime,
                    versions: {
                        ko: {
                            title: 'LikeVoca 커뮤니티에 오신 것을 환영합니다!',
                            content: '<div class="prose max-w-none"><h2>🎉 LikeVoca 커뮤니티 오픈!</h2><p>언어학습에 도움이 되는 다양한 가이드와 팁을 공유하는 새로운 커뮤니티 공간이 오픈되었습니다.</p><ul><li>학습 가이드 및 전략</li><li>새로운 기능 안내</li><li>공지사항 및 업데이트</li></ul><p>여러분의 언어학습 여정에 도움이 되는 유용한 정보들을 찾아보세요!</p></div>',
                            published: true,
                            lastModified: currentTime,
                            translationStatus: 'updated'
                        },
                        en: {
                            title: 'Welcome to LikeVoca Community!',
                            content: '<div class="prose max-w-none"><h2>🎉 LikeVoca Community Open!</h2><p>We\'re excited to announce the opening of our new community space where you can find helpful guides and tips for language learning.</p><ul><li>Learning guides and strategies</li><li>New feature announcements</li><li>Updates and notices</li></ul><p>Find useful information to help with your language learning journey!</p></div>',
                            published: true,
                            lastModified: currentTime,
                            translationStatus: 'updated'
                        }
                    }
                },
                {
                    id: 'guide_001',
                    type: 'guide',
                    priority: 'high',
                    createdAt: currentTime,
                    updatedAt: currentTime,
                    versions: {
                        ko: {
                            title: '효과적인 단어 학습 전략',
                            content: '<div class="prose max-w-none"><h2>📚 단어 학습의 과학적 접근법</h2><p>언어학습에서 가장 중요한 것 중 하나는 어휘 학습입니다. 여기 효과적인 단어 학습 전략을 소개합니다.</p><h3>🔄 간격 반복 학습법</h3><ul><li>1일 후: 첫 번째 복습</li><li>3일 후: 두 번째 복습</li><li>1주일 후: 세 번째 복습</li><li>2주일 후: 네 번째 복습</li></ul><h3>🎯 능동적 회상법</h3><p>단순히 읽기보다는 직접 생각해내는 것이 효과적입니다.</p></div>',
                            published: true,
                            lastModified: currentTime,
                            translationStatus: 'updated'
                        }
                    }
                },
                {
                    id: 'faq_001',
                    type: 'faq',
                    priority: 'normal',
                    createdAt: currentTime,
                    updatedAt: currentTime,
                    versions: {
                        ko: {
                            title: 'LikeVoca를 처음 시작하는 방법은?',
                            content: '<div class="prose max-w-none"><p>LikeVoca를 처음 사용하시는 분들을 위한 간단한 가이드입니다:</p><ol><li><strong>계정 생성</strong>: 이메일로 가입하거나 Google/Facebook 소셜 로그인을 이용하세요.</li><li><strong>레벨 테스트</strong>: 간단한 어휘 테스트로 내 수준을 확인해보세요.</li><li><strong>AI 단어 추천</strong>: 내 수준에 맞는 다양한 단어들을 만나보세요.</li><li><strong>게임으로 학습</strong>: 재미있는 게임으로 단어를 익혀보세요!</li></ol></div>',
                            published: true,
                            lastModified: currentTime,
                            translationStatus: 'updated'
                        }
                    }
                }
            ];
        }

        // 콘텐츠 표시
        async function displayContent() {
            const loading = document.getElementById('loading');
            const contentList = document.getElementById('contentList');
            const emptyState = document.getElementById('emptyState');

            if (!loading || !contentList || !emptyState) {
                console.error('필수 DOM 요소를 찾을 수 없습니다:', {
                    loading: !!loading,
                    contentList: !!contentList,
                    emptyState: !!emptyState
                });
                return;
            }

            loading.style.display = 'block';
            emptyState.classList.add('hidden');

            try {
                const searchInput = document.getElementById('searchInput');
                const categoryFilterElement = document.getElementById('categoryFilter');

                if (!searchInput || !categoryFilterElement) {
                    console.error('검색/필터 DOM 요소를 찾을 수 없습니다:', {
                        searchInput: !!searchInput,
                        categoryFilter: !!categoryFilterElement
                    });
                    showError('페이지 요소를 찾을 수 없습니다.');
                    return;
                }

                const searchTerm = searchInput.value.toLowerCase();
                const categoryFilter = categoryFilterElement.value;

                // 필터링
                let filteredContent = contentData.filter(item => {
                    // 상태가 'published'인 콘텐츠만 표시
                    if (item.status !== 'published') return false;

                    const versions = item.versions || {};
                    const version = versions.ko;
                    if (!version || !version.title || !version.content) return false;

                    // 카테고리 필터
                    if (categoryFilter !== 'all' && item.type !== categoryFilter) return false;

                    // 검색 필터
                    if (searchTerm) {
                        const titleMatch = (version.title || '').toLowerCase().includes(searchTerm);
                        const contentMatch = (version.content || '').toLowerCase().includes(searchTerm);
                        if (!titleMatch && !contentMatch) return false;
                    }

                    return true;
                });

                if (filteredContent.length === 0) {
                    contentList.innerHTML = '';
                    emptyState.classList.remove('hidden');
                } else {
                    renderContent(filteredContent);
                    emptyState.classList.add('hidden');
                }

            } catch (error) {
                console.error('콘텐츠 표시 실패:', error);
                showError('콘텐츠를 표시하는데 실패했습니다.');
            } finally {
                loading.style.display = 'none';
            }
        }

        // 콘텐츠 렌더링
        function renderContent(content) {
            const contentList = document.getElementById('contentList');

            const categoryIcons = {
                notice: 'fa-bullhorn',
                guide: 'fa-compass',
                faq: 'fa-question-circle',
                manual: 'fa-book'
            };

            const categoryNames = {
                notice: '공지사항',
                guide: '학습 가이드',
                faq: '자주 묻는 질문',
                manual: '사용자 매뉴얼'
            };

            const html = content.map(item => {
                const versions = item.versions || {};
                const version = versions.ko || {};
                const excerpt = stripHtml(version.content || '').substring(0, 150) + '...';

                return `
                    <article class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition duration-300">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 rounded-lg bg-[#4B63AC] bg-opacity-10 flex items-center justify-center">
                                    <i class="fas ${categoryIcons[item.type]} text-[#4B63AC] text-lg"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-1">
                                        ${version.title || '제목 없음'}
                                    </h3>
                                    <div class="flex items-center space-x-3">
                                        <span class="text-sm text-gray-500">${categoryNames[item.type]}</span>
                                        <span class="text-sm text-gray-400">${formatDate(item.updatedAt)}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-gray-600 mb-4">
                            ${excerpt}
                        </div>
                        
                        <a href="content-detail.html?id=${item.id}" class="inline-flex items-center text-[#4B63AC] hover:text-[#3A4F8B] font-medium transition duration-200">
                            <i class="fas fa-arrow-right mr-2"></i>
                            자세히 보기
                        </a>
                    </article>
                `;
            }).join('');

            contentList.innerHTML = html;
        }

        // 이벤트 리스너 설정
        function setupEventListeners() {
            document.getElementById('searchBtn').addEventListener('click', displayContent);
            document.getElementById('refreshBtn').addEventListener('click', async () => {
                console.log('🔄 수동 새로고침 실행...');
                await loadContentData();
                await displayContent();
            });
            document.getElementById('searchInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') displayContent();
            });
            document.getElementById('categoryFilter').addEventListener('change', displayContent);
        }

        // 동적 SEO 메타태그 업데이트
        function updateSEOForContent(content, lang = 'ko') {
            const version = content.versions[lang];
            if (!version) return;

            // 제목과 설명 추출 (HTML 태그 제거)
            const cleanTitle = version.title || 'LikeVoca 커뮤니티';
            const cleanDescription = version.content
                ? version.content.replace(/<[^>]*>/g, '').substring(0, 160) + '...'
                : 'LikeVoca 커뮤니티에서 언어 학습 정보를 확인하세요.';

            // 메타태그 업데이트
            document.title = `${cleanTitle} - LikeVoca 커뮤니티`;

            // Description 업데이트
            let metaDesc = document.querySelector('meta[name="description"]');
            if (metaDesc) metaDesc.setAttribute('content', cleanDescription);

            // Open Graph 업데이트
            let ogTitle = document.querySelector('meta[property="og:title"]');
            if (ogTitle) ogTitle.setAttribute('content', cleanTitle);

            let ogDesc = document.querySelector('meta[property="og:description"]');
            if (ogDesc) ogDesc.setAttribute('content', cleanDescription);

            // URL 업데이트 (히스토리 API 사용)
            if (window.history && window.history.pushState) {
                const newUrl = `${window.location.pathname}#${content.id}`;
                window.history.pushState({ contentId: content.id }, cleanTitle, newUrl);
            }

            // JSON-LD 구조화 데이터 업데이트
            updateStructuredData(content, lang);
        }

        // 구조화 데이터 업데이트  
        function updateStructuredData(content, lang) {
            const version = content.versions[lang];
            if (!version) return;

            const structuredData = {
                "@context": "https://schema.org",
                "@type": "Article",
                "headline": version.title,
                "description": version.content ? version.content.replace(/<[^>]*>/g, '').substring(0, 200) : '',
                "author": {
                    "@type": "Organization",
                    "name": "LikeVoca"
                },
                "publisher": {
                    "@type": "Organization",
                    "name": "LikeVoca",
                    "url": "https://likevoca.com"
                },
                "datePublished": content.createdAt,
                "dateModified": content.updatedAt || content.createdAt,
                "url": `https://likevoca.com/${lang}/community.html#${content.id}`,
                "inLanguage": lang
            };

            // 기존 JSON-LD 스크립트 찾기 및 업데이트
            let jsonLdScript = document.querySelector('script[type="application/ld+json"]');
            if (jsonLdScript) {
                jsonLdScript.textContent = JSON.stringify(structuredData);
            }
        }

        // 상세보기
        // 모달 기반 콘텐츠 표시 제거 - 개별 페이지로 대체됨

        // 유틸리티 함수들
        function stripHtml(html) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = html;
            return tempDiv.textContent || tempDiv.innerText || '';
        }

        function formatDate(dateValue) {
            if (!dateValue) return '-';

            let date;
            // Firestore Timestamp 객체인 경우
            if (dateValue.toDate && typeof dateValue.toDate === 'function') {
                date = dateValue.toDate();
            }
            // 이미 Date 객체인 경우 또는 문자열인 경우
            else {
                date = new Date(dateValue);
            }

            if (isNaN(date.getTime())) return '-';

            return date.toLocaleDateString('ko-KR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        function showError(message) {
            const contentList = document.getElementById('contentList');
            contentList.innerHTML = `
                <div class="text-center py-12">
                    <i class="fas fa-exclamation-triangle text-4xl text-red-400 mb-4"></i>
                    <p class="text-red-600">${message}</p>
                </div>
            `;
        }

        // 커뮤니티 메인 페이지의 경우 즉시 공유 기능 활성화
        document.addEventListener('DOMContentLoaded', () => {
            // URL에 id 파라미터가 없으면 메인 페이지로 간주
            if (!window.location.search.includes('id=')) {
                window.contentLoaded = true;
                console.log('✅ 커뮤니티 메인 페이지 공유 기능 활성화');
            }
        });
    </script>
</body>

</html>