<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LikeVoca - Redirecting...</title>
    <script>
      // ì´ë¯¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ê°€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸
      if (!sessionStorage.getItem('redirected')) {
        // ë¸Œë¼ìš°ì € ì–¸ì–´ ê°ì§€
        function detectBrowserLanguage() {
          const browserLang = navigator.language || navigator.userLanguage;
          const langCode = browserLang.split('-')[0];
          
          // ì§€ì›í•˜ëŠ” ì–¸ì–´ ëª©ë¡
          const supportedLanguages = ['ko', 'en', 'ja', 'zh'];
          
          return supportedLanguages.includes(langCode) ? langCode : 'ko';
        }
        
        // ê°œë°œ í™˜ê²½ ê°ì§€
        function isDevelopment() {
          return window.location.hostname === 'localhost' || 
                 window.location.hostname === '127.0.0.1' ||
                 window.location.port === '5500';
        }
        
        // í˜„ì¬ ê²½ë¡œê°€ ì´ë¯¸ ì–¸ì–´ë³„ ê²½ë¡œì¸ì§€ í™•ì¸
        const currentPath = window.location.pathname;
        const isAlreadyLanguagePath = currentPath.match(/^\/(ko|en|ja|zh)\//) || 
                                    currentPath.match(/^\/locales\/(ko|en|ja|zh)\//);
        
        // ì´ë¯¸ ì–¸ì–´ë³„ ê²½ë¡œê°€ ì•„ë‹Œ ê²½ìš°ì—ë§Œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        if (!isAlreadyLanguagePath && (currentPath === '/' || currentPath === '/index.html')) {
          // ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹¤í–‰ë¨ì„ í‘œì‹œ
          sessionStorage.setItem('redirected', 'true');
          
          const targetLang = detectBrowserLanguage();
          
          if (isDevelopment()) {
            // ê°œë°œ í™˜ê²½: locales í´ë” ê²½ë¡œ ì‚¬ìš©
            window.location.replace(`/locales/${targetLang}/index.html`);
          } else {
            // ë°°í¬ í™˜ê²½: ì–¸ì–´ë³„ ê²½ë¡œ ì‚¬ìš©
            window.location.replace(`/${targetLang}/index.html`);
          }
        }
      }
      
      // 3ì´ˆ í›„ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ (ë‹¤ìŒ ë°©ë¬¸ì„ ìœ„í•´)
      setTimeout(() => {
        sessionStorage.removeItem('redirected');
      }, 3000);
    </script>
  </head>
  <body>
    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif;">
      <div style="text-align: center;">
        <h2>ğŸŒ LikeVoca</h2>
        <p>ì–¸ì–´ë¥¼ ê°ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
        <p>Detecting your language...</p>
        <p style="margin-top: 20px; font-size: 14px; color: #666;">
          ìë™ìœ¼ë¡œ ì´ë™í•˜ì§€ ì•Šìœ¼ë©´ <a href="/locales/ko/index.html" style="color: #4B63AC;">ì—¬ê¸°ë¥¼ í´ë¦­í•˜ì„¸ìš”</a>
        </p>
      </div>
    </div>
  </body>
</html>