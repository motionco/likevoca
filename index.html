<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LikeVoca - Redirecting...</title>
    <script>
      console.log("ë£¨íŠ¸ index.html ë¡œë“œë¨");
      
      // ë¸Œë¼ìš°ì € ì–¸ì–´ ê°ì§€
      function detectBrowserLanguage() {
        // localStorageì—ì„œ ì €ì¥ëœ ì–¸ì–´ í™•ì¸
        const savedLang = localStorage.getItem('userLanguage');
        if (savedLang) {
          console.log("ì €ì¥ëœ ì–¸ì–´ ì‚¬ìš©:", savedLang);
          return savedLang;
        }
        
        // ë¸Œë¼ìš°ì € ì–¸ì–´ ê°ì§€
        const browserLang = navigator.language || navigator.userLanguage;
        const langCode = browserLang.split('-')[0];
        
        // ì§€ì›í•˜ëŠ” ì–¸ì–´ ëª©ë¡
        const supportedLanguages = ['ko', 'en', 'ja', 'zh'];
        const detectedLang = supportedLanguages.includes(langCode) ? langCode : 'ko';
        
        console.log("ë¸Œë¼ìš°ì € ì–¸ì–´ ê°ì§€:", browserLang, "â†’", detectedLang);
        return detectedLang;
      }
      
      // ê°œë°œ í™˜ê²½ ê°ì§€
      function isDevelopment() {
        return window.location.hostname === 'localhost' || 
               window.location.hostname === '127.0.0.1' ||
               window.location.port === '5500' ||
               window.location.hostname.includes('127.0.0.1');
      }
      
      // ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
      (function() {
        const currentPath = window.location.pathname;
        console.log("í˜„ì¬ ê²½ë¡œ:", currentPath);
        
        // í˜„ì¬ ê²½ë¡œê°€ ì´ë¯¸ ì–¸ì–´ë³„ ê²½ë¡œì¸ì§€ í™•ì¸
        const isAlreadyLanguagePath = currentPath.match(/^\/(ko|en|ja|zh)\//) || 
                                    currentPath.match(/^\/locales\/(ko|en|ja|zh)\//);
        
        console.log("ì´ë¯¸ ì–¸ì–´ë³„ ê²½ë¡œì¸ê°€?", isAlreadyLanguagePath);
        
        // ë£¨íŠ¸ ê²½ë¡œì—ì„œë§Œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹¤í–‰
        if (!isAlreadyLanguagePath && (currentPath === '/' || currentPath === '/index.html' || currentPath === '')) {
          const targetLang = detectBrowserLanguage();
          let targetPath;
          
          if (isDevelopment()) {
            // ê°œë°œ í™˜ê²½: locales í´ë” ê²½ë¡œ ì‚¬ìš©
            targetPath = `/locales/${targetLang}/index.html`;
          } else {
            // ë°°í¬ í™˜ê²½: ì–¸ì–´ë³„ ê²½ë¡œ ì‚¬ìš©
            targetPath = `/${targetLang}/index.html`;
          }
          
          console.log("ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹¤í–‰:", targetPath);
          
          // ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸
          window.location.replace(targetPath);
        } else {
          console.log("ë¦¬ë‹¤ì´ë ‰íŠ¸ ë¶ˆí•„ìš”");
        }
      })();
    </script>
  </head>
  <body>
    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif;">
      <div style="text-align: center;">
        <h2>ğŸŒ LikeVoca</h2>
        <p>ì–¸ì–´ë¥¼ ê°ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
        <p>Detecting your language...</p>
        <p style="margin-top: 20px; font-size: 14px; color: #666;">
          ìë™ìœ¼ë¡œ ì´ë™í•˜ì§€ ì•Šìœ¼ë©´ <a href="/locales/ko/index.html" style="color: #4B63AC;">ì—¬ê¸°ë¥¼ í´ë¦­í•˜ì„¸ìš”</a>
        </p>
        </div>
      </div>
  </body>
</html>