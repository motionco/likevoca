<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“° ì½˜í…ì¸  ê´€ë¦¬ - LikeVoca Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Quill WYSIWYG Editor -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
    <style>
        .content-card {
            transition: all 0.2s ease;
        }
        .content-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .loading-skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .status-badge {
            @apply px-2 py-1 text-xs font-semibold rounded-full;
        }
        .status-published { @apply bg-green-100 text-green-800; }
        .status-draft { @apply bg-yellow-100 text-yellow-800; }
        .status-scheduled { @apply bg-blue-100 text-blue-800; }
        .status-archived { @apply bg-gray-100 text-gray-800; }
        
        .content-type-badge {
            @apply px-2 py-1 text-xs font-medium rounded;
        }
        .type-notice { @apply bg-red-50 text-red-700 border border-red-200; }
        .type-help { @apply bg-blue-50 text-blue-700 border border-blue-200; }
        .type-banner { @apply bg-purple-50 text-purple-700 border border-purple-200; }
        .type-announcement { @apply bg-green-50 text-green-700 border border-green-200; }
        .type-tutorial { @apply bg-orange-50 text-orange-700 border border-orange-200; }

        .quill-editor {
            min-height: 200px;
        }
        .ql-editor {
            min-height: 200px;
        }
        
        .selected-content {
            @apply ring-2 ring-blue-500 bg-blue-50;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <a href="../admin.html" class="text-gray-400 hover:text-gray-600 mr-4">
                        <i class="fas fa-arrow-left text-xl"></i>
                    </a>
                    <i class="fas fa-edit text-2xl text-green-600 mr-3"></i>
                    <h1 class="text-2xl font-bold text-gray-900">ì½˜í…ì¸  ê´€ë¦¬</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="createNewContent()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200">
                        <i class="fas fa-plus mr-2"></i>ìƒˆ ì½˜í…ì¸ 
                    </button>
                    <button onclick="refreshContent()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">
                        <i class="fas fa-sync-alt mr-2"></i>ìƒˆë¡œê³ ì¹¨
                    </button>
                    <span id="contentCount" class="text-gray-600">ì´ - ê°œ</span>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- ê²€ìƒ‰ ë° í•„í„° -->
        <div class="bg-white rounded-xl p-6 shadow-sm mb-6">
            <div class="flex flex-col lg:flex-row gap-4">
                <div class="flex-1">
                    <div class="relative">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        <input 
                            type="text" 
                            id="searchInput"
                            placeholder="ì œëª© ë˜ëŠ” ë‚´ìš©ìœ¼ë¡œ ê²€ìƒ‰..." 
                            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                            onkeyup="handleSearch()"
                        >
                    </div>
                </div>
                <div class="flex flex-wrap gap-2">
                    <select id="typeFilter" onchange="applyFilters()" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                        <option value="all">ëª¨ë“  íƒ€ì…</option>
                        <option value="notice">ê³µì§€ì‚¬í•­</option>
                        <option value="help">ë„ì›€ë§</option>
                        <option value="banner">ë°°ë„ˆ</option>
                        <option value="announcement">ì•Œë¦¼</option>
                        <option value="tutorial">íŠœí† ë¦¬ì–¼</option>
                    </select>
                    <select id="statusFilter" onchange="applyFilters()" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                        <option value="all">ëª¨ë“  ìƒíƒœ</option>
                        <option value="published">ê²Œì‹œë¨</option>
                        <option value="draft">ì´ˆì•ˆ</option>
                        <option value="scheduled">ì˜ˆì•½ë¨</option>
                        <option value="archived">ë³´ê´€ë¨</option>
                    </select>
                    <select id="sortBy" onchange="applyFilters()" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                        <option value="newest">ìµœì‹ ìˆœ</option>
                        <option value="oldest">ì˜¤ë˜ëœìˆœ</option>
                        <option value="title">ì œëª©ìˆœ</option>
                        <option value="type">íƒ€ì…ìˆœ</option>
                        <option value="status">ìƒíƒœìˆœ</option>
                    </select>
                </div>
            </div>

            <!-- ëŒ€ëŸ‰ ì‘ì—… -->
            <div id="bulkActions" class="hidden mt-4 pt-4 border-t border-gray-200">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <span id="selectedCount" class="text-gray-600">0ê°œ ì„ íƒë¨</span>
                        <div class="flex space-x-2">
                            <button onclick="bulkPublish()" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">
                                <i class="fas fa-eye mr-1"></i>ê²Œì‹œ
                            </button>
                            <button onclick="bulkUnpublish()" class="bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700">
                                <i class="fas fa-eye-slash mr-1"></i>ë¹„ê²Œì‹œ
                            </button>
                            <button onclick="bulkArchive()" class="bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700">
                                <i class="fas fa-archive mr-1"></i>ë³´ê´€
                            </button>
                            <button onclick="bulkDelete()" class="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700">
                                <i class="fas fa-trash mr-1"></i>ì‚­ì œ
                            </button>
                        </div>
                    </div>
                    <button onclick="clearSelection()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times mr-1"></i>ì„ íƒ í•´ì œ
                    </button>
                </div>
            </div>
        </div>

        <!-- í†µê³„ ì¹´ë“œ -->
        <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
            <div class="bg-white rounded-xl p-6 shadow-sm border-l-4 border-l-green-500">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">ì „ì²´ ì½˜í…ì¸ </p>
                        <p id="totalContent" class="text-2xl font-bold text-green-600">-</p>
                    </div>
                    <i class="fas fa-file-alt text-2xl text-green-500"></i>
                </div>
            </div>
            <div class="bg-white rounded-xl p-6 shadow-sm border-l-4 border-l-blue-500">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">ê²Œì‹œë¨</p>
                        <p id="publishedContent" class="text-2xl font-bold text-blue-600">-</p>
                    </div>
                    <i class="fas fa-eye text-2xl text-blue-500"></i>
                </div>
            </div>
            <div class="bg-white rounded-xl p-6 shadow-sm border-l-4 border-l-yellow-500">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">ì´ˆì•ˆ</p>
                        <p id="draftContent" class="text-2xl font-bold text-yellow-600">-</p>
                    </div>
                    <i class="fas fa-edit text-2xl text-yellow-500"></i>
                </div>
            </div>
            <div class="bg-white rounded-xl p-6 shadow-sm border-l-4 border-l-purple-500">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">ì˜ˆì•½ë¨</p>
                        <p id="scheduledContent" class="text-2xl font-bold text-purple-600">-</p>
                    </div>
                    <i class="fas fa-clock text-2xl text-purple-500"></i>
                </div>
            </div>
            <div class="bg-white rounded-xl p-6 shadow-sm border-l-4 border-l-gray-500">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">ë³´ê´€ë¨</p>
                        <p id="archivedContent" class="text-2xl font-bold text-gray-600">-</p>
                    </div>
                    <i class="fas fa-archive text-2xl text-gray-500"></i>
                </div>
            </div>
        </div>

        <!-- ì½˜í…ì¸  ëª©ë¡ -->
        <div class="bg-white rounded-xl shadow-sm">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-bold text-gray-900">
                        <i class="fas fa-list text-green-600 mr-2"></i>ì½˜í…ì¸  ëª©ë¡
                    </h2>
                    <div class="flex items-center space-x-2">
                        <label class="flex items-center">
                            <input 
                                type="checkbox" 
                                id="selectAll" 
                                onchange="toggleSelectAll()"
                                class="mr-2 rounded border-gray-300 text-green-600 focus:ring-green-500"
                            >
                            <span class="text-sm text-gray-600">ì „ì²´ ì„ íƒ</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- ë¡œë”© ìƒíƒœ -->
            <div id="loadingContent" class="p-8 text-center">
                <i class="fas fa-spinner fa-spin text-3xl text-gray-400 mb-4"></i>
                <p class="text-gray-600">ì½˜í…ì¸ ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>

            <!-- ì½˜í…ì¸  ê·¸ë¦¬ë“œ -->
            <div id="contentGrid" class="hidden p-6">
                <div id="contentList" class="space-y-4">
                    <!-- ì½˜í…ì¸  ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>

                <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                <div id="pagination" class="mt-8 flex justify-center">
                    <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <!-- ë¹ˆ ìƒíƒœ -->
            <div id="emptyState" class="hidden p-12 text-center">
                <i class="fas fa-file-alt text-6xl text-gray-300 mb-4"></i>
                <h3 class="text-xl font-semibold text-gray-600 mb-2">ì½˜í…ì¸ ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                <p class="text-gray-500 mb-6">ì²« ë²ˆì§¸ ì½˜í…ì¸ ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.</p>
                <button onclick="createNewContent()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition duration-200">
                    <i class="fas fa-plus mr-2"></i>ìƒˆ ì½˜í…ì¸  ë§Œë“¤ê¸°
                </button>
            </div>
        </div>
    </main>

    <!-- ì½˜í…ì¸  ìƒì„±/í¸ì§‘ ëª¨ë‹¬ -->
    <div id="contentModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden">
            <div class="flex items-center justify-between p-6 border-b border-gray-200">
                <h2 id="modalTitle" class="text-xl font-bold text-gray-900">ìƒˆ ì½˜í…ì¸ </h2>
                <button onclick="closeContentModal()" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="p-6 overflow-y-auto max-h-[calc(90vh-140px)]">
                <form id="contentForm">
                    <input type="hidden" id="contentId">
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì½˜í…ì¸  íƒ€ì… *</label>
                            <select id="contentType" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500" required>
                                <option value="">íƒ€ì… ì„ íƒ</option>
                                <option value="notice">ê³µì§€ì‚¬í•­</option>
                                <option value="help">ë„ì›€ë§</option>
                                <option value="banner">ë°°ë„ˆ</option>
                                <option value="announcement">ì•Œë¦¼</option>
                                <option value="tutorial">íŠœí† ë¦¬ì–¼</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ìƒíƒœ</label>
                            <select id="contentStatus" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                                <option value="draft">ì´ˆì•ˆ</option>
                                <option value="published">ê²Œì‹œ</option>
                                <option value="scheduled">ì˜ˆì•½ ê²Œì‹œ</option>
                                <option value="archived">ë³´ê´€</option>
                            </select>
                        </div>
                    </div>

                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì œëª© *</label>
                        <input 
                            type="text" 
                            id="contentTitle" 
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500" 
                            required
                            placeholder="ì½˜í…ì¸  ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"
                        >
                    </div>

                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ìš”ì•½</label>
                        <textarea 
                            id="contentSummary" 
                            rows="2"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                            placeholder="ì½˜í…ì¸  ìš”ì•½ì„ ì…ë ¥í•˜ì„¸ìš”"
                        ></textarea>
                    </div>

                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë‚´ìš© *</label>
                        <div id="contentEditor" class="quill-editor border border-gray-300 rounded-lg"></div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div id="publishDateSection" class="hidden">
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì˜ˆì•½ ê²Œì‹œ ë‚ ì§œ</label>
                            <input 
                                type="datetime-local" 
                                id="publishDate" 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                            >
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ìš°ì„ ìˆœìœ„</label>
                            <select id="contentPriority" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                                <option value="low">ë‚®ìŒ</option>
                                <option value="normal" selected>ë³´í†µ</option>
                                <option value="high">ë†’ìŒ</option>
                                <option value="urgent">ê¸´ê¸‰</option>
                            </select>
                        </div>
                    </div>

                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">íƒœê·¸</label>
                        <input 
                            type="text" 
                            id="contentTags" 
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                            placeholder="íƒœê·¸ë¥¼ ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•˜ì„¸ìš”"
                        >
                    </div>

                    <div class="mb-6">
                        <label class="flex items-center">
                            <input type="checkbox" id="contentFeatured" class="mr-2 rounded border-gray-300 text-green-600 focus:ring-green-500">
                            <span class="text-sm font-medium text-gray-700">ì£¼ìš” ì½˜í…ì¸ ë¡œ í‘œì‹œ</span>
                        </label>
                    </div>

                    <div class="flex justify-end space-x-4">
                        <button type="button" onclick="closeContentModal()" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                            ì·¨ì†Œ
                        </button>
                        <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                            <i class="fas fa-save mr-2"></i>ì €ì¥
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ì½˜í…ì¸  ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
    <div id="contentViewModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden">
            <div class="flex items-center justify-between p-6 border-b border-gray-200">
                <h2 id="viewModalTitle" class="text-xl font-bold text-gray-900">ì½˜í…ì¸  ìƒì„¸</h2>
                <div class="flex items-center space-x-4">
                    <button onclick="editContentFromView()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                        <i class="fas fa-edit mr-2"></i>í¸ì§‘
                    </button>
                    <button onclick="closeContentViewModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6 overflow-y-auto max-h-[calc(90vh-140px)]">
                <div id="contentViewDetails">
                    <!-- ì½˜í…ì¸  ìƒì„¸ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase Config -->
    <script type="module" src="../js/firebase/firebase-init.js"></script>
    <script type="module" src="js/admin-content.js"></script>
</body>
</html>